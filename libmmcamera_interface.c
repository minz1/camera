/* This file has been generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2015 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// int __fastcall _cxa_finalize(_DWORD); weak
// int pthread_mutex_lock(pthread_mutex_t *mutex);
// int pthread_mutex_unlock(pthread_mutex_t *mutex);
int __fastcall j_mm_camera_util_get_index_by_handler(int result);
int __fastcall j_mm_camera_util_get_camera_by_handler(int a1);
signed int __fastcall j_mm_camera_channel_ae_bracketting(int a1, int a2, int a3);
signed int __fastcall j_mm_camera_config_channel_notify(int a1, int a2, int a3);
signed int __fastcall j_mm_camera_flush_super_buf_queue(int a1, int a2, int a3);
signed int __fastcall j_mm_camera_cancel_super_buf_request(int a1, int a2);
signed int __fastcall j_mm_camera_request_super_buf(int a1, int a2, int a3);
int __fastcall j_mm_camera_qbuf(int a1, int a2, int *a3);
signed int __fastcall j_mm_camera_stop_channel(int a1, int a2);
signed int __fastcall j_mm_camera_start_channel(int a1, int a2);
signed int __fastcall j_mm_camera_get_stream_parms(int a1, int a2, int a3, int a4);
signed int __fastcall j_mm_camera_get_queued_buf_count(int a1, int a2, int a3);
signed int __fastcall j_mm_camera_set_stream_parms(int a1, int a2, int a3, int a4);
signed int __fastcall j_mm_camera_unmap_stream_buf(int a1, int a2, int a3, char a4, int a5, int a6);
signed int __fastcall j_mm_camera_map_stream_buf(int a1, int a2, int a3, char a4, int a5, int a6, int a7, int a8);
signed int __fastcall j_mm_camera_config_stream(int a1, int a2, int a3, int a4);
signed int __fastcall j_mm_camera_del_stream(int a1, int a2, int a3);
int __fastcall j_mm_camera_add_stream(int a1, int a2);
signed int __fastcall j_mm_camera_get_bundle_info(int a1, int a2, int a3);
signed int __fastcall j_mm_camera_del_channel(int a1, int a2);
int __fastcall j_mm_camera_add_channel(int a1, int a2, int a3, int a4);
signed int __fastcall j_mm_camera_unprepare_snapshot(int a1, int a2);
int __fastcall j_mm_camera_prepare_snapshot(int a1, int a2, int a3);
int __fastcall j_mm_camera_cancel_auto_focus(int a1);
int __fastcall j_mm_camera_do_auto_focus(int a1, int a2, int a3);
int __fastcall j_mm_camera_get_parms(int a1, int a2, int a3);
int __fastcall j_mm_camera_set_parms(int a1, int a2, int a3);
int __fastcall j_mm_camera_unmap_buf(int a1, int a2);
int __fastcall j_mm_camera_map_buf(int a1, int a2, int a3, int a4);
int __fastcall j_mm_camera_close(int a1);
// int pthread_mutex_destroy(pthread_mutex_t *mutex);
// void free(void *ptr);
signed int __fastcall j_mm_camera_register_event_notify(int a1, int a2, int a3);
int __fastcall j_mm_camera_query_capability(int a1);
// int snprintf(char *s, size_t maxlen, const char *format, ...);
// int open(const char *file, int oflag, ...);
// void *memset(void *s, int c, size_t n);
// int ioctl(int fd, unsigned __int32 request, ...);
// int __fastcall _errno(_DWORD); weak
// char *strerror(int errnum);
// int _android_log_print(_DWORD, _DWORD, const char *, ...); weak
// int close(int fd);
// int strncmp(const char *s1, const char *s2, size_t n);
// int __fastcall _stack_chk_fail(_DWORD); weak
// char *strncpy(char *dest, const char *src, size_t n);
// int __fastcall _strncat_chk(_DWORD, _DWORD, _DWORD, _DWORD); weak
int j_get_sensor_info();
// void *malloc(size_t size);
int __fastcall j_mm_camera_util_generate_handler(int a1);
// int pthread_mutex_init(pthread_mutex_t *mutex, const pthread_mutexattr_t *mutexattr);
int __fastcall j_mm_camera_open(int a1);
// int pthread_cond_signal(pthread_cond_t *cond);
signed int __fastcall j_mm_camera_enqueue_evt(int a1, int a2, int a3, int a4);
signed int __fastcall j_mm_camera_register_event_notify_internal(int a1, int a2, int a3);
int __fastcall j_mm_camera_util_get_channel_by_handler(int a1, int a2);
int __fastcall j_mm_channel_qbuf(int a1, int *a2);
signed int __fastcall j_mm_channel_fsm_fn(int a1, int a2, int a3, int *a4);
int __fastcall j_mm_channel_init(int a1, int a2, int a3, int a4);
int __fastcall j_mm_camera_poll_thread_del_poll_fd(_DWORD *a1, int a2, int a3);
int __fastcall j_mm_camera_poll_thread_add_poll_fd(_DWORD *a1, int a2, int a3, int a4, int a5);
char *__fastcall j_mm_camera_util_get_dev_name(int a1);
// int sscanf(const char *s, const char *format, ...);
// int usleep(__useconds_t useconds);
signed int __fastcall j_mm_camera_socket_create(int a1, int a2);
// int pthread_cond_init(pthread_cond_t *cond, const pthread_condattr_t *cond_attr);
int __fastcall j_mm_camera_cmd_thread_launch(int a1, int a2, int a3);
signed int __fastcall j_mm_camera_poll_thread_launch(int a1, int a2);
int __fastcall j_mm_camera_evt_sub(int a1, int a2);
int __fastcall j_mm_camera_socket_close(int result);
int __fastcall j_mm_camera_poll_thread_release(int a1);
signed int __fastcall j_mm_camera_cmd_thread_release(int a1, int a2, int a3, int a4);
// int pthread_cond_destroy(pthread_cond_t *cond);
// int clock_gettime(clockid_t clock_id, struct timespec *tp);
// int pthread_cond_timedwait(pthread_cond_t *cond, pthread_mutex_t *mutex, const struct timespec *abstime);
ssize_t __fastcall j_mm_camera_socket_sendmsg(int a1, int a2, int a3, int a4);
int __fastcall j_mm_camera_util_wait_for_event(int a1, int a2, _DWORD *a3);
int __fastcall j_mm_camera_util_sendmsg(int a1, int a2, int a3, int a4);
int __fastcall j_mm_camera_util_s_ctrl(int a1, int a2, int *a3);
int __fastcall j_mm_camera_util_g_ctrl(int a1, int a2, int *a3);
int __fastcall j_mm_stream_fsm_fn(int a1, int (*a2)(int), int a3, int a4);
int __fastcall j_mm_channel_util_get_stream_by_handler(int a1, int a2);
signed int __fastcall j_mm_channel_request_super_buf(int a1, int a2);
int __fastcall j_mm_stream_map_buf(int a1, int a2, int a3, int a4, int a5, int a6);
int __fastcall j_mm_stream_unmap_buf(int a1, int a2, int a3, int a4);
int __fastcall j_mm_channel_superbuf_queue_init(int a1);
int __fastcall j_mm_channel_add_stream(int a1);
int __fastcall j_mm_channel_start(int a1);
int __fastcall j_mm_channel_release(int a1);
int __fastcall j_mm_channel_get_queued_buf_count(int a1, int a2);
int __fastcall j_mm_channel_del_stream(int a1, int a2);
int __fastcall j_mm_channel_config_stream(int a1, int a2, int a3);
signed int __fastcall j_mm_channel_get_bundle_info(int *a1, _BYTE *a2, int a3);
int __fastcall j_mm_channel_set_stream_parm(int a1, int *a2);
int __fastcall j_mm_channel_get_stream_parm(int a1, int *a2);
int __fastcall j_mm_channel_do_stream_action(int a1, int *a2);
int __fastcall j_mm_channel_map_stream_buf(int a1, int *a2);
int __fastcall j_mm_channel_unmap_stream_buf(int a1, int *a2);
int __fastcall j_mm_channel_superbuf_queue_deinit(int a1);
int __fastcall j_mm_channel_stop(int a1);
signed int __fastcall j_mm_channel_cancel_super_buf_request(int a1);
signed int __fastcall j_mm_channel_flush_super_buf_queue(int a1, int a2);
signed int __fastcall j_mm_channel_config_notify_mode(int a1, int a2);
signed int __fastcall j_mm_channel_unprepare_snapshot(int a1, int a2, int a3, int a4);
signed int __fastcall j_mm_channel_fsm_fn_notused(int a1, int a2, int a3, int a4);
signed int __fastcall j_mm_channel_fsm_fn_stopped(int a1, int a2, int a3, int *a4);
int __fastcall j_mm_channel_fsm_fn_active(int a1, int a2, int a3, int a4);
int __fastcall j_mm_channel_fsm_fn_paused(int a1, int a2, int a3, int a4);
int __fastcall j_mm_channel_superbuf_dequeue_internal(int a1, int a2);
int __fastcall j_mm_channel_superbuf_flush(int a1, int a2);
int __fastcall j_mm_channel_superbuf_flush_matched(int a1, int a2);
signed int __fastcall j_mm_channel_handle_metadata(int a1, int a2, int *a3);
int __fastcall j_mm_channel_util_seq_comp_w_rollover(unsigned int a1, unsigned int a2);
signed int __fastcall j_mm_channel_superbuf_comp_and_enqueue(int a1, int a2, int a3);
int __fastcall j_mm_channel_superbuf_skip(int a1, int a2);
int __fastcall j_mm_camera_start_zsl_snapshot(int a1, int a2, int a3);
int __fastcall j_mm_camera_stop_zsl_snapshot(int a1, int a2, int a3);
int __fastcall j_mm_channel_superbuf_bufdone_overflow(int a1, int a2);
int __fastcall j_mm_channel_superbuf_dequeue(int a1);
int __fastcall j_mm_stream_read_msm_frame(int a1, int a2, int a3);
int __fastcall j_mm_stream_handle_rcvd_buf(int result, int a2, int a3);
int __fastcall j_mm_stream_set_ext_mode(int a1);
// void *memcpy(void *dest, const void *src, size_t n);
int __fastcall j_mm_stream_deinit_bufs(int a1, int (*a2)(int), int (*a3)(), int a4);
signed int __fastcall j_mm_stream_request_buf(int a1);
int __fastcall j_mm_stream_qbuf(int a1, int a2);
signed int __fastcall j_mm_stream_reg_buf(int a1, int a2);
int __fastcall j_mm_stream_set_parm(int a1, int a2, int a3);
int __fastcall j_mm_stream_get_parm(int a1, int a2, int a3);
int __fastcall j_mm_stream_unreg_buf(int a1);
int __fastcall j_mm_stream_streamon(int a1);
int j_mm_camera_util_chip_is_a_family();
signed int __fastcall j_mm_stream_calc_offset_preview(int a1, int a2, int a3);
signed int __fastcall j_mm_stream_calc_offset_snapshot(int a1, int a2, int a3, int a4);
int __fastcall j_mm_stream_calc_offset_video(unsigned int *a1, int a2);
signed int __fastcall j_mm_stream_calc_offset_raw(int a1, int a2, int a3, int a4);
int __fastcall j_mm_stream_calc_offset_metadata(int a1, int a2, int a3);
signed int __fastcall j_mm_stream_calc_offset_postproc(int a1, int a2, int a3, int a4);
signed int __fastcall j_mm_stream_calc_offset(int a1);
signed int __fastcall j_mm_stream_get_v4l2_fmt(unsigned int a1, int a2, int a3);
signed int __fastcall j_mm_stream_sync_info(int a1, int a2);
int __fastcall j_mm_stream_set_fmt(int a1);
signed int __fastcall j_mm_stream_config(int a1, int a2);
int __fastcall j_mm_stream_release(int a1);
signed int __fastcall j_mm_stream_init_bufs(int a1, int a2, int (*a3)());
signed int __fastcall j_mm_stream_buf_done(int a1, int a2, int a3);
int __fastcall j_mm_stream_streamoff(int *a1);
int __fastcall j_mm_stream_get_queued_buf_count(int a1);
int __fastcall j_mm_stream_set_parm_0(int a1, int a2, int a3);
int __fastcall j_mm_stream_fsm_inited(int a1, int a2, int a3, int a4);
signed int __fastcall j_mm_stream_fsm_acquired(int a1, int a2, int a3, int a4);
signed int __fastcall j_mm_stream_fsm_cfg(int a1, int a2, int a3, int a4);
int __fastcall j_mm_stream_fsm_buffed(int a1, int (*a2)(int), int a3, int a4);
int __fastcall j_mm_stream_fsm_reg(int a1, int a2, int a3, int a4);
signed int __fastcall j_mm_stream_fsm_active(int a1, int a2, int a3, int a4);
// ssize_t write(int fd, const void *buf, size_t n);
// int pthread_cond_wait(pthread_cond_t *cond, pthread_mutex_t *mutex);
// int __fastcall _poll_chk(_DWORD); weak
// ssize_t read(int fd, void *buf, size_t nbytes);
// int pipe(int *pipedes);
// int pthread_create(pthread_t *newthread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg);
// int pthread_join(pthread_t th, void **thread_return);
// int pthread_attr_init(pthread_attr_t *attr);
// int pthread_attr_setdetachstate(pthread_attr_t *attr, int detachstate);
signed int __fastcall j_mm_camera_cmd_thread_stop(int a1, int a2, int a3);
int __fastcall j_mm_camera_cmd_thread_destroy(int a1);
// int socket(int domain, int type, int protocol);
// int connect(int fd, const struct sockaddr *addr, socklen_t len);
// ssize_t sendmsg(int fd, const struct msghdr *message, int flags);
// ssize_t recvmsg(int fd, struct msghdr *message, int flags);
// void abort(void);
// int fprintf(FILE *stream, const char *format, ...);
// int __fastcall _aeabi_memcpy(_DWORD); weak
// int __fastcall _aeabi_memset(_DWORD, _DWORD, _DWORD); weak
// int dladdr(void); weak
// int __fastcall _snprintf_chk(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int __fastcall _gnu_Unwind_Find_exidx(_DWORD, _DWORD); weak
int j___aeabi_ldiv0();
// int raise(int sig);
int sub_365C();
int (*__fastcall sub_367C(int (*result)(void)))(void);
int __fastcall mm_camera_util_generate_handler(int a1);
int __fastcall mm_camera_util_get_index_by_handler(int result);
char *__fastcall mm_camera_util_get_dev_name(int a1);
int __fastcall mm_camera_util_get_camera_by_handler(int a1);
signed int __fastcall sub_37D8(int a1, int a2, int a3);
signed int __fastcall sub_3820(int a1, int a2, int a3);
signed int __fastcall sub_3868(int a1, int a2, int a3);
signed int __fastcall sub_38B0(int a1, int a2);
signed int __fastcall sub_38F4(int a1, int a2, int a3);
int __fastcall sub_393C(int a1, int a2, int *a3);
signed int __fastcall sub_3984(int a1, int a2);
signed int __fastcall sub_39C8(int a1, int a2);
signed int __fastcall sub_3A0C(int a1, int a2, int a3, int a4);
signed int __fastcall sub_3A5C(int a1, int a2, int a3);
signed int __fastcall sub_3AA4(int a1, int a2, int a3, int a4);
signed int __fastcall sub_3AF4(int a1, int a2, int a3, char a4, int a5, int a6);
signed int __fastcall sub_3B54(int a1, int a2, int a3, char a4, int a5, int a6, int a7, int a8);
signed int __fastcall sub_3BC8(int a1, int a2, int a3, int a4);
signed int __fastcall sub_3C18(int a1, int a2, int a3);
int __fastcall sub_3C60(int a1, int a2);
signed int __fastcall sub_3CA0(int a1, int a2, int a3);
signed int __fastcall sub_3CE8(int a1, int a2);
int __fastcall sub_3D2C(int a1, int a2, int a3, int a4);
signed int __fastcall sub_3D78(int a1, int a2);
int __fastcall sub_3DBC(int a1, int a2);
int __fastcall sub_3E00(int a1);
int __fastcall sub_3E40(int a1);
int __fastcall sub_3E80(int a1, int a2);
int __fastcall sub_3EC4(int a1, int a2);
int __fastcall sub_3F08(int a1, int a2);
int __fastcall sub_3F4C(int a1, int a2, int a3, int a4);
int __fastcall sub_3F9C(int a1);
signed int __fastcall sub_4014(int a1, int a2, int a3);
int __fastcall sub_405C(int a1);
int get_sensor_info();
int get_num_of_cameras();
char *__fastcall get_cam_info(int a1);
int __fastcall camera_open(signed int a1, int a2, int a3);
int __fastcall sub_4570(int result, int a2);
int __fastcall mm_camera_util_get_channel_by_handler(int a1, int a2);
int mm_camera_util_chip_is_a_family();
signed int __fastcall mm_camera_enqueue_evt(int a1, int a2, int a3, int a4);
int sub_4690(); // weak
signed int __fastcall mm_camera_register_event_notify_internal(int a1, int a2, int a3);
signed int __fastcall mm_camera_register_event_notify(int a1, int a2, int a3);
int __fastcall mm_camera_qbuf(int a1, int a2, int *a3);
signed int __fastcall mm_camera_get_queued_buf_count(int a1, int a2, int a3);
int __fastcall mm_camera_query_capability(int a1);
signed int __fastcall mm_camera_unprepare_snapshot(int a1, int a2);
int __fastcall mm_camera_add_channel(int a1, int a2, int a3, int a4);
signed int __fastcall mm_camera_del_channel(int a1, int a2);
signed int __fastcall mm_camera_get_bundle_info(int a1, int a2, int a3);
int __fastcall mm_camera_add_stream(int a1, int a2);
signed int __fastcall mm_camera_del_stream(int a1, int a2, int a3);
signed int __fastcall mm_camera_config_stream(int a1, int a2, int a3, int a4);
signed int __fastcall mm_camera_start_channel(int a1, int a2);
signed int __fastcall mm_camera_stop_channel(int a1, int a2);
signed int __fastcall mm_camera_request_super_buf(int a1, int a2, int a3);
signed int __fastcall mm_camera_cancel_super_buf_request(int a1, int a2);
signed int __fastcall mm_camera_flush_super_buf_queue(int a1, int a2, int a3);
signed int __fastcall mm_camera_channel_ae_bracketting(int a1, int a2, int a3);
signed int __fastcall mm_camera_config_channel_notify(int a1, int a2, int a3);
signed int __fastcall mm_camera_set_stream_parms(int a1, int a2, int a3, int a4);
signed int __fastcall mm_camera_get_stream_parms(int a1, int a2, int a3, int a4);
signed int __fastcall mm_camera_do_stream_action(int a1, int a2, int a3, int a4);
signed int __fastcall mm_camera_map_stream_buf(int a1, int a2, int a3, char a4, int a5, int a6, int a7, int a8);
signed int __fastcall mm_camera_unmap_stream_buf(int a1, int a2, int a3, char a4, int a5, int a6);
int __fastcall mm_camera_evt_sub(int a1, int a2);
int __fastcall mm_camera_open(int a1);
int __fastcall mm_camera_close(int a1);
int __fastcall mm_camera_util_wait_for_event(int a1, int a2, _DWORD *a3);
int __fastcall mm_camera_util_sendmsg(int a1, int a2, int a3, int a4);
int __fastcall mm_camera_map_buf(int a1, int a2, int a3, int a4);
int __fastcall mm_camera_unmap_buf(int a1, int a2);
int __fastcall mm_camera_util_s_ctrl(int a1, int a2, int *a3);
int __fastcall mm_camera_set_parms(int a1, int a2, int a3);
int __fastcall mm_camera_do_auto_focus(int a1, int a2, int a3);
int __fastcall mm_camera_cancel_auto_focus(int a1);
int __fastcall mm_camera_prepare_snapshot(int a1, int a2, int a3);
int __fastcall mm_camera_start_zsl_snapshot(int a1, int a2, int a3);
int __fastcall mm_camera_stop_zsl_snapshot(int a1, int a2, int a3);
int __fastcall mm_camera_take_picture_done(int a1, int a2, int a3);
int __fastcall mm_camera_util_g_ctrl(int a1, int a2, int *a3);
int __fastcall mm_camera_get_parms(int a1, int a2, int a3);
signed int __fastcall sub_5390(int a1, int a2);
int __fastcall sub_53D4(int a1);
_DWORD *__fastcall sub_53F8(_DWORD *result, int a2, int a3);
int __fastcall mm_channel_util_get_stream_by_handler(int a1, int a2);
signed int __fastcall mm_channel_fsm_fn_notused(int a1, int a2, int a3, int a4);
int __fastcall mm_channel_fsm_fn_paused(int a1, int a2, int a3, int a4);
int __fastcall mm_channel_init(int a1, int a2, int a3, int a4);
int __fastcall mm_channel_release(int a1);
int __fastcall mm_channel_add_stream(int a1);
int __fastcall mm_channel_del_stream(int a1, int a2);
int __fastcall mm_channel_config_stream(int a1, int a2, int a3);
signed int __fastcall mm_channel_get_bundle_info(int *a1, _BYTE *a2, int a3);
signed int __fastcall mm_channel_request_super_buf(int a1, int a2);
signed int __fastcall mm_channel_cancel_super_buf_request(int a1);
signed int __fastcall mm_channel_flush_super_buf_queue(int a1, int a2);
signed int __fastcall mm_channel_config_notify_mode(int a1, int a2);
signed int __fastcall mm_channel_unprepare_snapshot(int a1, int a2, int a3, int a4);
int __fastcall mm_channel_qbuf(int a1, int *a2);
int __fastcall mm_channel_get_queued_buf_count(int a1, int a2);
int __fastcall mm_channel_set_stream_parm(int a1, int *a2);
int __fastcall mm_channel_get_stream_parm(int a1, int *a2);
int __fastcall mm_channel_do_stream_action(int a1, int *a2);
int __fastcall mm_channel_map_stream_buf(int a1, int *a2);
int __fastcall mm_channel_unmap_stream_buf(int a1, int *a2);
int __fastcall mm_channel_superbuf_queue_init(int a1);
int __fastcall mm_channel_start(int a1);
signed int __fastcall mm_channel_fsm_fn_stopped(int a1, int a2, int a3, int *a4);
int __fastcall mm_channel_superbuf_queue_deinit(int a1);
int __fastcall mm_channel_stop(int a1);
int __fastcall mm_channel_fsm_fn_active(int a1, int a2, int a3, int a4);
signed int __fastcall mm_channel_fsm_fn(int a1, int a2, int a3, int *a4);
int __fastcall mm_channel_util_seq_comp_w_rollover(unsigned int a1, unsigned int a2);
int __fastcall mm_channel_superbuf_dequeue_internal(int a1, int a2);
int __fastcall mm_channel_superbuf_dequeue(int a1);
int __fastcall mm_channel_superbuf_bufdone_overflow(int a1, int a2);
int __fastcall mm_channel_superbuf_skip(int a1, int a2);
int __fastcall mm_channel_superbuf_flush(int a1, int a2);
int __fastcall mm_channel_superbuf_flush_matched(int a1, int a2);
signed int __fastcall mm_channel_handle_metadata(int a1, int a2, int *a3);
signed int __fastcall mm_channel_superbuf_comp_and_enqueue(int a1, int a2, int a3);
void __fastcall sub_65C0(int a1, int a2);
unsigned int __fastcall sub_6894(unsigned int a1, int a2);
int __fastcall mm_stream_handle_rcvd_buf(int result, int a2, int a3);
int __fastcall mm_stream_release(int a1);
int __fastcall mm_stream_streamon(int a1);
int __fastcall mm_stream_streamoff(int *a1);
int __fastcall mm_stream_read_msm_frame(int a1, int a2, int a3);
int __fastcall sub_6C40(int result);
int __fastcall mm_stream_set_parm(int a1, int a2, int a3);
int __fastcall mm_stream_get_parm(int a1, int a2, int a3);
int __fastcall mm_stream_set_ext_mode(int a1);
int __fastcall mm_stream_fsm_inited(int a1, int a2, int a3, int a4);
int __fastcall mm_stream_qbuf(int a1, int a2);
signed int __fastcall mm_stream_request_buf(int a1);
int __fastcall mm_stream_map_buf(int a1, int a2, int a3, int a4, int a5, int a6);
int __fastcall sub_709C(int a1, int a2, int a3, int a4, int a5);
int __fastcall mm_stream_unmap_buf(int a1, int a2, int a3, int a4);
int __fastcall sub_7124(int a1, int a2, int a3);
int __fastcall mm_stream_deinit_bufs(int a1, int (*a2)(int), int (*a3)(), int a4);
signed int __fastcall mm_stream_init_bufs(int a1, int a2, int (*a3)());
signed int __fastcall mm_stream_reg_buf(int a1, int a2);
int __fastcall mm_stream_fsm_buffed(int a1, int (*a2)(int), int a3, int a4);
int __fastcall mm_stream_unreg_buf(int a1);
int __fastcall mm_stream_fsm_reg(int a1, int a2, int a3, int a4);
signed int __fastcall mm_stream_get_v4l2_fmt(unsigned int a1, int a2, int a3);
signed int __fastcall mm_stream_calc_offset_preview(int a1, int a2, int a3);
signed int __fastcall mm_stream_calc_offset_snapshot(int a1, int a2, int a3, int a4);
signed int __fastcall mm_stream_calc_offset_raw(int a1, int a2, int a3, int a4);
int __fastcall mm_stream_calc_offset_video(unsigned int *a1, int a2);
int __fastcall mm_stream_calc_offset_metadata(int a1, int a2, int a3);
signed int __fastcall mm_stream_calc_offset_postproc(int a1, int a2, int a3, int a4);
signed int __fastcall mm_stream_calc_offset(int a1);
signed int __fastcall mm_stream_sync_info(int a1, int a2);
int __fastcall mm_stream_set_fmt(int a1);
signed int __fastcall mm_stream_config(int a1, int a2);
signed int __fastcall mm_stream_fsm_acquired(int a1, int a2, int a3, int a4);
signed int __fastcall mm_stream_fsm_cfg(int a1, int a2, int a3, int a4);
signed int __fastcall mm_stream_buf_done(int a1, int a2, int a3);
_DWORD *__fastcall sub_82E4(_DWORD *result, int a2);
int __fastcall mm_stream_get_queued_buf_count(int a1);
signed int __fastcall mm_stream_fsm_active(int a1, int a2, int a3, int a4);
int __fastcall mm_stream_fsm_fn(int a1, int (*a2)(int), int a3, int a4);
signed int __fastcall mm_stream_reg_buf_cb(int a1, int a2);
int __fastcall sub_8538(int a1, char a2);
int __fastcall sub_85B4(int a1);
int __fastcall sub_85FC(int a1, int a2, int a3);
int __fastcall sub_8714(int a1, int a2, int a3, int a4);
int __fastcall mm_camera_poll_thread_notify_entries_updated(int a1);
int __fastcall mm_camera_poll_thread_add_poll_fd(_DWORD *a1, int a2, int a3, int a4, int a5);
int __fastcall mm_camera_poll_thread_del_poll_fd(_DWORD *a1, int a2, int a3);
signed int __fastcall mm_camera_poll_thread_launch(int a1, int a2);
int __fastcall mm_camera_poll_thread_release(int a1);
int __fastcall mm_camera_cmd_thread_launch(int a1, int a2, int a3);
signed int __fastcall mm_camera_cmd_thread_stop(int a1, int a2, int a3);
int __fastcall mm_camera_cmd_thread_destroy(int a1);
signed int __fastcall mm_camera_cmd_thread_release(int a1, int a2, int a3, int a4);
signed int __fastcall mm_camera_socket_create(int a1, int a2);
int __fastcall mm_camera_socket_close(int result);
ssize_t __fastcall mm_camera_socket_sendmsg(int a1, int a2, int a3, int a4);
signed int __fastcall mm_camera_socket_recvmsg(int a1, int a2, int a3, signed int *a4);
signed int __fastcall sub_8F28(int a1, int a2, unsigned int a3, unsigned int a4);
signed int __fastcall sub_9268(int a1, int a2, unsigned int a3, int a4, int *a5);
signed int __fastcall sub_930C(int a1, int a2, unsigned int a3, int a4);
signed int __fastcall sub_9434(int a1, int a2, int a3);
void sub_9488();
void sub_9490();
signed int __fastcall sub_952C(int a1, int a2, char a3);
void __fastcall sub_9648(int a1, int a2, int a3);
int __fastcall sub_96CC(int a1, int a2, int a3, int a4, int a5);
int __fastcall sub_96E4(int _R0);
int __fastcall sub_96EC(int _R0);
int __fastcall sub_96F4(int _R0);
void sub_96FC();
void sub_9740();
int __fastcall sub_9754(int a1);
signed int __fastcall sub_97A4(int a1, int a2, _DWORD *a3);
signed int __fastcall sub_97D4(int a1, int a2, int a3);
signed int __fastcall sub_9818(int a1, int a2, _QWORD *a3);
signed int __fastcall sub_9848(int a1, int a2, int a3, int a4);
int __fastcall sub_9880(int a1);
signed int __fastcall sub_9888(int a1, int a2);
signed int __fastcall sub_98A8(int a1);
int __fastcall sub_98C0(int a1);
int __fastcall sub_98D0(int a1, int a2);
int __fastcall sub_98F0(int a1, signed int a2);
int __fastcall sub_998C(int result, signed int a2, int a3);
int __fastcall sub_9A24(int a1, int a2);
__int64 __fastcall sub_9A44(int a1, int a2);
int __fastcall sub_9AF4(int a1, int a2, int a3, int a4);
signed int __fastcall sub_9BC8(int a1);
int __fastcall sub_9C14(int a1, int a2);
void __fastcall sub_9C4C(int a1);
int __fastcall sub_9C64(int a1);
signed int __fastcall sub_9C6C(int a1, int a2, int a3, _DWORD *a4);
int __fastcall sub_9CC8(int a1, int a2);
const char *__fastcall sub_9D18(int a1, signed int a2);
int __fastcall sub_9D20(int result);
void __fastcall sub_9D28(int a1, int a2, int a3, int a4);
int __fastcall sub_9D5C(int a1);
int sub_9DB0(); // weak
int __fastcall sub_9F38(int result, int a2, int a3, _DWORD *a4, int a5, int a6, int a7, _DWORD *a8);
int sub_A60C(); // weak
int __fastcall sub_A620(int _R0);
int __fastcall sub_A628(int _R0);
int __fastcall sub_A630(int _R0);
int __fastcall sub_A638(_DWORD *a1);
int __fastcall sub_A67C(_DWORD *a1);
int __fastcall sub_A698(int result, unsigned int a2);
int _aeabi_ldiv0();
signed int __fastcall j_j_j_mm_camera_channel_ae_bracketting(int a1, int a2, int a3);
signed int __fastcall j_j_mm_camera_channel_ae_bracketting(int a1, int a2, int a3);
signed int __fastcall j_j_j_mm_camera_config_channel_notify(int a1, int a2, int a3);
signed int __fastcall j_j_mm_camera_config_channel_notify(int a1, int a2, int a3);
signed int __fastcall j_j_j_mm_camera_flush_super_buf_queue(int a1, int a2, int a3);
signed int __fastcall j_j_mm_camera_flush_super_buf_queue(int a1, int a2, int a3);
signed int __fastcall j_j_j_mm_camera_cancel_super_buf_request(int a1, int a2);
signed int __fastcall j_j_mm_camera_cancel_super_buf_request(int a1, int a2);
signed int __fastcall j_j_j_mm_camera_request_super_buf(int a1, int a2, int a3);
signed int __fastcall j_j_mm_camera_request_super_buf(int a1, int a2, int a3);
int __fastcall j_j_j_mm_camera_qbuf(int a1, int a2, int *a3);
int __fastcall j_j_mm_camera_qbuf(int a1, int a2, int *a3);
signed int __fastcall j_j_j_mm_camera_stop_channel(int a1, int a2);
signed int __fastcall j_j_mm_camera_stop_channel(int a1, int a2);
signed int __fastcall j_j_j_mm_camera_start_channel(int a1, int a2);
signed int __fastcall j_j_mm_camera_start_channel(int a1, int a2);
signed int __fastcall j_j_j_mm_camera_get_stream_parms(int a1, int a2, int a3, int a4);
signed int __fastcall j_j_mm_camera_get_stream_parms(int a1, int a2, int a3, int a4);
signed int __fastcall j_j_j_mm_camera_get_queued_buf_count(int a1, int a2, int a3);
signed int __fastcall j_j_mm_camera_get_queued_buf_count(int a1, int a2, int a3);
signed int __fastcall j_j_j_mm_camera_set_stream_parms(int a1, int a2, int a3, int a4);
signed int __fastcall j_j_mm_camera_set_stream_parms(int a1, int a2, int a3, int a4);
signed int __fastcall j_j_j_mm_camera_unmap_stream_buf(int a1, int a2, int a3, char a4, int a5, int a6);
signed int __fastcall j_j_mm_camera_unmap_stream_buf(int a1, int a2, int a3, char a4, int a5, int a6);
signed int __fastcall j_j_j_mm_camera_map_stream_buf(int a1, int a2, int a3, char a4, int a5, int a6, int a7, int a8);
signed int __fastcall j_j_mm_camera_map_stream_buf(int a1, int a2, int a3, char a4, int a5, int a6, int a7, int a8);
signed int __fastcall j_j_j_mm_camera_config_stream(int a1, int a2, int a3, int a4);
signed int __fastcall j_j_mm_camera_config_stream(int a1, int a2, int a3, int a4);
signed int __fastcall j_j_j_mm_camera_del_stream(int a1, int a2, int a3);
signed int __fastcall j_j_mm_camera_del_stream(int a1, int a2, int a3);
int __fastcall j_j_j_mm_camera_add_stream(int a1, int a2);
int __fastcall j_j_mm_camera_add_stream(int a1, int a2);
signed int __fastcall j_j_j_mm_camera_get_bundle_info(int a1, int a2, int a3);
signed int __fastcall j_j_mm_camera_get_bundle_info(int a1, int a2, int a3);
signed int __fastcall j_j_j_mm_camera_del_channel(int a1, int a2);
signed int __fastcall j_j_mm_camera_del_channel(int a1, int a2);
int __fastcall j_j_j_mm_camera_add_channel(int a1, int a2, int a3, int a4);
int __fastcall j_j_mm_camera_add_channel(int a1, int a2, int a3, int a4);
signed int __fastcall j_j_j_mm_camera_unprepare_snapshot(int a1, int a2);
signed int __fastcall j_j_mm_camera_unprepare_snapshot(int a1, int a2);
int __fastcall j_j_j_mm_camera_prepare_snapshot(int a1, int a2, int a3);
int __fastcall j_j_mm_camera_prepare_snapshot(int a1, int a2, int a3);
int __fastcall j_j_j_mm_camera_cancel_auto_focus(int a1);
int __fastcall j_j_mm_camera_cancel_auto_focus(int a1);
int __fastcall j_j_j_mm_camera_do_auto_focus(int a1, int a2, int a3);
int __fastcall j_j_mm_camera_do_auto_focus(int a1, int a2, int a3);
int __fastcall j_j_j_mm_camera_get_parms(int a1, int a2, int a3);
int __fastcall j_j_mm_camera_get_parms(int a1, int a2, int a3);
int __fastcall j_j_j_mm_camera_set_parms(int a1, int a2, int a3);
int __fastcall j_j_mm_camera_set_parms(int a1, int a2, int a3);
int __fastcall j_j_j_mm_camera_unmap_buf(int a1, int a2);
int __fastcall j_j_mm_camera_unmap_buf(int a1, int a2);
int __fastcall j_j_j_mm_camera_map_buf(int a1, int a2, int a3, int a4);
int __fastcall j_j_mm_camera_map_buf(int a1, int a2, int a3, int a4);
signed int __fastcall j_j_j_mm_camera_register_event_notify(int a1, int a2, int a3);
signed int __fastcall j_j_mm_camera_register_event_notify(int a1, int a2, int a3);
int __fastcall j_j_j_mm_camera_query_capability(int a1);
int __fastcall j_j_mm_camera_query_capability(int a1);
int j_j_pthread_mutex_unlock(pthread_mutex_t *mutex);
int j_pthread_mutex_unlock(pthread_mutex_t *mutex);
int __fastcall j_j_j_mm_channel_qbuf(int a1, int *a2);
int __fastcall j_j_mm_channel_qbuf(int a1, int *a2);
signed int __fastcall j_j_j_mm_channel_fsm_fn(int a1, int a2, int a3, int *a4);
signed int __fastcall j_j_mm_channel_fsm_fn(int a1, int a2, int a3, int *a4);
int __fastcall j_j_j_mm_stream_fsm_fn(int a1, int (*a2)(int), int a3, int a4);
int __fastcall j_j_mm_stream_fsm_fn(int a1, int (*a2)(int), int a3, int a4);
signed int __fastcall j_j_j_mm_channel_request_super_buf(int a1, int a2);
signed int __fastcall j_j_mm_channel_request_super_buf(int a1, int a2);
int __fastcall j_j_j_mm_stream_unmap_buf(int a1, int a2, int a3, int a4);
int __fastcall j_j_mm_stream_unmap_buf(int a1, int a2, int a3, int a4);
int __fastcall j_j_j_mm_channel_get_queued_buf_count(int a1, int a2);
int __fastcall j_j_mm_channel_get_queued_buf_count(int a1, int a2);
int __fastcall j_j_j_mm_channel_del_stream(int a1, int a2);
int __fastcall j_j_mm_channel_del_stream(int a1, int a2);
int __fastcall j_j_j_mm_channel_config_stream(int a1, int a2, int a3);
int __fastcall j_j_mm_channel_config_stream(int a1, int a2, int a3);
signed int __fastcall j_j_j_mm_channel_get_bundle_info(int *a1, _BYTE *a2, int a3);
signed int __fastcall j_j_mm_channel_get_bundle_info(int *a1, _BYTE *a2, int a3);
int __fastcall j_j_j_mm_channel_set_stream_parm(int a1, int *a2);
int __fastcall j_j_mm_channel_set_stream_parm(int a1, int *a2);
int __fastcall j_j_j_mm_channel_get_stream_parm(int a1, int *a2);
int __fastcall j_j_mm_channel_get_stream_parm(int a1, int *a2);
int __fastcall j_j_j_mm_channel_do_stream_action(int a1, int *a2);
int __fastcall j_j_mm_channel_do_stream_action(int a1, int *a2);
int __fastcall j_j_j_mm_channel_map_stream_buf(int a1, int *a2);
int __fastcall j_j_mm_channel_map_stream_buf(int a1, int *a2);
int __fastcall j_j_j_mm_channel_unmap_stream_buf(int a1, int *a2);
int __fastcall j_j_mm_channel_unmap_stream_buf(int a1, int *a2);
signed int __fastcall j_j_j_mm_channel_cancel_super_buf_request(int a1);
signed int __fastcall j_j_mm_channel_cancel_super_buf_request(int a1);
signed int __fastcall j_j_j_mm_channel_flush_super_buf_queue(int a1, int a2);
signed int __fastcall j_j_mm_channel_flush_super_buf_queue(int a1, int a2);
signed int __fastcall j_j_j_mm_channel_config_notify_mode(int a1, int a2);
signed int __fastcall j_j_mm_channel_config_notify_mode(int a1, int a2);
signed int __fastcall j_j_j_mm_channel_unprepare_snapshot(int a1, int a2, int a3, int a4);
signed int __fastcall j_j_mm_channel_unprepare_snapshot(int a1, int a2, int a3, int a4);
int __fastcall j_j_j_mm_channel_superbuf_flush(int a1, int a2);
int __fastcall j_j_mm_channel_superbuf_flush(int a1, int a2);
int __fastcall j_j___android_log_print(int a1, int a2, const char *a3);
int __fastcall j___android_log_print(int a1, int a2, const char *a3);
int __fastcall j_j_j_mm_stream_set_parm(int a1, int a2, int a3);
int __fastcall j_j_mm_stream_set_parm(int a1, int a2, int a3);
int __fastcall j_j_j_mm_stream_get_parm(int a1, int a2, int a3);
int __fastcall j_j_mm_stream_get_parm(int a1, int a2, int a3);
int __fastcall j_j_j_mm_stream_set_fmt(int a1);
int __fastcall j_j_mm_stream_set_fmt(int a1);
int __fastcall j_j_j_mm_stream_get_queued_buf_count(int a1);
int __fastcall j_j_mm_stream_get_queued_buf_count(int a1);
signed int __fastcall j_j_j_mm_stream_buf_done(int a1, int a2, int a3);
signed int __fastcall j_j_mm_stream_buf_done(int a1, int a2, int a3);
int __fastcall j_j_j_mm_stream_set_parm_0(int a1, int a2, int a3);
int __fastcall j_j_mm_stream_set_parm_0(int a1, int a2, int a3);
int __fastcall j_j_j_mm_stream_fsm_inited(int a1, int a2, int a3, int a4);
int __fastcall j_j_mm_stream_fsm_inited(int a1, int a2, int a3, int a4);
signed int __fastcall j_j_j_mm_stream_fsm_acquired(int a1, int a2, int a3, int a4);
signed int __fastcall j_j_mm_stream_fsm_acquired(int a1, int a2, int a3, int a4);
signed int __fastcall j_j_j_mm_stream_fsm_cfg(int a1, int a2, int a3, int a4);
signed int __fastcall j_j_mm_stream_fsm_cfg(int a1, int a2, int a3, int a4);
int __fastcall j_j_j_mm_stream_fsm_buffed(int a1, int (*a2)(int), int a3, int a4);
int __fastcall j_j_mm_stream_fsm_buffed(int a1, int (*a2)(int), int a3, int a4);
int __fastcall j_j_j_mm_stream_fsm_reg(int a1, int a2, int a3, int a4);
int __fastcall j_j_mm_stream_fsm_reg(int a1, int a2, int a3, int a4);
signed int __fastcall j_j_j_mm_stream_fsm_active(int a1, int a2, int a3, int a4);
signed int __fastcall j_j_mm_stream_fsm_active(int a1, int a2, int a3, int a4);
int __fastcall j_j_j_mm_camera_cmd_thread_destroy(int a1);
int __fastcall j_j_mm_camera_cmd_thread_destroy(int a1);
int j_j_close(int fd);
int j_close(int fd);
void sub_AB9C();
void sub_ABA0();
int __fastcall sub_ABAC(_DWORD *a1);
int __fastcall sub_ABB0(_DWORD *a1);

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_943C; // weak
void *off_EBA4 = (void *)0x98C9; // weak
int GLOBAL_OFFSET_TABLE_ = 0; // weak
void *off_F000 = &off_F000; // weak
void *off_F004 = (void *)0x405D; // weak
char byte_F07C[]; // weak
_UNKNOWN unk_F1C0; // weak
__int16 word_F1C4; // weak
_UNKNOWN unk_F1C8; // weak
_UNKNOWN unk_F1CC; // weak
// extern _UNKNOWN _stack_chk_guard; weak
// extern struct _IO_FILE *stderr;


//----- (00002DF8) --------------------------------------------------------
int __fastcall j_mm_camera_util_get_index_by_handler(int result)
{
  return mm_camera_util_get_index_by_handler(result);
}

//----- (00002E04) --------------------------------------------------------
int __fastcall j_mm_camera_util_get_camera_by_handler(int a1)
{
  return mm_camera_util_get_camera_by_handler(a1);
}

//----- (00002E10) --------------------------------------------------------
signed int __fastcall j_mm_camera_channel_ae_bracketting(int a1, int a2, int a3)
{
  return mm_camera_channel_ae_bracketting(a1, a2, a3);
}

//----- (00002E1C) --------------------------------------------------------
signed int __fastcall j_mm_camera_config_channel_notify(int a1, int a2, int a3)
{
  return mm_camera_config_channel_notify(a1, a2, a3);
}

//----- (00002E28) --------------------------------------------------------
signed int __fastcall j_mm_camera_flush_super_buf_queue(int a1, int a2, int a3)
{
  return mm_camera_flush_super_buf_queue(a1, a2, a3);
}

//----- (00002E34) --------------------------------------------------------
signed int __fastcall j_mm_camera_cancel_super_buf_request(int a1, int a2)
{
  return mm_camera_cancel_super_buf_request(a1, a2);
}

//----- (00002E40) --------------------------------------------------------
signed int __fastcall j_mm_camera_request_super_buf(int a1, int a2, int a3)
{
  return mm_camera_request_super_buf(a1, a2, a3);
}

//----- (00002E4C) --------------------------------------------------------
int __fastcall j_mm_camera_qbuf(int a1, int a2, int *a3)
{
  return mm_camera_qbuf(a1, a2, a3);
}

//----- (00002E58) --------------------------------------------------------
signed int __fastcall j_mm_camera_stop_channel(int a1, int a2)
{
  return mm_camera_stop_channel(a1, a2);
}

//----- (00002E64) --------------------------------------------------------
signed int __fastcall j_mm_camera_start_channel(int a1, int a2)
{
  return mm_camera_start_channel(a1, a2);
}

//----- (00002E70) --------------------------------------------------------
signed int __fastcall j_mm_camera_get_stream_parms(int a1, int a2, int a3, int a4)
{
  return mm_camera_get_stream_parms(a1, a2, a3, a4);
}

//----- (00002E7C) --------------------------------------------------------
signed int __fastcall j_mm_camera_get_queued_buf_count(int a1, int a2, int a3)
{
  return mm_camera_get_queued_buf_count(a1, a2, a3);
}

//----- (00002E88) --------------------------------------------------------
signed int __fastcall j_mm_camera_set_stream_parms(int a1, int a2, int a3, int a4)
{
  return mm_camera_set_stream_parms(a1, a2, a3, a4);
}

//----- (00002E94) --------------------------------------------------------
signed int __fastcall j_mm_camera_unmap_stream_buf(int a1, int a2, int a3, char a4, int a5, int a6)
{
  return mm_camera_unmap_stream_buf(a1, a2, a3, a4, a5, a6);
}

//----- (00002EA0) --------------------------------------------------------
signed int __fastcall j_mm_camera_map_stream_buf(int a1, int a2, int a3, char a4, int a5, int a6, int a7, int a8)
{
  return mm_camera_map_stream_buf(a1, a2, a3, a4, a5, a6, a7, a8);
}

//----- (00002EAC) --------------------------------------------------------
signed int __fastcall j_mm_camera_config_stream(int a1, int a2, int a3, int a4)
{
  return mm_camera_config_stream(a1, a2, a3, a4);
}

//----- (00002EB8) --------------------------------------------------------
signed int __fastcall j_mm_camera_del_stream(int a1, int a2, int a3)
{
  return mm_camera_del_stream(a1, a2, a3);
}

//----- (00002EC4) --------------------------------------------------------
int __fastcall j_mm_camera_add_stream(int a1, int a2)
{
  return mm_camera_add_stream(a1, a2);
}

//----- (00002ED0) --------------------------------------------------------
signed int __fastcall j_mm_camera_get_bundle_info(int a1, int a2, int a3)
{
  return mm_camera_get_bundle_info(a1, a2, a3);
}

//----- (00002EDC) --------------------------------------------------------
signed int __fastcall j_mm_camera_del_channel(int a1, int a2)
{
  return mm_camera_del_channel(a1, a2);
}

//----- (00002EE8) --------------------------------------------------------
int __fastcall j_mm_camera_add_channel(int a1, int a2, int a3, int a4)
{
  return mm_camera_add_channel(a1, a2, a3, a4);
}

//----- (00002EF4) --------------------------------------------------------
signed int __fastcall j_mm_camera_unprepare_snapshot(int a1, int a2)
{
  return mm_camera_unprepare_snapshot(a1, a2);
}

//----- (00002F00) --------------------------------------------------------
int __fastcall j_mm_camera_prepare_snapshot(int a1, int a2, int a3)
{
  return mm_camera_prepare_snapshot(a1, a2, a3);
}

//----- (00002F0C) --------------------------------------------------------
int __fastcall j_mm_camera_cancel_auto_focus(int a1)
{
  return mm_camera_cancel_auto_focus(a1);
}

//----- (00002F18) --------------------------------------------------------
int __fastcall j_mm_camera_do_auto_focus(int a1, int a2, int a3)
{
  return mm_camera_do_auto_focus(a1, a2, a3);
}

//----- (00002F24) --------------------------------------------------------
int __fastcall j_mm_camera_get_parms(int a1, int a2, int a3)
{
  return mm_camera_get_parms(a1, a2, a3);
}

//----- (00002F30) --------------------------------------------------------
int __fastcall j_mm_camera_set_parms(int a1, int a2, int a3)
{
  return mm_camera_set_parms(a1, a2, a3);
}

//----- (00002F3C) --------------------------------------------------------
int __fastcall j_mm_camera_unmap_buf(int a1, int a2)
{
  return mm_camera_unmap_buf(a1, a2);
}

//----- (00002F48) --------------------------------------------------------
int __fastcall j_mm_camera_map_buf(int a1, int a2, int a3, int a4)
{
  return mm_camera_map_buf(a1, a2, a3, a4);
}

//----- (00002F54) --------------------------------------------------------
int __fastcall j_mm_camera_close(int a1)
{
  return mm_camera_close(a1);
}

//----- (00002F78) --------------------------------------------------------
signed int __fastcall j_mm_camera_register_event_notify(int a1, int a2, int a3)
{
  return mm_camera_register_event_notify(a1, a2, a3);
}

//----- (00002F84) --------------------------------------------------------
int __fastcall j_mm_camera_query_capability(int a1)
{
  return mm_camera_query_capability(a1);
}

//----- (00003020) --------------------------------------------------------
int j_get_sensor_info()
{
  return get_sensor_info();
}

//----- (00003038) --------------------------------------------------------
int __fastcall j_mm_camera_util_generate_handler(int a1)
{
  return mm_camera_util_generate_handler(a1);
}

//----- (00003050) --------------------------------------------------------
int __fastcall j_mm_camera_open(int a1)
{
  return mm_camera_open(a1);
}

//----- (00003068) --------------------------------------------------------
signed int __fastcall j_mm_camera_enqueue_evt(int a1, int a2, int a3, int a4)
{
  return mm_camera_enqueue_evt(a1, a2, a3, a4);
}

//----- (00003074) --------------------------------------------------------
signed int __fastcall j_mm_camera_register_event_notify_internal(int a1, int a2, int a3)
{
  return mm_camera_register_event_notify_internal(a1, a2, a3);
}

//----- (00003080) --------------------------------------------------------
int __fastcall j_mm_camera_util_get_channel_by_handler(int a1, int a2)
{
  return mm_camera_util_get_channel_by_handler(a1, a2);
}

//----- (0000308C) --------------------------------------------------------
int __fastcall j_mm_channel_qbuf(int a1, int *a2)
{
  return mm_channel_qbuf(a1, a2);
}

//----- (00003098) --------------------------------------------------------
signed int __fastcall j_mm_channel_fsm_fn(int a1, int a2, int a3, int *a4)
{
  return mm_channel_fsm_fn(a1, a2, a3, a4);
}

//----- (000030A4) --------------------------------------------------------
int __fastcall j_mm_channel_init(int a1, int a2, int a3, int a4)
{
  return mm_channel_init(a1, a2, a3, a4);
}

//----- (000030B0) --------------------------------------------------------
int __fastcall j_mm_camera_poll_thread_del_poll_fd(_DWORD *a1, int a2, int a3)
{
  return mm_camera_poll_thread_del_poll_fd(a1, a2, a3);
}

//----- (000030BC) --------------------------------------------------------
int __fastcall j_mm_camera_poll_thread_add_poll_fd(_DWORD *a1, int a2, int a3, int a4, int a5)
{
  return mm_camera_poll_thread_add_poll_fd(a1, a2, a3, a4, a5);
}

//----- (000030C8) --------------------------------------------------------
char *__fastcall j_mm_camera_util_get_dev_name(int a1)
{
  return mm_camera_util_get_dev_name(a1);
}

//----- (000030EC) --------------------------------------------------------
signed int __fastcall j_mm_camera_socket_create(int a1, int a2)
{
  return mm_camera_socket_create(a1, a2);
}

//----- (00003104) --------------------------------------------------------
int __fastcall j_mm_camera_cmd_thread_launch(int a1, int a2, int a3)
{
  return mm_camera_cmd_thread_launch(a1, a2, a3);
}

//----- (00003110) --------------------------------------------------------
signed int __fastcall j_mm_camera_poll_thread_launch(int a1, int a2)
{
  return mm_camera_poll_thread_launch(a1, a2);
}

//----- (0000311C) --------------------------------------------------------
int __fastcall j_mm_camera_evt_sub(int a1, int a2)
{
  return mm_camera_evt_sub(a1, a2);
}

//----- (00003128) --------------------------------------------------------
int __fastcall j_mm_camera_socket_close(int result)
{
  return mm_camera_socket_close(result);
}

//----- (00003134) --------------------------------------------------------
int __fastcall j_mm_camera_poll_thread_release(int a1)
{
  return mm_camera_poll_thread_release(a1);
}

//----- (00003140) --------------------------------------------------------
signed int __fastcall j_mm_camera_cmd_thread_release(int a1, int a2, int a3, int a4)
{
  return mm_camera_cmd_thread_release(a1, a2, a3, a4);
}

//----- (00003170) --------------------------------------------------------
ssize_t __fastcall j_mm_camera_socket_sendmsg(int a1, int a2, int a3, int a4)
{
  return mm_camera_socket_sendmsg(a1, a2, a3, a4);
}

//----- (0000317C) --------------------------------------------------------
int __fastcall j_mm_camera_util_wait_for_event(int a1, int a2, _DWORD *a3)
{
  return mm_camera_util_wait_for_event(a1, a2, a3);
}

//----- (00003188) --------------------------------------------------------
int __fastcall j_mm_camera_util_sendmsg(int a1, int a2, int a3, int a4)
{
  return mm_camera_util_sendmsg(a1, a2, a3, a4);
}

//----- (00003194) --------------------------------------------------------
int __fastcall j_mm_camera_util_s_ctrl(int a1, int a2, int *a3)
{
  return mm_camera_util_s_ctrl(a1, a2, a3);
}

//----- (000031A0) --------------------------------------------------------
int __fastcall j_mm_camera_util_g_ctrl(int a1, int a2, int *a3)
{
  return mm_camera_util_g_ctrl(a1, a2, a3);
}

//----- (000031AC) --------------------------------------------------------
int __fastcall j_mm_stream_fsm_fn(int a1, int (*a2)(int), int a3, int a4)
{
  return mm_stream_fsm_fn(a1, a2, a3, a4);
}

//----- (000031B8) --------------------------------------------------------
int __fastcall j_mm_channel_util_get_stream_by_handler(int a1, int a2)
{
  return mm_channel_util_get_stream_by_handler(a1, a2);
}

//----- (000031C4) --------------------------------------------------------
signed int __fastcall j_mm_channel_request_super_buf(int a1, int a2)
{
  return mm_channel_request_super_buf(a1, a2);
}

//----- (000031D0) --------------------------------------------------------
int __fastcall j_mm_stream_map_buf(int a1, int a2, int a3, int a4, int a5, int a6)
{
  return mm_stream_map_buf(a1, a2, a3, a4, a5, a6);
}

//----- (000031DC) --------------------------------------------------------
int __fastcall j_mm_stream_unmap_buf(int a1, int a2, int a3, int a4)
{
  return mm_stream_unmap_buf(a1, a2, a3, a4);
}

//----- (000031E8) --------------------------------------------------------
int __fastcall j_mm_channel_superbuf_queue_init(int a1)
{
  return mm_channel_superbuf_queue_init(a1);
}

//----- (000031F4) --------------------------------------------------------
int __fastcall j_mm_channel_add_stream(int a1)
{
  return mm_channel_add_stream(a1);
}

//----- (00003200) --------------------------------------------------------
int __fastcall j_mm_channel_start(int a1)
{
  return mm_channel_start(a1);
}

//----- (0000320C) --------------------------------------------------------
int __fastcall j_mm_channel_release(int a1)
{
  return mm_channel_release(a1);
}

//----- (00003218) --------------------------------------------------------
int __fastcall j_mm_channel_get_queued_buf_count(int a1, int a2)
{
  return mm_channel_get_queued_buf_count(a1, a2);
}

//----- (00003224) --------------------------------------------------------
int __fastcall j_mm_channel_del_stream(int a1, int a2)
{
  return mm_channel_del_stream(a1, a2);
}

//----- (00003230) --------------------------------------------------------
int __fastcall j_mm_channel_config_stream(int a1, int a2, int a3)
{
  return mm_channel_config_stream(a1, a2, a3);
}

//----- (0000323C) --------------------------------------------------------
signed int __fastcall j_mm_channel_get_bundle_info(int *a1, _BYTE *a2, int a3)
{
  return mm_channel_get_bundle_info(a1, a2, a3);
}

//----- (00003248) --------------------------------------------------------
int __fastcall j_mm_channel_set_stream_parm(int a1, int *a2)
{
  return mm_channel_set_stream_parm(a1, a2);
}

//----- (00003254) --------------------------------------------------------
int __fastcall j_mm_channel_get_stream_parm(int a1, int *a2)
{
  return mm_channel_get_stream_parm(a1, a2);
}

//----- (00003260) --------------------------------------------------------
int __fastcall j_mm_channel_do_stream_action(int a1, int *a2)
{
  return mm_channel_do_stream_action(a1, a2);
}

//----- (0000326C) --------------------------------------------------------
int __fastcall j_mm_channel_map_stream_buf(int a1, int *a2)
{
  return mm_channel_map_stream_buf(a1, a2);
}

//----- (00003278) --------------------------------------------------------
int __fastcall j_mm_channel_unmap_stream_buf(int a1, int *a2)
{
  return mm_channel_unmap_stream_buf(a1, a2);
}

//----- (00003284) --------------------------------------------------------
int __fastcall j_mm_channel_superbuf_queue_deinit(int a1)
{
  return mm_channel_superbuf_queue_deinit(a1);
}

//----- (00003290) --------------------------------------------------------
int __fastcall j_mm_channel_stop(int a1)
{
  return mm_channel_stop(a1);
}

//----- (0000329C) --------------------------------------------------------
signed int __fastcall j_mm_channel_cancel_super_buf_request(int a1)
{
  return mm_channel_cancel_super_buf_request(a1);
}

//----- (000032A8) --------------------------------------------------------
signed int __fastcall j_mm_channel_flush_super_buf_queue(int a1, int a2)
{
  return mm_channel_flush_super_buf_queue(a1, a2);
}

//----- (000032B4) --------------------------------------------------------
signed int __fastcall j_mm_channel_config_notify_mode(int a1, int a2)
{
  return mm_channel_config_notify_mode(a1, a2);
}

//----- (000032C0) --------------------------------------------------------
signed int __fastcall j_mm_channel_unprepare_snapshot(int a1, int a2, int a3, int a4)
{
  return mm_channel_unprepare_snapshot(a1, a2, a3, a4);
}

//----- (000032CC) --------------------------------------------------------
signed int __fastcall j_mm_channel_fsm_fn_notused(int a1, int a2, int a3, int a4)
{
  return mm_channel_fsm_fn_notused(a1, a2, a3, a4);
}

//----- (000032D8) --------------------------------------------------------
signed int __fastcall j_mm_channel_fsm_fn_stopped(int a1, int a2, int a3, int *a4)
{
  return mm_channel_fsm_fn_stopped(a1, a2, a3, a4);
}

//----- (000032E4) --------------------------------------------------------
int __fastcall j_mm_channel_fsm_fn_active(int a1, int a2, int a3, int a4)
{
  return mm_channel_fsm_fn_active(a1, a2, a3, a4);
}

//----- (000032F0) --------------------------------------------------------
int __fastcall j_mm_channel_fsm_fn_paused(int a1, int a2, int a3, int a4)
{
  return mm_channel_fsm_fn_paused(a1, a2, a3, a4);
}

//----- (000032FC) --------------------------------------------------------
int __fastcall j_mm_channel_superbuf_dequeue_internal(int a1, int a2)
{
  return mm_channel_superbuf_dequeue_internal(a1, a2);
}

//----- (00003308) --------------------------------------------------------
int __fastcall j_mm_channel_superbuf_flush(int a1, int a2)
{
  return mm_channel_superbuf_flush(a1, a2);
}

//----- (00003314) --------------------------------------------------------
int __fastcall j_mm_channel_superbuf_flush_matched(int a1, int a2)
{
  return mm_channel_superbuf_flush_matched(a1, a2);
}

//----- (00003320) --------------------------------------------------------
signed int __fastcall j_mm_channel_handle_metadata(int a1, int a2, int *a3)
{
  return mm_channel_handle_metadata(a1, a2, a3);
}

//----- (0000332C) --------------------------------------------------------
int __fastcall j_mm_channel_util_seq_comp_w_rollover(unsigned int a1, unsigned int a2)
{
  return mm_channel_util_seq_comp_w_rollover(a1, a2);
}

//----- (00003338) --------------------------------------------------------
signed int __fastcall j_mm_channel_superbuf_comp_and_enqueue(int a1, int a2, int a3)
{
  return mm_channel_superbuf_comp_and_enqueue(a1, a2, a3);
}

//----- (00003344) --------------------------------------------------------
int __fastcall j_mm_channel_superbuf_skip(int a1, int a2)
{
  return mm_channel_superbuf_skip(a1, a2);
}

//----- (00003350) --------------------------------------------------------
int __fastcall j_mm_camera_start_zsl_snapshot(int a1, int a2, int a3)
{
  return mm_camera_start_zsl_snapshot(a1, a2, a3);
}

//----- (0000335C) --------------------------------------------------------
int __fastcall j_mm_camera_stop_zsl_snapshot(int a1, int a2, int a3)
{
  return mm_camera_stop_zsl_snapshot(a1, a2, a3);
}

//----- (00003368) --------------------------------------------------------
int __fastcall j_mm_channel_superbuf_bufdone_overflow(int a1, int a2)
{
  return mm_channel_superbuf_bufdone_overflow(a1, a2);
}

//----- (00003374) --------------------------------------------------------
int __fastcall j_mm_channel_superbuf_dequeue(int a1)
{
  return mm_channel_superbuf_dequeue(a1);
}

//----- (00003380) --------------------------------------------------------
int __fastcall j_mm_stream_read_msm_frame(int a1, int a2, int a3)
{
  return mm_stream_read_msm_frame(a1, a2, a3);
}

//----- (0000338C) --------------------------------------------------------
int __fastcall j_mm_stream_handle_rcvd_buf(int result, int a2, int a3)
{
  return mm_stream_handle_rcvd_buf(result, a2, a3);
}

//----- (00003398) --------------------------------------------------------
int __fastcall j_mm_stream_set_ext_mode(int a1)
{
  return mm_stream_set_ext_mode(a1);
}

//----- (000033B0) --------------------------------------------------------
int __fastcall j_mm_stream_deinit_bufs(int a1, int (*a2)(int), int (*a3)(), int a4)
{
  return mm_stream_deinit_bufs(a1, a2, a3, a4);
}

//----- (000033BC) --------------------------------------------------------
signed int __fastcall j_mm_stream_request_buf(int a1)
{
  return mm_stream_request_buf(a1);
}

//----- (000033C8) --------------------------------------------------------
int __fastcall j_mm_stream_qbuf(int a1, int a2)
{
  return mm_stream_qbuf(a1, a2);
}

//----- (000033D4) --------------------------------------------------------
signed int __fastcall j_mm_stream_reg_buf(int a1, int a2)
{
  return mm_stream_reg_buf(a1, a2);
}

//----- (000033E0) --------------------------------------------------------
int __fastcall j_mm_stream_set_parm(int a1, int a2, int a3)
{
  return mm_stream_set_parm(a1, a2, a3);
}

//----- (000033EC) --------------------------------------------------------
int __fastcall j_mm_stream_get_parm(int a1, int a2, int a3)
{
  return mm_stream_get_parm(a1, a2, a3);
}

//----- (000033F8) --------------------------------------------------------
int __fastcall j_mm_stream_unreg_buf(int a1)
{
  return mm_stream_unreg_buf(a1);
}

//----- (00003404) --------------------------------------------------------
int __fastcall j_mm_stream_streamon(int a1)
{
  return mm_stream_streamon(a1);
}

//----- (00003410) --------------------------------------------------------
int j_mm_camera_util_chip_is_a_family()
{
  return mm_camera_util_chip_is_a_family();
}

//----- (00003428) --------------------------------------------------------
signed int __fastcall j_mm_stream_calc_offset_preview(int a1, int a2, int a3)
{
  return mm_stream_calc_offset_preview(a1, a2, a3);
}

//----- (00003434) --------------------------------------------------------
signed int __fastcall j_mm_stream_calc_offset_snapshot(int a1, int a2, int a3, int a4)
{
  return mm_stream_calc_offset_snapshot(a1, a2, a3, a4);
}

//----- (00003440) --------------------------------------------------------
int __fastcall j_mm_stream_calc_offset_video(unsigned int *a1, int a2)
{
  return mm_stream_calc_offset_video(a1, a2);
}

//----- (0000344C) --------------------------------------------------------
signed int __fastcall j_mm_stream_calc_offset_raw(int a1, int a2, int a3, int a4)
{
  return mm_stream_calc_offset_raw(a1, a2, a3, a4);
}

//----- (00003458) --------------------------------------------------------
int __fastcall j_mm_stream_calc_offset_metadata(int a1, int a2, int a3)
{
  return mm_stream_calc_offset_metadata(a1, a2, a3);
}

//----- (00003464) --------------------------------------------------------
signed int __fastcall j_mm_stream_calc_offset_postproc(int a1, int a2, int a3, int a4)
{
  return mm_stream_calc_offset_postproc(a1, a2, a3, a4);
}

//----- (00003470) --------------------------------------------------------
signed int __fastcall j_mm_stream_calc_offset(int a1)
{
  return mm_stream_calc_offset(a1);
}

//----- (0000347C) --------------------------------------------------------
signed int __fastcall j_mm_stream_get_v4l2_fmt(unsigned int a1, int a2, int a3)
{
  return mm_stream_get_v4l2_fmt(a1, a2, a3);
}

//----- (00003488) --------------------------------------------------------
signed int __fastcall j_mm_stream_sync_info(int a1, int a2)
{
  return mm_stream_sync_info(a1, a2);
}

//----- (00003494) --------------------------------------------------------
int __fastcall j_mm_stream_set_fmt(int a1)
{
  return mm_stream_set_fmt(a1);
}

//----- (000034A0) --------------------------------------------------------
signed int __fastcall j_mm_stream_config(int a1, int a2)
{
  return mm_stream_config(a1, a2);
}

//----- (000034AC) --------------------------------------------------------
int __fastcall j_mm_stream_release(int a1)
{
  return mm_stream_release(a1);
}

//----- (000034B8) --------------------------------------------------------
signed int __fastcall j_mm_stream_init_bufs(int a1, int a2, int (*a3)())
{
  return mm_stream_init_bufs(a1, a2, a3);
}

//----- (000034C4) --------------------------------------------------------
signed int __fastcall j_mm_stream_buf_done(int a1, int a2, int a3)
{
  return mm_stream_buf_done(a1, a2, a3);
}

//----- (000034D0) --------------------------------------------------------
int __fastcall j_mm_stream_streamoff(int *a1)
{
  return mm_stream_streamoff(a1);
}

//----- (000034DC) --------------------------------------------------------
int __fastcall j_mm_stream_get_queued_buf_count(int a1)
{
  return mm_stream_get_queued_buf_count(a1);
}

//----- (000034E8) --------------------------------------------------------
int __fastcall j_mm_stream_set_parm_0(int a1, int a2, int a3)
{
  return mm_stream_set_parm(a1, a2, a3);
}

//----- (000034F4) --------------------------------------------------------
int __fastcall j_mm_stream_fsm_inited(int a1, int a2, int a3, int a4)
{
  return mm_stream_fsm_inited(a1, a2, a3, a4);
}

//----- (00003500) --------------------------------------------------------
signed int __fastcall j_mm_stream_fsm_acquired(int a1, int a2, int a3, int a4)
{
  return mm_stream_fsm_acquired(a1, a2, a3, a4);
}

//----- (0000350C) --------------------------------------------------------
signed int __fastcall j_mm_stream_fsm_cfg(int a1, int a2, int a3, int a4)
{
  return mm_stream_fsm_cfg(a1, a2, a3, a4);
}

//----- (00003518) --------------------------------------------------------
int __fastcall j_mm_stream_fsm_buffed(int a1, int (*a2)(int), int a3, int a4)
{
  return mm_stream_fsm_buffed(a1, a2, a3, a4);
}

//----- (00003524) --------------------------------------------------------
int __fastcall j_mm_stream_fsm_reg(int a1, int a2, int a3, int a4)
{
  return mm_stream_fsm_reg(a1, a2, a3, a4);
}

//----- (00003530) --------------------------------------------------------
signed int __fastcall j_mm_stream_fsm_active(int a1, int a2, int a3, int a4)
{
  return mm_stream_fsm_active(a1, a2, a3, a4);
}

//----- (000035A8) --------------------------------------------------------
signed int __fastcall j_mm_camera_cmd_thread_stop(int a1, int a2, int a3)
{
  return mm_camera_cmd_thread_stop(a1, a2, a3);
}

//----- (000035B4) --------------------------------------------------------
int __fastcall j_mm_camera_cmd_thread_destroy(int a1)
{
  return mm_camera_cmd_thread_destroy(a1);
}

//----- (00003644) --------------------------------------------------------
int j___aeabi_ldiv0()
{
  return _aeabi_ldiv0();
}

//----- (0000365C) --------------------------------------------------------
int sub_365C()
{
  return _cxa_finalize(&off_F000);
}
// 2DBC: using guessed type int __fastcall _cxa_finalize(_DWORD);
// F000: using guessed type void *off_F000;

//----- (0000367C) --------------------------------------------------------
int (*__fastcall sub_367C(int (*result)(void)))(void)
{
  if ( result )
    result = (int (*)(void))result();
  return result;
}

//----- (0000373C) --------------------------------------------------------
int __fastcall mm_camera_util_generate_handler(int a1)
{
  int v1; // r4@1
  int v2; // r4@4

  v1 = a1;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C8);
  if ( word_F1C4 == -1 )
    word_F1C4 += 2;
  else
    ++word_F1C4;
  v2 = v1 | ((unsigned __int16)word_F1C4 << 8);
  pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C8);
  return v2;
}
// F1C4: using guessed type __int16 word_F1C4;

//----- (00003788) --------------------------------------------------------
int __fastcall mm_camera_util_get_index_by_handler(int result)
{
  return (unsigned __int8)result;
}

//----- (0000378C) --------------------------------------------------------
char *__fastcall mm_camera_util_get_dev_name(int a1)
{
  unsigned int v1; // r0@1
  char *result; // r0@2

  v1 = j_mm_camera_util_get_index_by_handler(a1);
  if ( v1 > 4 )
    result = 0;
  else
    result = &byte_F07C[32 * v1 + 1];
  return result;
}

//----- (000037AC) --------------------------------------------------------
int __fastcall mm_camera_util_get_camera_by_handler(int a1)
{
  int v1; // r4@1
  unsigned int v2; // r0@1
  int result; // r0@2

  v1 = a1;
  v2 = j_mm_camera_util_get_index_by_handler(a1);
  if ( v2 > 4 )
  {
    result = 0;
  }
  else
  {
    result = *(_DWORD *)&byte_F07C[4 * v2 + 164];
    if ( result )
    {
      if ( v1 != *(_DWORD *)(result + 4) )
        result = 0;
    }
  }
  return result;
}

//----- (000037D8) --------------------------------------------------------
signed int __fastcall sub_37D8(int a1, int a2, int a3)
{
  int v3; // r5@1
  int v4; // r7@1
  int v5; // r6@1
  int v6; // r0@1
  int v7; // r5@1
  signed int result; // r0@2

  v3 = a1;
  v4 = a2;
  v5 = a3;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v6 = j_mm_camera_util_get_camera_by_handler(v3);
  v7 = v6;
  if ( v6 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v6 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_channel_ae_bracketting(v7, v4, v5);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (00003820) --------------------------------------------------------
signed int __fastcall sub_3820(int a1, int a2, int a3)
{
  int v3; // r5@1
  int v4; // r7@1
  int v5; // r6@1
  int v6; // r0@1
  int v7; // r5@1
  signed int result; // r0@2

  v3 = a1;
  v4 = a2;
  v5 = a3;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v6 = j_mm_camera_util_get_camera_by_handler(v3);
  v7 = v6;
  if ( v6 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v6 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_config_channel_notify(v7, v4, v5);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (00003868) --------------------------------------------------------
signed int __fastcall sub_3868(int a1, int a2, int a3)
{
  int v3; // r5@1
  int v4; // r7@1
  int v5; // r6@1
  int v6; // r0@1
  int v7; // r5@1
  signed int result; // r0@2

  v3 = a1;
  v4 = a2;
  v5 = a3;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v6 = j_mm_camera_util_get_camera_by_handler(v3);
  v7 = v6;
  if ( v6 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v6 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_flush_super_buf_queue(v7, v4, v5);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (000038B0) --------------------------------------------------------
signed int __fastcall sub_38B0(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r6@1
  int v4; // r0@1
  int v5; // r5@1
  signed int result; // r0@2

  v2 = a1;
  v3 = a2;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v4 = j_mm_camera_util_get_camera_by_handler(v2);
  v5 = v4;
  if ( v4 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v4 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_cancel_super_buf_request(v5, v3);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (000038F4) --------------------------------------------------------
signed int __fastcall sub_38F4(int a1, int a2, int a3)
{
  int v3; // r5@1
  int v4; // r7@1
  int v5; // r6@1
  int v6; // r0@1
  int v7; // r5@1
  signed int result; // r0@2

  v3 = a1;
  v4 = a2;
  v5 = a3;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v6 = j_mm_camera_util_get_camera_by_handler(v3);
  v7 = v6;
  if ( v6 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v6 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_request_super_buf(v7, v4, v5);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (0000393C) --------------------------------------------------------
int __fastcall sub_393C(int a1, int a2, int *a3)
{
  int v3; // r5@1
  int v4; // r7@1
  int *v5; // r6@1
  int v6; // r0@1
  int v7; // r5@1
  int result; // r0@2

  v3 = a1;
  v4 = a2;
  v5 = a3;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v6 = j_mm_camera_util_get_camera_by_handler(v3);
  v7 = v6;
  if ( v6 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v6 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_qbuf(v7, v4, v5);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (00003984) --------------------------------------------------------
signed int __fastcall sub_3984(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r6@1
  int v4; // r0@1
  int v5; // r5@1
  signed int result; // r0@2

  v2 = a1;
  v3 = a2;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v4 = j_mm_camera_util_get_camera_by_handler(v2);
  v5 = v4;
  if ( v4 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v4 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_stop_channel(v5, v3);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (000039C8) --------------------------------------------------------
signed int __fastcall sub_39C8(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r6@1
  int v4; // r0@1
  int v5; // r5@1
  signed int result; // r0@2

  v2 = a1;
  v3 = a2;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v4 = j_mm_camera_util_get_camera_by_handler(v2);
  v5 = v4;
  if ( v4 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v4 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_start_channel(v5, v3);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (00003A0C) --------------------------------------------------------
signed int __fastcall sub_3A0C(int a1, int a2, int a3, int a4)
{
  int v4; // r5@1
  int v5; // r8@1
  int v6; // r7@1
  int v7; // r6@1
  int v8; // r0@1
  int v9; // r5@1
  signed int result; // r0@2

  v4 = a1;
  v5 = a2;
  v6 = a3;
  v7 = a4;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v8 = j_mm_camera_util_get_camera_by_handler(v4);
  v9 = v8;
  if ( v8 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v8 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_get_stream_parms(v9, v5, v6, v7);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (00003A5C) --------------------------------------------------------
signed int __fastcall sub_3A5C(int a1, int a2, int a3)
{
  int v3; // r5@1
  int v4; // r7@1
  int v5; // r6@1
  int v6; // r0@1
  int v7; // r5@1
  signed int result; // r0@2

  v3 = a1;
  v4 = a2;
  v5 = a3;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v6 = j_mm_camera_util_get_camera_by_handler(v3);
  v7 = v6;
  if ( v6 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v6 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_get_queued_buf_count(v7, v4, v5);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (00003AA4) --------------------------------------------------------
signed int __fastcall sub_3AA4(int a1, int a2, int a3, int a4)
{
  int v4; // r5@1
  int v5; // r8@1
  int v6; // r7@1
  int v7; // r6@1
  int v8; // r0@1
  int v9; // r5@1
  signed int result; // r0@2

  v4 = a1;
  v5 = a2;
  v6 = a3;
  v7 = a4;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v8 = j_mm_camera_util_get_camera_by_handler(v4);
  v9 = v8;
  if ( v8 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v8 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_set_stream_parms(v9, v5, v6, v7);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (00003AF4) --------------------------------------------------------
signed int __fastcall sub_3AF4(int a1, int a2, int a3, char a4, int a5, int a6)
{
  int v6; // r5@1
  int v7; // r8@1
  int v8; // r7@1
  char v9; // r6@1
  int v10; // r0@1
  int v11; // r5@1
  signed int result; // r0@2

  v6 = a1;
  v7 = a2;
  v8 = a3;
  v9 = a4;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v10 = j_mm_camera_util_get_camera_by_handler(v6);
  v11 = v10;
  if ( v10 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v10 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_unmap_stream_buf(v11, v7, v8, v9, a5, a6);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (00003B54) --------------------------------------------------------
signed int __fastcall sub_3B54(int a1, int a2, int a3, char a4, int a5, int a6, int a7, int a8)
{
  char v8; // r5@1
  int v9; // r8@1
  int v10; // r7@1
  int v11; // r6@1
  int v12; // r0@1
  int v13; // r8@1
  signed int result; // r0@2

  v8 = a4;
  v9 = a1;
  v10 = a2;
  v11 = a3;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v12 = j_mm_camera_util_get_camera_by_handler(v9);
  v13 = v12;
  if ( v12 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v12 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_map_stream_buf(v13, v10, v11, v8, a5, a6, a7, a8);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (00003BC8) --------------------------------------------------------
signed int __fastcall sub_3BC8(int a1, int a2, int a3, int a4)
{
  int v4; // r5@1
  int v5; // r8@1
  int v6; // r7@1
  int v7; // r6@1
  int v8; // r0@1
  int v9; // r5@1
  signed int result; // r0@2

  v4 = a1;
  v5 = a2;
  v6 = a3;
  v7 = a4;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v8 = j_mm_camera_util_get_camera_by_handler(v4);
  v9 = v8;
  if ( v8 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v8 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_config_stream(v9, v5, v6, v7);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (00003C18) --------------------------------------------------------
signed int __fastcall sub_3C18(int a1, int a2, int a3)
{
  int v3; // r5@1
  int v4; // r7@1
  int v5; // r6@1
  int v6; // r0@1
  int v7; // r5@1
  signed int result; // r0@2

  v3 = a1;
  v4 = a2;
  v5 = a3;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v6 = j_mm_camera_util_get_camera_by_handler(v3);
  v7 = v6;
  if ( v6 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v6 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_del_stream(v7, v4, v5);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (00003C60) --------------------------------------------------------
int __fastcall sub_3C60(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r6@1
  int v4; // r0@1
  int v5; // r4@1
  int result; // r0@2

  v2 = a1;
  v3 = a2;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v4 = j_mm_camera_util_get_camera_by_handler(v2);
  v5 = v4;
  if ( v4 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v4 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_add_stream(v5, v3);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = v5;
  }
  return result;
}

//----- (00003CA0) --------------------------------------------------------
signed int __fastcall sub_3CA0(int a1, int a2, int a3)
{
  int v3; // r5@1
  int v4; // r7@1
  int v5; // r6@1
  int v6; // r0@1
  int v7; // r5@1
  signed int result; // r0@2

  v3 = a1;
  v4 = a2;
  v5 = a3;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v6 = j_mm_camera_util_get_camera_by_handler(v3);
  v7 = v6;
  if ( v6 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v6 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_get_bundle_info(v7, v4, v5);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (00003CE8) --------------------------------------------------------
signed int __fastcall sub_3CE8(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r6@1
  int v4; // r0@1
  int v5; // r5@1
  signed int result; // r0@2

  v2 = a1;
  v3 = a2;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v4 = j_mm_camera_util_get_camera_by_handler(v2);
  v5 = v4;
  if ( v4 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v4 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_del_channel(v5, v3);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (00003D2C) --------------------------------------------------------
int __fastcall sub_3D2C(int a1, int a2, int a3, int a4)
{
  int v4; // r4@1
  int v5; // r8@1
  int v6; // r7@1
  int v7; // r6@1
  int v8; // r0@1
  int v9; // r4@1
  int result; // r0@2

  v4 = a1;
  v5 = a2;
  v6 = a3;
  v7 = a4;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v8 = j_mm_camera_util_get_camera_by_handler(v4);
  v9 = v8;
  if ( v8 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v8 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_add_channel(v9, v5, v6, v7);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = v9;
  }
  return result;
}

//----- (00003D78) --------------------------------------------------------
signed int __fastcall sub_3D78(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r6@1
  int v4; // r0@1
  int v5; // r5@1
  signed int result; // r0@2

  v2 = a1;
  v3 = a2;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v4 = j_mm_camera_util_get_camera_by_handler(v2);
  v5 = v4;
  if ( v4 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v4 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_unprepare_snapshot(v5, v3);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (00003DBC) --------------------------------------------------------
int __fastcall sub_3DBC(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r6@1
  int v4; // r0@1
  int v5; // r5@1
  int v6; // r2@2
  int result; // r0@2

  v2 = a1;
  v3 = a2;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v4 = j_mm_camera_util_get_camera_by_handler(v2);
  v5 = v4;
  if ( v4 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v4 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_prepare_snapshot(v5, v3, v6);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (00003E00) --------------------------------------------------------
int __fastcall sub_3E00(int a1)
{
  int v1; // r5@1
  int v2; // r0@1
  int v3; // r5@1
  int result; // r0@2

  v1 = a1;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v2 = j_mm_camera_util_get_camera_by_handler(v1);
  v3 = v2;
  if ( v2 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v2 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_cancel_auto_focus(v3);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (00003E40) --------------------------------------------------------
int __fastcall sub_3E40(int a1)
{
  int v1; // r5@1
  int v2; // r0@1
  int v3; // r5@1
  int v4; // r1@2
  int v5; // r2@2
  int result; // r0@2

  v1 = a1;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v2 = j_mm_camera_util_get_camera_by_handler(v1);
  v3 = v2;
  if ( v2 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v2 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_do_auto_focus(v3, v4, v5);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (00003E80) --------------------------------------------------------
int __fastcall sub_3E80(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r6@1
  int v4; // r0@1
  int v5; // r5@1
  int v6; // r2@2
  int result; // r0@2

  v2 = a1;
  v3 = a2;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v4 = j_mm_camera_util_get_camera_by_handler(v2);
  v5 = v4;
  if ( v4 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v4 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_get_parms(v5, v3, v6);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (00003EC4) --------------------------------------------------------
int __fastcall sub_3EC4(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r6@1
  int v4; // r0@1
  int v5; // r5@1
  int v6; // r2@2
  int result; // r0@2

  v2 = a1;
  v3 = a2;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v4 = j_mm_camera_util_get_camera_by_handler(v2);
  v5 = v4;
  if ( v4 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v4 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_set_parms(v5, v3, v6);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (00003F08) --------------------------------------------------------
int __fastcall sub_3F08(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r6@1
  int v4; // r0@1
  int v5; // r5@1
  int result; // r0@2

  v2 = a1;
  v3 = a2;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v4 = j_mm_camera_util_get_camera_by_handler(v2);
  v5 = v4;
  if ( v4 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v4 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_unmap_buf(v5, v3);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (00003F4C) --------------------------------------------------------
int __fastcall sub_3F4C(int a1, int a2, int a3, int a4)
{
  int v4; // r5@1
  int v5; // r8@1
  int v6; // r7@1
  int v7; // r6@1
  int v8; // r0@1
  int v9; // r5@1
  int result; // r0@2

  v4 = a1;
  v5 = a2;
  v6 = a3;
  v7 = a4;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v8 = j_mm_camera_util_get_camera_by_handler(v4);
  v9 = v8;
  if ( v8 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v8 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_map_buf(v9, v5, v6, v7);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (00003F9C) --------------------------------------------------------
int __fastcall sub_3F9C(int a1)
{
  int v1; // r5@1
  int v2; // r0@1
  int v3; // r4@1
  int v4; // r3@2
  int v5; // r5@3

  v1 = a1;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v2 = j_mm_camera_util_get_camera_by_handler(v1);
  v3 = v2;
  if ( v2 )
  {
    v4 = *(_DWORD *)(v2 + 8);
    *(_DWORD *)(v2 + 8) = v4 - 1;
    if ( v4 - 1 <= 0 )
    {
      *(_DWORD *)&byte_F07C[4 * ((unsigned __int8)v1 + 40) + 4] = 0;
      pthread_mutex_lock((pthread_mutex_t *)(v2 + 20));
      pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
      v5 = j_mm_camera_close(v3);
      pthread_mutex_destroy((pthread_mutex_t *)(v3 + 20));
      free((void *)v3);
    }
    else
    {
      v5 = 0;
      pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    }
  }
  else
  {
    v5 = -1;
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
  }
  return v5;
}

//----- (00004014) --------------------------------------------------------
signed int __fastcall sub_4014(int a1, int a2, int a3)
{
  int v3; // r5@1
  int v4; // r7@1
  int v5; // r6@1
  int v6; // r0@1
  int v7; // r5@1
  signed int result; // r0@2

  v3 = a1;
  v4 = a2;
  v5 = a3;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v6 = j_mm_camera_util_get_camera_by_handler(v3);
  v7 = v6;
  if ( v6 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v6 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_register_event_notify(v7, v4, v5);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (0000405C) --------------------------------------------------------
int __fastcall sub_405C(int a1)
{
  int v1; // r5@1
  int v2; // r0@1
  int v3; // r5@1
  int result; // r0@2

  v1 = a1;
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v2 = j_mm_camera_util_get_camera_by_handler(v1);
  v3 = v2;
  if ( v2 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v2 + 20));
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = j_j_j_mm_camera_query_capability(v3);
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    result = -1;
  }
  return result;
}

//----- (0000409C) --------------------------------------------------------
int get_sensor_info()
{
  int v0; // r4@1
  int v1; // r7@1
  int v2; // r6@2
  int v3; // r0@3
  int *v4; // r0@4
  char *v5; // r0@4
  signed int i; // r8@6
  unsigned int v7; // r5@12
  int v8; // ST1C_4@12
  char *v9; // r2@12
  int result; // r0@13
  char s; // [sp+24h] [bp-24Ch]@2
  char v12; // [sp+44h] [bp-22Ch]@3
  char s1; // [sp+54h] [bp-21Ch]@5
  char v14; // [sp+144h] [bp-12Ch]@7
  int v15; // [sp+168h] [bp-108h]@9
  unsigned int v16; // [sp+170h] [bp-100h]@12
  int v17; // [sp+174h] [bp-FCh]@11
  int v18; // [sp+244h] [bp-2Ch]@1

  v0 = 0;
  v1 = 0;
  v18 = _stack_chk_guard;
  while ( 1 )
  {
    snprintf(&s, 0x20u, "/dev/media%d", v1);
    v2 = open(&s, 2050);
    if ( v2 < 0 )
      break;
    ++v1;
    memset(&v12, 0, 0x100u);
    v3 = ioctl(v2, 0xC1007C00, &v12);
    if ( v3 < 0 )
    {
      v4 = (int *)_errno(v3);
      v5 = strerror(*v4);
      _android_log_print(6, "mm-camera-intf", "Error: ioctl media_dev failed: %s\n", v5);
      close(v2);
      break;
    }
    if ( !strncmp(&s1, "msm_config", 0x20u) )
    {
      for ( i = 1; ; ++i )
      {
        memset(&v14, 0, 0x100u);
        *(_DWORD *)&v14 = i;
        if ( ioctl(v2, 0xC1007C01, &v14) < 0 )
          break;
        if ( v15 == 0x20000 && v17 == 6 )
        {
          v7 = v16 >> 16;
          v8 = 90 * BYTE1(v16);
          _android_log_print(
            3,
            "mm-camera-intf",
            "index = %d flag = %x mount_angle = %d facing = %d\n",
            v0,
            v16 >> 8,
            90 * BYTE1(v16),
            v16 >> 16);
          v9 = &byte_F07C[28 * v0];
          v0 = (unsigned __int8)(v0 + 1);
          *((_DWORD *)v9 + 46) = v7;
          *((_DWORD *)v9 + 47) = v8;
        }
      }
    }
    close(v2);
  }
  result = v18;
  if ( v18 != _stack_chk_guard )
    _stack_chk_fail(v18);
  return result;
}
// 2FC0: using guessed type int __fastcall _errno(_DWORD);
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 2FFC: using guessed type int __fastcall _stack_chk_fail(_DWORD);

//----- (000041FC) --------------------------------------------------------
int get_num_of_cameras()
{
  int v0; // r8@1
  int v1; // r4@2
  int v2; // r0@3
  int *v3; // r0@4
  char *v4; // r0@4
  signed int i; // r7@6
  int v6; // r0@10
  int v7; // r4@13
  int v8; // r8@13
  int v9; // r6@14
  int v10; // r0@15
  int *v11; // r0@16
  char *v12; // r0@16
  signed int j; // r5@18
  char *v14; // r5@22
  int result; // r0@26
  _DWORD *v16; // [sp+0h] [bp-2D8h]@1
  char v17; // [sp+Ch] [bp-2CCh]@2
  char s; // [sp+2Ch] [bp-2ACh]@1
  char v19; // [sp+ACh] [bp-22Ch]@3
  char s1; // [sp+BCh] [bp-21Ch]@5
  char v21; // [sp+1ACh] [bp-12Ch]@7
  char src; // [sp+1B0h] [bp-128h]@10
  int v23; // [sp+1D0h] [bp-108h]@8
  int v24; // [sp+1DCh] [bp-FCh]@9
  int v25; // [sp+2ACh] [bp-2Ch]@1

  v0 = 0;
  v25 = _stack_chk_guard;
  memset(&s, 0, 0x80u);
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v16 = &_stack_chk_guard;
  while ( 1 )
  {
    snprintf(&v17, 0x20u, "/dev/media%d", v0, v16);
    v1 = open(&v17, 2050);
    if ( v1 <= 0 )
      break;
    ++v0;
    memset(&v19, 0, 0x100u);
    v2 = ioctl(v1, 0xC1007C00, &v19);
    if ( v2 < 0 )
    {
      v3 = (int *)_errno(v2);
      v4 = strerror(*v3);
      _android_log_print(6, "mm-camera-intf", "Error: ioctl media_dev failed: %s\n", v4);
      close(v1);
      break;
    }
    if ( !strncmp(&s1, "msm_cam_dummy", 0x20u) )
    {
      for ( i = 1; ; ++i )
      {
        memset(&v21, 0, 0x100u);
        *(_DWORD *)&v21 = i;
        if ( ioctl(v1, 0xC1007C01, &v21) < 0 )
          break;
        if ( v23 == 65537 && v24 == 2 )
        {
          strncpy(&s, "/dev/", 0x20u);
          _strncat_chk(&s, &src, 32, 128);
          v6 = open(&s, 2);
          close(v6);
          break;
        }
      }
    }
    close(v1);
  }
  v7 = 0;
  v8 = 0;
  while ( 1 )
  {
    snprintf(&v17, 0x20u, "/dev/media%d", v8);
    v9 = open(&v17, 2050);
    if ( v9 <= 0 )
      break;
    ++v8;
    memset(&v19, 0, 0x100u);
    v10 = ioctl(v9, 0xC1007C00, &v19);
    if ( v10 < 0 )
    {
      v11 = (int *)_errno(v10);
      LOBYTE(v7) = 0;
      v12 = strerror(*v11);
      _android_log_print(6, "mm-camera-intf", "Error: ioctl media_dev failed: %s\n", v12);
      close(v9);
      break;
    }
    if ( !strncmp(&s1, "msm_camera", 0x20u) )
    {
      for ( j = 1; ; ++j )
      {
        memset(&v21, 0, 0x100u);
        *(_DWORD *)&v21 = j;
        if ( ioctl(v9, 0xC1007C01, &v21) < 0 )
          break;
        if ( v23 == 65537 && v24 == 2 )
        {
          v14 = &byte_F07C[32 * v7];
          strncpy(v14 + 1, &src, 0x20u);
          v14[32] = 0;
          break;
        }
      }
      v7 = (unsigned __int8)(v7 + 1);
    }
    close(v9);
  }
  byte_F07C[0] = v7;
  j_get_sensor_info();
  pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
  result = (unsigned __int8)byte_F07C[0];
  if ( v25 != *v16 )
    _stack_chk_fail((unsigned __int8)byte_F07C[0]);
  return result;
}
// 2FC0: using guessed type int __fastcall _errno(_DWORD);
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 2FFC: using guessed type int __fastcall _stack_chk_fail(_DWORD);
// 3014: using guessed type int __fastcall _strncat_chk(_DWORD, _DWORD, _DWORD, _DWORD);
// 7008: using guessed type char *off_7008;
// 7014: using guessed type char *off_7014;

//----- (00004458) --------------------------------------------------------
char *__fastcall get_cam_info(int a1)
{
  return &byte_F07C[28 * a1 + 184];
}

//----- (0000446C) --------------------------------------------------------
int __fastcall camera_open(signed int a1, int a2, int a3)
{
  int v3; // r4@1
  char *v5; // r6@4
  int v6; // r7@4
  void *v7; // r0@6
  int v8; // r5@6
  int v9; // r0@7
  int v10; // r0@7
  int v11; // [sp+4h] [bp-24h]@1
  int v12; // [sp+8h] [bp-20h]@1

  v11 = a2;
  v12 = a3;
  v3 = a1;
  if ( a1 >= byte_F07C[0] )
  {
    _android_log_print(6, "mm-camera-intf", "%s: Invalid camera_idx (%d)", "camera_open", a1, a2, a3);
    return 0;
  }
  v5 = &byte_F07C[4 * (a1 + 40)];
  pthread_mutex_lock((pthread_mutex_t *)&unk_F1C0);
  v6 = *((_DWORD *)v5 + 1);
  if ( v6 )
  {
    ++*(_DWORD *)(v6 + 8);
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    return *((_DWORD *)v5 + 1) + 34568;
  }
  v7 = malloc(0x8724u);
  v8 = (int)v7;
  if ( !v7 )
  {
LABEL_9:
    pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
    return 0;
  }
  memset(v7, 0, 0x8724u);
  ++*(_DWORD *)(v8 + 8);
  v9 = j_mm_camera_util_generate_handler(v3);
  *(_DWORD *)(v8 + 4) = v9;
  *(_DWORD *)(v8 + 34568) = v9;
  *(_DWORD *)(v8 + 34572) = &off_F004;
  pthread_mutex_init((pthread_mutex_t *)(v8 + 20), 0);
  v10 = j_mm_camera_open(v8);
  if ( v10 )
  {
    _android_log_print(6, "mm-camera-intf", "%s: mm_camera_open err = %d", "camera_open", v10, v11, v12);
    pthread_mutex_destroy((pthread_mutex_t *)(v8 + 20));
    *((_DWORD *)v5 + 1) = 0;
    free((void *)v8);
    goto LABEL_9;
  }
  *((_DWORD *)v5 + 1) = v8;
  pthread_mutex_unlock((pthread_mutex_t *)&unk_F1C0);
  return v8 + 34568;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// F004: using guessed type void *off_F004;

//----- (00004570) --------------------------------------------------------
int __fastcall sub_4570(int result, int a2)
{
  int v2; // r8@1
  int v3; // r5@1
  pthread_mutex_t *v4; // r7@2
  int v5; // r4@2
  int v6; // r6@2

  v2 = result + 4;
  v3 = a2;
  if ( a2 )
  {
    v4 = (pthread_mutex_t *)(a2 + 24);
    v5 = a2 + 34332;
    v6 = a2 + 34364;
    pthread_mutex_lock((pthread_mutex_t *)(a2 + 24));
    do
    {
      if ( *(_DWORD *)v5 )
        (*(void (__fastcall **)(_DWORD, int, _DWORD))v5)(*(_DWORD *)(v3 + 4), v2, *(_DWORD *)(v5 + 4));
      v5 += 8;
    }
    while ( v5 != v6 );
    result = j_j_pthread_mutex_unlock(v4);
  }
  return result;
}

//----- (000045B2) --------------------------------------------------------
int __fastcall mm_camera_util_get_channel_by_handler(int a1, int a2)
{
  int v2; // r2@1

  v2 = 0;
  do
  {
    if ( a2 == *(_DWORD *)(a1 + 2144 * v2 + 28) )
      return a1 + 2144 * v2 + 28;
    ++v2;
  }
  while ( v2 != 16 );
  return 0;
}

//----- (000045D6) --------------------------------------------------------
int mm_camera_util_chip_is_a_family()
{
  return 0;
}

//----- (000045DC) --------------------------------------------------------
signed int __fastcall mm_camera_enqueue_evt(int a1, int a2, int a3, int a4)
{
  int v4; // r6@1
  int v5; // r5@1
  _DWORD *v6; // r0@1
  _DWORD *v7; // r4@1
  int v8; // r0@2
  int v9; // r1@2
  int v10; // r3@2
  _DWORD *v11; // r0@2
  _DWORD *v12; // r5@2
  _DWORD *v13; // r0@3
  signed int result; // r0@4
  int v15; // [sp+0h] [bp-18h]@1

  v15 = a4;
  v4 = a1;
  v5 = a2;
  v6 = malloc(0x88u);
  v7 = v6;
  if ( v6 )
  {
    memset(v6, 0, 0x88u);
    v8 = *(_DWORD *)v5;
    v9 = *(_DWORD *)(v5 + 4);
    *v7 = 1;
    v10 = (int)(v7 + 1);
    *(_DWORD *)v10 = v8;
    *(_DWORD *)(v10 + 4) = v9;
    v11 = malloc(0xCu);
    v12 = v11;
    if ( v11 )
    {
      memset(v11, 0, 0xCu);
      v12[2] = v7;
      pthread_mutex_lock((pthread_mutex_t *)(v4 + 34532));
      v13 = *(_DWORD **)(v4 + 34520);
      *(_DWORD *)(v4 + 34520) = v12;
      *v12 = v4 + 34516;
      v12[1] = v13;
      *v13 = v12;
      ++*(_DWORD *)(v4 + 34528);
      pthread_mutex_unlock((pthread_mutex_t *)(v4 + 34532));
    }
    pthread_mutex_lock((pthread_mutex_t *)(v4 + 34552));
    ++*(_DWORD *)(v4 + 34548);
    pthread_cond_signal((pthread_cond_t *)(v4 + 34556));
    pthread_mutex_unlock((pthread_mutex_t *)(v4 + 34552));
    result = 0;
  }
  else
  {
    _android_log_print(6, "mm-camera-intf", "%s: No memory for mm_camera_node_t", "mm_camera_enqueue_evt", v15);
    result = -1;
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0000475C) --------------------------------------------------------
signed int __fastcall mm_camera_register_event_notify_internal(int a1, int a2, int a3)
{
  pthread_mutex_t *v3; // r6@1
  int v4; // r4@1
  int v5; // r5@1
  int v6; // r7@1
  int v7; // r0@2
  signed int v8; // r3@3
  int v9; // r1@4
  int v10; // lr@4
  int v11; // r1@4
  int v12; // r1@7
  int v13; // r5@9
  signed int v14; // r5@10

  v3 = (pthread_mutex_t *)(a1 + 24);
  v4 = a1;
  v5 = a2;
  v6 = a3;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 24));
  if ( v5 )
  {
    v7 = 0;
    while ( 1 )
    {
      v8 = *(_DWORD *)(v4 + 8 * v7 + 34336);
      if ( !v8 )
        break;
      if ( ++v7 == 4 )
        goto LABEL_12;
    }
    v9 = 8 * v7 + v4;
    v10 = v4 + 34304;
    *(_DWORD *)(v9 + 34332) = v5;
    *(_DWORD *)(v9 + 34336) = v6;
    v11 = *(_DWORD *)(v4 + 34364) + 1;
LABEL_10:
    *(_DWORD *)(v10 + 60) = v11;
    v14 = v8;
  }
  else
  {
    v12 = 0;
    do
    {
      if ( *(_DWORD *)(v4 + 8 * v12 + 34336) == v6 )
      {
        v13 = v4 + 8 * v12;
        v10 = v4 + 34304;
        v8 = 0;
        *(_DWORD *)(v13 + 34332) = 0;
        *(_DWORD *)(v13 + 34336) = 0;
        v11 = *(_DWORD *)(v4 + 34364) - 1;
        goto LABEL_10;
      }
      ++v12;
    }
    while ( v12 != 4 );
LABEL_12:
    v14 = -1;
  }
  pthread_mutex_unlock(v3);
  return v14;
}

//----- (000047EA) --------------------------------------------------------
signed int __fastcall mm_camera_register_event_notify(int a1, int a2, int a3)
{
  int v3; // r5@1
  signed int v4; // r4@1

  v3 = a1;
  v4 = j_mm_camera_register_event_notify_internal(a1, a2, a3);
  pthread_mutex_unlock((pthread_mutex_t *)(v3 + 20));
  return v4;
}

//----- (00004800) --------------------------------------------------------
int __fastcall mm_camera_qbuf(int a1, int a2, int *a3)
{
  int v3; // r6@1
  int *v4; // r5@1
  int v5; // r4@1
  int result; // r0@2

  v3 = a1;
  v4 = a3;
  v5 = j_mm_camera_util_get_channel_by_handler(a1, a2);
  pthread_mutex_unlock((pthread_mutex_t *)(v3 + 20));
  if ( v5 )
    result = j_j_j_mm_channel_qbuf(v5, v4);
  else
    result = -1;
  return result;
}

//----- (00004828) --------------------------------------------------------
signed int __fastcall mm_camera_get_queued_buf_count(int a1, int a2, int a3)
{
  int v3; // r5@1
  int v4; // r4@1
  int v5; // r0@1
  pthread_mutex_t *v6; // r4@1
  int v7; // r5@1
  signed int result; // r0@2
  int v9; // [sp+4h] [bp-14h]@1
  int v10; // [sp+8h] [bp-10h]@1

  v10 = a3;
  v3 = a3;
  v4 = a1;
  v5 = j_mm_camera_util_get_channel_by_handler(a1, a2);
  v6 = (pthread_mutex_t *)(v4 + 20);
  v9 = v3;
  v7 = v5;
  if ( v5 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v5 + 8));
    pthread_mutex_unlock(v6);
    result = j_mm_channel_fsm_fn(v7, 20, (int)&v9, 0);
  }
  else
  {
    pthread_mutex_unlock(v6);
    result = -1;
  }
  return result;
}

//----- (00004864) --------------------------------------------------------
int __fastcall mm_camera_query_capability(int a1)
{
  int v1; // r6@1
  int v2; // r0@1
  int v3; // r5@1
  int result; // r0@3
  char s; // [sp+Ch] [bp-7Ch]@1
  int v6; // [sp+74h] [bp-14h]@1

  v1 = a1;
  v6 = _stack_chk_guard;
  memset(&s, 0, 0x68u);
  v2 = ioctl(*(_DWORD *)(v1 + 12), 0x80685600, &s);
  v3 = v2;
  if ( v2 )
    _android_log_print(
      6,
      "mm-camera-intf",
      "%s: cannot get camera capabilities, rc = %d\n",
      "mm_camera_query_capability",
      v2);
  pthread_mutex_unlock((pthread_mutex_t *)(v1 + 20));
  result = v3;
  if ( v6 != _stack_chk_guard )
    _stack_chk_fail(v3);
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 2FFC: using guessed type int __fastcall _stack_chk_fail(_DWORD);

//----- (000048D0) --------------------------------------------------------
signed int __fastcall mm_camera_unprepare_snapshot(int a1, int a2)
{
  int v2; // r4@1
  pthread_mutex_t *v3; // r5@1
  signed int result; // r0@2
  int v5; // r0@3
  int v6; // r6@3

  v2 = a2;
  v3 = (pthread_mutex_t *)(a1 + 20);
  if ( a2 )
  {
    v5 = j_mm_camera_util_get_channel_by_handler(a1, a2);
    v6 = v5;
    if ( v5 )
    {
      pthread_mutex_lock((pthread_mutex_t *)(v5 + 8));
      pthread_mutex_unlock(v3);
      result = j_j_j_mm_channel_fsm_fn(v6, 12, 0, 0);
    }
    else
    {
      pthread_mutex_unlock(v3);
      result = -1;
    }
  }
  else
  {
    pthread_mutex_unlock((pthread_mutex_t *)(a1 + 20));
    result = v2;
  }
  return result;
}

//----- (00004914) --------------------------------------------------------
int __fastcall mm_camera_add_channel(int a1, int a2, int a3, int a4)
{
  int v4; // r10@1
  int v5; // r4@1
  int v6; // r9@1
  int v7; // r11@1
  int v8; // r5@1
  int v9; // r6@2
  int v10; // r7@2
  int v11; // r3@2
  int v12; // r5@3
  int v13; // ST04_4@3
  int v14; // r7@3

  v4 = a3;
  v5 = a1;
  v6 = a2;
  v7 = a4;
  v8 = 0;
  do
  {
    v9 = 2144 * v8;
    v10 = (unsigned __int8)v8;
    v11 = a1 + 2144 * v8;
    if ( !*(_DWORD *)(v11 + 32) )
    {
      v12 = v11 + 28;
      v13 = v11;
      memset((void *)(v11 + 28), 0, 0x860u);
      v14 = j_mm_camera_util_generate_handler(v10);
      *(_DWORD *)(v13 + 28) = v14;
      *(_DWORD *)(v13 + 32) = 1;
      *(_DWORD *)(v13 + 2160) = v5;
      pthread_mutex_init((pthread_mutex_t *)(v5 + v9 + 36), 0);
      j_mm_channel_init(v12, v6, v4, v7);
      goto LABEL_6;
    }
    ++v8;
  }
  while ( v8 != 16 );
  v14 = 0;
LABEL_6:
  pthread_mutex_unlock((pthread_mutex_t *)(v5 + 20));
  return v14;
}

//----- (0000498E) --------------------------------------------------------
signed int __fastcall mm_camera_del_channel(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r0@1
  pthread_mutex_t *v4; // r4@1
  void *v5; // r5@1
  pthread_mutex_t *v6; // r6@2
  signed int v7; // r4@2
  pthread_mutex_t *v8; // r0@3

  v2 = a1;
  v3 = j_mm_camera_util_get_channel_by_handler(a1, a2);
  v4 = (pthread_mutex_t *)(v2 + 20);
  v5 = (void *)v3;
  if ( v3 )
  {
    v6 = (pthread_mutex_t *)(v3 + 8);
    pthread_mutex_lock((pthread_mutex_t *)(v3 + 8));
    pthread_mutex_unlock(v4);
    v7 = j_mm_channel_fsm_fn((int)v5, 18, 0, 0);
    pthread_mutex_destroy(v6);
    memset(v5, 0, 0x860u);
  }
  else
  {
    v8 = v4;
    v7 = -1;
    pthread_mutex_unlock(v8);
  }
  return v7;
}

//----- (000049DC) --------------------------------------------------------
signed int __fastcall mm_camera_get_bundle_info(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r6@1
  int v5; // r0@1
  pthread_mutex_t *v6; // r4@1
  int v7; // r5@1
  signed int result; // r0@2

  v3 = a1;
  v4 = a3;
  v5 = j_mm_camera_util_get_channel_by_handler(a1, a2);
  v6 = (pthread_mutex_t *)(v3 + 20);
  v7 = v5;
  if ( v5 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v5 + 8));
    pthread_mutex_unlock(v6);
    result = j_j_j_mm_channel_fsm_fn(v7, 3, v4, 0);
  }
  else
  {
    pthread_mutex_unlock(v6);
    result = -1;
  }
  return result;
}

//----- (00004A14) --------------------------------------------------------
int __fastcall mm_camera_add_stream(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r0@1
  pthread_mutex_t *v4; // r4@1
  int v5; // r5@1
  int v7; // [sp+4h] [bp-14h]@1

  v2 = a1;
  v7 = 0;
  v3 = j_mm_camera_util_get_channel_by_handler(a1, a2);
  v4 = (pthread_mutex_t *)(v2 + 20);
  v5 = v3;
  if ( v3 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v3 + 8));
    pthread_mutex_unlock(v4);
    j_mm_channel_fsm_fn(v5, 0, 0, &v7);
  }
  else
  {
    pthread_mutex_unlock(v4);
  }
  return v7;
}

//----- (00004A4C) --------------------------------------------------------
signed int __fastcall mm_camera_del_stream(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r6@1
  int v5; // r0@1
  pthread_mutex_t *v6; // r4@1
  int v7; // r5@1
  signed int result; // r0@2

  v3 = a1;
  v4 = a3;
  v5 = j_mm_camera_util_get_channel_by_handler(a1, a2);
  v6 = (pthread_mutex_t *)(v3 + 20);
  v7 = v5;
  if ( v5 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v5 + 8));
    pthread_mutex_unlock(v6);
    result = j_j_j_mm_channel_fsm_fn(v7, 1, v4, 0);
  }
  else
  {
    pthread_mutex_unlock(v6);
    result = -1;
  }
  return result;
}

//----- (00004A84) --------------------------------------------------------
signed int __fastcall mm_camera_config_stream(int a1, int a2, int a3, int a4)
{
  int v4; // r4@1
  int v5; // r7@1
  int v6; // r6@1
  int v7; // r0@1
  pthread_mutex_t *v8; // r4@1
  int v9; // r5@1
  signed int result; // r0@2
  int v11; // [sp+0h] [bp-20h]@1
  int v12; // [sp+4h] [bp-1Ch]@1
  int v13; // [sp+8h] [bp-18h]@1

  v11 = a1;
  v12 = a2;
  v13 = a3;
  v4 = a1;
  v5 = a3;
  v6 = a4;
  v7 = j_mm_camera_util_get_channel_by_handler(a1, a2);
  v8 = (pthread_mutex_t *)(v4 + 20);
  v9 = v7;
  if ( v7 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v7 + 8));
    pthread_mutex_unlock(v8);
    v11 = v5;
    v12 = v6;
    result = j_mm_channel_fsm_fn(v9, 2, (int)&v11, 0);
  }
  else
  {
    pthread_mutex_unlock(v8);
    result = -1;
  }
  return result;
}

//----- (00004AC2) --------------------------------------------------------
signed int __fastcall mm_camera_start_channel(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r0@1
  pthread_mutex_t *v4; // r4@1
  int v5; // r5@1
  signed int result; // r0@2

  v2 = a1;
  v3 = j_mm_camera_util_get_channel_by_handler(a1, a2);
  v4 = (pthread_mutex_t *)(v2 + 20);
  v5 = v3;
  if ( v3 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v3 + 8));
    pthread_mutex_unlock(v4);
    result = j_j_j_mm_channel_fsm_fn(v5, 4, 0, 0);
  }
  else
  {
    pthread_mutex_unlock(v4);
    result = -1;
  }
  return result;
}

//----- (00004AF8) --------------------------------------------------------
signed int __fastcall mm_camera_stop_channel(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r0@1
  pthread_mutex_t *v4; // r5@1
  int v5; // r4@1
  signed int result; // r0@2

  v2 = a1;
  v3 = j_mm_camera_util_get_channel_by_handler(a1, a2);
  v4 = (pthread_mutex_t *)(v2 + 20);
  v5 = v3;
  if ( v3 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v3 + 8));
    pthread_mutex_unlock(v4);
    result = j_j_j_mm_channel_fsm_fn(v5, 5, 0, 0);
  }
  else
  {
    pthread_mutex_unlock(v4);
    result = v5;
  }
  return result;
}

//----- (00004B2C) --------------------------------------------------------
signed int __fastcall mm_camera_request_super_buf(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r6@1
  int v5; // r0@1
  pthread_mutex_t *v6; // r4@1
  int v7; // r5@1
  signed int result; // r0@2

  v3 = a1;
  v4 = a3;
  v5 = j_mm_camera_util_get_channel_by_handler(a1, a2);
  v6 = (pthread_mutex_t *)(v3 + 20);
  v7 = v5;
  if ( v5 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v5 + 8));
    pthread_mutex_unlock(v6);
    result = j_j_j_mm_channel_fsm_fn(v7, 8, v4, 0);
  }
  else
  {
    pthread_mutex_unlock(v6);
    result = -1;
  }
  return result;
}

//----- (00004B64) --------------------------------------------------------
signed int __fastcall mm_camera_cancel_super_buf_request(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r0@1
  pthread_mutex_t *v4; // r4@1
  int v5; // r5@1
  signed int result; // r0@2

  v2 = a1;
  v3 = j_mm_camera_util_get_channel_by_handler(a1, a2);
  v4 = (pthread_mutex_t *)(v2 + 20);
  v5 = v3;
  if ( v3 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v3 + 8));
    pthread_mutex_unlock(v4);
    result = j_j_j_mm_channel_fsm_fn(v5, 9, 0, 0);
  }
  else
  {
    pthread_mutex_unlock(v4);
    result = -1;
  }
  return result;
}

//----- (00004B9A) --------------------------------------------------------
signed int __fastcall mm_camera_flush_super_buf_queue(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r6@1
  int v5; // r0@1
  pthread_mutex_t *v6; // r4@1
  int v7; // r5@1
  signed int result; // r0@2

  v3 = a1;
  v4 = a3;
  v5 = j_mm_camera_util_get_channel_by_handler(a1, a2);
  v6 = (pthread_mutex_t *)(v3 + 20);
  v7 = v5;
  if ( v5 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v5 + 8));
    pthread_mutex_unlock(v6);
    result = j_j_j_mm_channel_fsm_fn(v7, 10, v4, 0);
  }
  else
  {
    pthread_mutex_unlock(v6);
    result = -1;
  }
  return result;
}

//----- (00004BD2) --------------------------------------------------------
signed int __fastcall mm_camera_channel_ae_bracketting(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r6@1
  int v5; // r0@1
  pthread_mutex_t *v6; // r4@1
  int v7; // r5@1
  signed int result; // r0@2

  v3 = a1;
  v4 = a3;
  v5 = j_mm_camera_util_get_channel_by_handler(a1, a2);
  v6 = (pthread_mutex_t *)(v3 + 20);
  v7 = v5;
  if ( v5 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v5 + 8));
    pthread_mutex_unlock(v6);
    result = j_j_j_mm_channel_fsm_fn(v7, 19, v4, 0);
  }
  else
  {
    pthread_mutex_unlock(v6);
    result = -1;
  }
  return result;
}

//----- (00004C0A) --------------------------------------------------------
signed int __fastcall mm_camera_config_channel_notify(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r6@1
  int v5; // r0@1
  pthread_mutex_t *v6; // r4@1
  int v7; // r5@1
  signed int result; // r0@2

  v3 = a1;
  v4 = a3;
  v5 = j_mm_camera_util_get_channel_by_handler(a1, a2);
  v6 = (pthread_mutex_t *)(v3 + 20);
  v7 = v5;
  if ( v5 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v5 + 8));
    pthread_mutex_unlock(v6);
    result = j_j_j_mm_channel_fsm_fn(v7, 11, v4, 0);
  }
  else
  {
    pthread_mutex_unlock(v6);
    result = -1;
  }
  return result;
}

//----- (00004C42) --------------------------------------------------------
signed int __fastcall mm_camera_set_stream_parms(int a1, int a2, int a3, int a4)
{
  int v4; // r4@1
  int v5; // r7@1
  int v6; // r6@1
  int v7; // r0@1
  pthread_mutex_t *v8; // r4@1
  int v9; // r5@1
  signed int result; // r0@2
  int v11; // [sp+0h] [bp-20h]@1
  int v12; // [sp+4h] [bp-1Ch]@1
  int v13; // [sp+8h] [bp-18h]@1

  v11 = a1;
  v12 = a2;
  v13 = a3;
  v4 = a1;
  v5 = a3;
  v6 = a4;
  v7 = j_mm_camera_util_get_channel_by_handler(a1, a2);
  v8 = (pthread_mutex_t *)(v4 + 20);
  v9 = v7;
  if ( v7 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v7 + 8));
    pthread_mutex_unlock(v8);
    v11 = v5;
    v12 = v6;
    result = j_mm_channel_fsm_fn(v9, 15, (int)&v11, 0);
  }
  else
  {
    pthread_mutex_unlock(v8);
    result = -1;
  }
  return result;
}

//----- (00004C80) --------------------------------------------------------
signed int __fastcall mm_camera_get_stream_parms(int a1, int a2, int a3, int a4)
{
  int v4; // r4@1
  int v5; // r7@1
  int v6; // r6@1
  int v7; // r0@1
  pthread_mutex_t *v8; // r4@1
  int v9; // r5@1
  signed int result; // r0@2
  int v11; // [sp+0h] [bp-20h]@1
  int v12; // [sp+4h] [bp-1Ch]@1
  int v13; // [sp+8h] [bp-18h]@1

  v11 = a1;
  v12 = a2;
  v13 = a3;
  v4 = a1;
  v5 = a3;
  v6 = a4;
  v7 = j_mm_camera_util_get_channel_by_handler(a1, a2);
  v8 = (pthread_mutex_t *)(v4 + 20);
  v9 = v7;
  if ( v7 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v7 + 8));
    pthread_mutex_unlock(v8);
    v11 = v5;
    v12 = v6;
    result = j_mm_channel_fsm_fn(v9, 16, (int)&v11, 0);
  }
  else
  {
    pthread_mutex_unlock(v8);
    result = -1;
  }
  return result;
}

//----- (00004CBE) --------------------------------------------------------
signed int __fastcall mm_camera_do_stream_action(int a1, int a2, int a3, int a4)
{
  int v4; // r4@1
  int v5; // r7@1
  int v6; // r6@1
  int v7; // r0@1
  pthread_mutex_t *v8; // r4@1
  int v9; // r5@1
  signed int result; // r0@2
  int v11; // [sp+0h] [bp-20h]@1
  int v12; // [sp+4h] [bp-1Ch]@1
  int v13; // [sp+8h] [bp-18h]@1

  v11 = a1;
  v12 = a2;
  v13 = a3;
  v4 = a1;
  v5 = a3;
  v6 = a4;
  v7 = j_mm_camera_util_get_channel_by_handler(a1, a2);
  v8 = (pthread_mutex_t *)(v4 + 20);
  v9 = v7;
  if ( v7 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v7 + 8));
    pthread_mutex_unlock(v8);
    v11 = v5;
    v12 = v6;
    result = j_mm_channel_fsm_fn(v9, 17, (int)&v11, 0);
  }
  else
  {
    pthread_mutex_unlock(v8);
    result = -1;
  }
  return result;
}

//----- (00004CFC) --------------------------------------------------------
signed int __fastcall mm_camera_map_stream_buf(int a1, int a2, int a3, char a4, int a5, int a6, int a7, int a8)
{
  int v8; // r4@1
  int v9; // r7@1
  char v10; // r6@1
  int v11; // r0@1
  pthread_mutex_t *v12; // r4@1
  int v13; // r5@1
  signed int result; // r0@2
  int v15; // [sp+0h] [bp-30h]@2
  char v16; // [sp+4h] [bp-2Ch]@2
  int v17; // [sp+8h] [bp-28h]@2
  int v18; // [sp+Ch] [bp-24h]@2
  int v19; // [sp+10h] [bp-20h]@2
  int v20; // [sp+14h] [bp-1Ch]@2

  v8 = a1;
  v9 = a3;
  v10 = a4;
  v11 = j_mm_camera_util_get_channel_by_handler(a1, a2);
  v12 = (pthread_mutex_t *)(v8 + 20);
  v13 = v11;
  if ( v11 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v11 + 8));
    pthread_mutex_unlock(v12);
    memset(&v15, 0, 0x18u);
    v17 = a5;
    v18 = a6;
    v19 = a7;
    v20 = a8;
    v15 = v9;
    v16 = v10;
    result = j_mm_channel_fsm_fn(v13, 13, (int)&v15, 0);
  }
  else
  {
    pthread_mutex_unlock(v12);
    result = -1;
  }
  return result;
}

//----- (00004D58) --------------------------------------------------------
signed int __fastcall mm_camera_unmap_stream_buf(int a1, int a2, int a3, char a4, int a5, int a6)
{
  int v6; // r4@1
  int v7; // r7@1
  char v8; // r6@1
  int v9; // r0@1
  pthread_mutex_t *v10; // r4@1
  int v11; // r5@1
  signed int result; // r0@2
  int v13; // [sp+0h] [bp-28h]@2
  char v14; // [sp+4h] [bp-24h]@2
  int v15; // [sp+8h] [bp-20h]@2
  int v16; // [sp+Ch] [bp-1Ch]@2

  v6 = a1;
  v7 = a3;
  v8 = a4;
  v9 = j_mm_camera_util_get_channel_by_handler(a1, a2);
  v10 = (pthread_mutex_t *)(v6 + 20);
  v11 = v9;
  if ( v9 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v9 + 8));
    pthread_mutex_unlock(v10);
    memset(&v13, 0, 0x10u);
    v13 = v7;
    v15 = a5;
    v16 = a6;
    v14 = v8;
    result = j_mm_channel_fsm_fn(v11, 14, (int)&v13, 0);
  }
  else
  {
    pthread_mutex_unlock(v10);
    result = -1;
  }
  return result;
}

//----- (00004DAC) --------------------------------------------------------
int __fastcall mm_camera_evt_sub(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r6@1
  int v4; // r0@1
  int v5; // r2@2
  int v6; // r6@2
  const char *v7; // r1@3
  const char *v8; // r2@3
  const char *v9; // r3@3
  int v11; // [sp+0h] [bp-38h]@3
  int s; // [sp+8h] [bp-30h]@1
  int v13; // [sp+Ch] [bp-2Ch]@1

  v2 = a1;
  v3 = a2;
  memset(&s, 0, 0x20u);
  v13 = 7;
  v4 = *(_DWORD *)(v2 + 12);
  s = 134225920;
  if ( !v3 )
  {
    v6 = ioctl(v4, 0x4020565Bu, &s);
    if ( v6 >= 0 )
      return j_mm_camera_poll_thread_del_poll_fd((_DWORD *)(v2 + 34368), *(_DWORD *)(v2 + 4), v5);
    v7 = "mm-camera-intf";
    v11 = v6;
    v8 = "%s: unsubscribe event rc = %d";
    v9 = "mm_camera_evt_sub";
    goto LABEL_7;
  }
  v6 = ioctl(v4, 0x4020565Au, &s);
  if ( v6 < 0 )
  {
    v7 = "mm-camera-intf";
    v8 = "%s: subscribe event rc = %d";
    v11 = v6;
    v9 = "mm_camera_evt_sub";
LABEL_7:
    _android_log_print(6, v7, v8, v9, v11);
    return v6;
  }
  return j_mm_camera_poll_thread_add_poll_fd(
           (_DWORD *)(v2 + 34368),
           *(_DWORD *)(v2 + 4),
           *(_DWORD *)(v2 + 12),
           (int)sub_4690,
           v2);
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 4690: using guessed type int sub_4690();

//----- (00004E5C) --------------------------------------------------------
int __fastcall mm_camera_open(int a1)
{
  int v1; // r4@1
  char *v2; // r0@1
  signed int v3; // r7@1
  int v4; // r0@2
  int v5; // r0@5
  int *v6; // r0@6
  char *v7; // r0@6
  const char *v8; // r1@6
  const char *v9; // r2@6
  const char *v10; // r3@6
  signed int v11; // r0@8
  int v12; // r0@10
  int *v13; // r0@11
  char *v14; // r0@11
  int v15; // r0@12
  int result; // r0@14
  int v17; // r0@15
  char *v18; // [sp+0h] [bp-48h]@6
  char *v19; // [sp+4h] [bp-44h]@6
  int v20; // [sp+8h] [bp-40h]@1
  char s; // [sp+Ch] [bp-3Ch]@1
  int v22; // [sp+2Ch] [bp-1Ch]@1

  v1 = a1;
  v20 = 0;
  v22 = _stack_chk_guard;
  _android_log_print(6, "mm-camera-intf", "%s:  begin\n", "mm_camera_open");
  v2 = j_mm_camera_util_get_dev_name(*(_DWORD *)(v1 + 4));
  snprintf(&s, 0x20u, "/dev/%s", v2);
  sscanf(&s, "/dev/video%u", &v20);
  v3 = 2;
  _android_log_print(6, "mm-camera-intf", "%s: dev name = %s, cam_idx = %d", "mm_camera_open", &s, v20);
  while ( 1 )
  {
    v4 = open(&s, 2050);
    *(_DWORD *)(v1 + 12) = v4;
    if ( v4 > 0 || *(_DWORD *)_errno(v4) != 5 || v3 == 1 )
      break;
    v3 = 1;
    usleep(0x4E20u);
  }
  v5 = _android_log_print(6, "mm-camera-intf", "%s:  opened, break out while loop", "mm_camera_open");
  if ( *(_DWORD *)(v1 + 12) > 0 )
  {
    v11 = j_mm_camera_socket_create(v20, 0);
    *(_DWORD *)(v1 + 16) = v11;
    if ( v11 <= 0 )
    {
      usleep(0x4E20u);
      *(_DWORD *)(v1 + 16) = j_mm_camera_socket_create(v20, 0);
    }
    v12 = *(_DWORD *)(v1 + 16);
    if ( v12 > 0 )
    {
      pthread_mutex_init((pthread_mutex_t *)(v1 + 34592), 0);
      pthread_mutex_init((pthread_mutex_t *)(v1 + 24), 0);
      pthread_mutex_init((pthread_mutex_t *)(v1 + 34576), 0);
      pthread_cond_init((pthread_cond_t *)(v1 + 34580), 0);
      j_mm_camera_cmd_thread_launch(v1 + 34516, (int)sub_4570, v1);
      j_mm_camera_poll_thread_launch(v1 + 34368, 0);
      result = j_mm_camera_evt_sub(v1, 1);
      goto LABEL_18;
    }
    v13 = (int *)_errno(v12);
    v14 = strerror(*v13);
    v8 = "mm-camera-intf";
    v9 = "%s: cannot open domain socket fd of '%s'(%s)\n";
    v18 = &s;
    v10 = "mm_camera_open";
    v19 = v14;
  }
  else
  {
    v6 = (int *)_errno(v5);
    v7 = strerror(*v6);
    v18 = &s;
    v8 = "mm-camera-intf";
    v9 = "%s: cannot open control fd of '%s' (%s)\n";
    v10 = "mm_camera_open";
    v19 = v7;
  }
  _android_log_print(6, v8, v9, v10, v18, v19);
  v15 = *(_DWORD *)(v1 + 12);
  if ( v15 > 0 )
  {
    close(v15);
    *(_DWORD *)(v1 + 12) = 0;
  }
  v17 = *(_DWORD *)(v1 + 16);
  if ( v17 > 0 )
  {
    j_mm_camera_socket_close(v17);
    *(_DWORD *)(v1 + 16) = 0;
  }
  result = -1;
LABEL_18:
  if ( v22 != _stack_chk_guard )
    _stack_chk_fail(result);
  return result;
}
// 2FC0: using guessed type int __fastcall _errno(_DWORD);
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 2FFC: using guessed type int __fastcall _stack_chk_fail(_DWORD);

//----- (00005030) --------------------------------------------------------
int __fastcall mm_camera_close(int a1)
{
  int v1; // r4@1
  int v2; // r1@1
  int v3; // r2@1
  int v4; // r3@1
  int v5; // r0@1
  int v6; // r0@3

  v1 = a1;
  j_mm_camera_evt_sub(a1, 0);
  j_mm_camera_poll_thread_release(v1 + 34368);
  j_mm_camera_cmd_thread_release(v1 + 34516, v2, v3, v4);
  v5 = *(_DWORD *)(v1 + 12);
  if ( v5 > 0 )
  {
    close(v5);
    *(_DWORD *)(v1 + 12) = 0;
  }
  v6 = *(_DWORD *)(v1 + 16);
  if ( v6 > 0 )
  {
    j_mm_camera_socket_close(v6);
    *(_DWORD *)(v1 + 16) = 0;
  }
  pthread_mutex_destroy((pthread_mutex_t *)(v1 + 34592));
  pthread_mutex_destroy((pthread_mutex_t *)(v1 + 24));
  pthread_mutex_destroy((pthread_mutex_t *)(v1 + 34576));
  pthread_cond_destroy((pthread_cond_t *)(v1 + 34580));
  pthread_mutex_unlock((pthread_mutex_t *)(v1 + 20));
  return 0;
}

//----- (0000509C) --------------------------------------------------------
int __fastcall mm_camera_util_wait_for_event(int a1, int a2, _DWORD *a3)
{
  pthread_mutex_t *v3; // r4@1
  int v4; // r5@1
  int v5; // r8@1
  _DWORD *v6; // r9@1
  void *v7; // r6@1
  int v9; // [sp+0h] [bp-28h]@1
  int v10; // [sp+4h] [bp-24h]@1

  v9 = a1;
  v10 = a2;
  v3 = (pthread_mutex_t *)(a1 + 34576);
  v4 = a1;
  v5 = a2;
  v6 = a3;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 34576));
  v7 = (void *)(v4 + 34584);
  while ( !(v5 & *(_DWORD *)v7) )
  {
    clock_gettime(0, (struct timespec *)&v9);
    ++v9;
    if ( pthread_cond_timedwait((pthread_cond_t *)(v4 + 34580), v3, (const struct timespec *)&v9) == 110 )
    {
      _android_log_print(
        6,
        "mm-camera-intf",
        "%s pthread_cond_timedwait success\n",
        "mm_camera_util_wait_for_event",
        v9,
        v10);
      *(_DWORD *)(v4 + 34588) = 131073;
      break;
    }
  }
  *v6 = *(_DWORD *)(v4 + 34588);
  memset(v7, 0, 8u);
  return pthread_mutex_unlock(v3);
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00005130) --------------------------------------------------------
int __fastcall mm_camera_util_sendmsg(int a1, int a2, int a3, int a4)
{
  pthread_mutex_t *v4; // r5@1
  int v5; // r4@1
  int v6; // r8@1
  int v7; // r7@1
  int v8; // r6@1
  int v9; // r4@2
  int v11; // [sp+4h] [bp-1Ch]@1

  v11 = a2;
  v4 = (pthread_mutex_t *)(a1 + 34592);
  v5 = a1;
  v6 = a2;
  v7 = a3;
  v8 = a4;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 34592));
  if ( j_mm_camera_socket_sendmsg(*(_DWORD *)(v5 + 16), v6, v7, v8) <= 0 )
  {
    v9 = -1;
  }
  else
  {
    j_mm_camera_util_wait_for_event(v5, 1, &v11);
    v9 = v11 - 131074;
    if ( v11 != 131074 )
      v9 = -1;
  }
  pthread_mutex_unlock(v4);
  return v9;
}

//----- (00005182) --------------------------------------------------------
int __fastcall mm_camera_map_buf(int a1, int a2, int a3, int a4)
{
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r9@1
  int v7; // r8@1
  int v8; // r9@1
  int v10; // [sp+0h] [bp-40h]@1
  int v11; // [sp+4h] [bp-3Ch]@1
  int v12; // [sp+18h] [bp-28h]@1
  int v13; // [sp+1Ch] [bp-24h]@1

  v4 = a1;
  v5 = a3;
  v6 = a2;
  v7 = a4;
  memset(&v10, 0, 0x20u);
  v11 = v6;
  v12 = v5;
  v13 = v7;
  v8 = j_mm_camera_util_sendmsg(v4, (int)&v10, 32, v5);
  pthread_mutex_unlock((pthread_mutex_t *)(v4 + 20));
  return v8;
}

//----- (000051C4) --------------------------------------------------------
int __fastcall mm_camera_unmap_buf(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r7@1
  int v4; // r7@1
  signed int v6; // [sp+0h] [bp-38h]@1
  int v7; // [sp+4h] [bp-34h]@1

  v2 = a1;
  v3 = a2;
  memset(&v6, 0, 0x20u);
  v6 = 1;
  v7 = v3;
  v4 = j_mm_camera_util_sendmsg(v2, (int)&v6, 32, 0);
  pthread_mutex_unlock((pthread_mutex_t *)(v2 + 20));
  return v4;
}

//----- (000051FC) --------------------------------------------------------
int __fastcall mm_camera_util_s_ctrl(int a1, int a2, int *a3)
{
  int *v3; // r4@1
  int v4; // r0@3
  int v6; // [sp+0h] [bp-10h]@1
  int v7; // [sp+4h] [bp-Ch]@1

  v7 = 0;
  v6 = a2;
  v3 = a3;
  if ( a3 )
    v7 = *a3;
  v4 = ioctl(a1, 0xC008561C, &v6);
  if ( v3 )
    *v3 = v7;
  return v4 >> 31;
}

//----- (00005228) --------------------------------------------------------
int __fastcall mm_camera_set_parms(int a1, int a2, int a3)
{
  int v3; // r5@1
  int v4; // r4@2
  int v6; // [sp+4h] [bp-14h]@1
  int v7; // [sp+8h] [bp-10h]@1

  v7 = a3;
  v3 = a1;
  v6 = 0;
  if ( a2 )
    v4 = j_mm_camera_util_s_ctrl(*(_DWORD *)(a1 + 12), 134217742, &v6);
  else
    v4 = -1;
  pthread_mutex_unlock((pthread_mutex_t *)(v3 + 20));
  return v4;
}

//----- (00005258) --------------------------------------------------------
int __fastcall mm_camera_do_auto_focus(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v6; // [sp+4h] [bp-14h]@1
  int v7; // [sp+8h] [bp-10h]@1

  v7 = a3;
  v3 = a1;
  v6 = 0;
  v4 = j_mm_camera_util_s_ctrl(*(_DWORD *)(a1 + 12), 134217743, &v6);
  if ( v4 != -1 )
    *(_BYTE *)v3 = 1;
  pthread_mutex_unlock((pthread_mutex_t *)(v3 + 20));
  return v4;
}

//----- (00005288) --------------------------------------------------------
int __fastcall mm_camera_cancel_auto_focus(int a1)
{
  int v1; // r4@1
  int v2; // r5@1
  int v4; // [sp+4h] [bp-14h]@1

  v1 = a1;
  v4 = 0;
  v2 = j_mm_camera_util_s_ctrl(*(_DWORD *)(a1 + 12), 134217744, &v4);
  if ( v2 != -1 )
    *(_BYTE *)v1 = 0;
  pthread_mutex_unlock((pthread_mutex_t *)(v1 + 20));
  return v2;
}

//----- (000052B8) --------------------------------------------------------
int __fastcall mm_camera_prepare_snapshot(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r0@1
  int v5; // r5@1
  int v7; // [sp+4h] [bp-14h]@1
  int v8; // [sp+8h] [bp-10h]@1

  v7 = a2;
  v8 = a3;
  v3 = a1;
  v4 = *(_DWORD *)(a1 + 12);
  v7 = a2;
  v5 = j_mm_camera_util_s_ctrl(v4, 134217745, &v7);
  pthread_mutex_unlock((pthread_mutex_t *)(v3 + 20));
  return v5;
}

//----- (000052E0) --------------------------------------------------------
int __fastcall mm_camera_start_zsl_snapshot(int a1, int a2, int a3)
{
  int v4; // [sp+4h] [bp-Ch]@1
  int v5; // [sp+8h] [bp-8h]@1

  v5 = a3;
  v4 = 0;
  return j_mm_camera_util_s_ctrl(*(_DWORD *)(a1 + 12), 134217748, &v4);
}

//----- (000052FC) --------------------------------------------------------
int __fastcall mm_camera_stop_zsl_snapshot(int a1, int a2, int a3)
{
  int v4; // [sp+4h] [bp-Ch]@1
  int v5; // [sp+8h] [bp-8h]@1

  v5 = a3;
  v4 = 0;
  return j_mm_camera_util_s_ctrl(*(_DWORD *)(a1 + 12), 134217749, &v4);
}

//----- (00005318) --------------------------------------------------------
int __fastcall mm_camera_take_picture_done(int a1, int a2, int a3)
{
  int v4; // [sp+4h] [bp-Ch]@1
  int v5; // [sp+8h] [bp-8h]@1

  v5 = a3;
  v4 = 0;
  return j_mm_camera_util_s_ctrl(*(_DWORD *)(a1 + 12), 134217750, &v4);
}

//----- (00005334) --------------------------------------------------------
int __fastcall mm_camera_util_g_ctrl(int a1, int a2, int *a3)
{
  int *v3; // r4@1
  int v4; // r0@3
  int v6; // [sp+0h] [bp-10h]@1
  int v7; // [sp+4h] [bp-Ch]@1

  v7 = 0;
  v6 = a2;
  v3 = a3;
  if ( a3 )
    v7 = *a3;
  v4 = ioctl(a1, 0xC008561B, &v6);
  if ( v3 )
    *v3 = v7;
  return v4 >> 31;
}

//----- (00005360) --------------------------------------------------------
int __fastcall mm_camera_get_parms(int a1, int a2, int a3)
{
  int v3; // r5@1
  int v4; // r4@2
  int v6; // [sp+4h] [bp-14h]@1
  int v7; // [sp+8h] [bp-10h]@1

  v7 = a3;
  v3 = a1;
  v6 = 0;
  if ( a2 )
    v4 = j_mm_camera_util_g_ctrl(*(_DWORD *)(a1 + 12), 134217742, &v6);
  else
    v4 = -1;
  pthread_mutex_unlock((pthread_mutex_t *)(v3 + 20));
  return v4;
}

//----- (00005390) --------------------------------------------------------
signed int __fastcall sub_5390(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r6@1
  _DWORD *v4; // r0@1
  _DWORD *v5; // r5@1
  _DWORD *v6; // r3@2
  signed int result; // r0@2

  v2 = a1;
  v3 = a2;
  v4 = malloc(0xCu);
  v5 = v4;
  if ( v4 )
  {
    memset(v4, 0, 0xCu);
    v5[2] = v3;
    pthread_mutex_lock((pthread_mutex_t *)(v2 + 16));
    v6 = *(_DWORD **)(v2 + 4);
    *v5 = v2;
    *(_DWORD *)(v2 + 4) = v5;
    v5[1] = v6;
    *v6 = v5;
    ++*(_DWORD *)(v2 + 12);
    pthread_mutex_unlock((pthread_mutex_t *)(v2 + 16));
    result = 0;
  }
  else
  {
    result = -1;
  }
  return result;
}

//----- (000053D4) --------------------------------------------------------
int __fastcall sub_53D4(int a1)
{
  pthread_mutex_t *v1; // r5@1
  int v2; // r4@1

  v1 = (pthread_mutex_t *)(a1 + 4);
  v2 = a1;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 4));
  ++*(_DWORD *)v2;
  pthread_cond_signal((pthread_cond_t *)(v2 + 8));
  return j_j_pthread_mutex_unlock(v1);
}

//----- (000053F8) --------------------------------------------------------
_DWORD *__fastcall sub_53F8(_DWORD *result, int a2, int a3)
{
  int (__fastcall *v3)(_DWORD, _DWORD); // r2@4

  if ( a2 )
  {
    if ( *result == 4 )
    {
      v3 = *(int (__fastcall **)(_DWORD, _DWORD))(a2 + 76);
      if ( v3 )
        result = (_DWORD *)v3(result + 1, *(_DWORD *)(a2 + 80));
    }
    else
    {
      result = (_DWORD *)_android_log_print(
                           6,
                           "mm-camera-intf",
                           "%s: Wrong cmd_type (%d) for super buf dataCB",
                           "mm_channel_dispatch_super_buf",
                           *result,
                           a2,
                           a3);
    }
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0000543C) --------------------------------------------------------
int __fastcall mm_channel_util_get_stream_by_handler(int a1, int a2)
{
  int v2; // r2@1
  int v3; // r3@1

  v2 = a1;
  v3 = 0;
  do
  {
    if ( *(_DWORD *)(v2 + 352) && a2 == *(_DWORD *)(v2 + 340) )
      return a1 + 448 * v3 + 340;
    ++v3;
    v2 += 448;
  }
  while ( v3 != 4 );
  return 0;
}

//----- (0000546C) --------------------------------------------------------
signed int __fastcall mm_channel_fsm_fn_notused(int a1, int a2, int a3, int a4)
{
  _android_log_print(
    6,
    "mm-camera-intf",
    "%s: invalid state (%d) for evt (%d), in(%p), out(%p)",
    "mm_channel_fsm_fn_notused",
    *(_DWORD *)(a1 + 4),
    a2,
    a3,
    a4);
  return -1;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0000549C) --------------------------------------------------------
int __fastcall mm_channel_fsm_fn_paused(int a1, int a2, int a3, int a4)
{
  _android_log_print(
    6,
    "mm-camera-intf",
    "%s: invalid state (%d) for evt (%d), in(%p), out(%p)",
    "mm_channel_fsm_fn_paused",
    *(_DWORD *)(a1 + 4),
    a2,
    a3,
    a4);
  return 0;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (000054CC) --------------------------------------------------------
int __fastcall mm_channel_init(int a1, int a2, int a3, int a4)
{
  int v4; // r4@1
  int v5; // r3@2
  int v6; // r0@2
  int v7; // t0@2
  int v8; // r1@2
  int v9; // r2@2

  v4 = a1;
  *(_DWORD *)(a1 + 76) = a3;
  *(_DWORD *)(a1 + 80) = a4;
  if ( a2 )
  {
    v5 = a1 + 56;
    v6 = *(_DWORD *)a2;
    v7 = a2 + 4;
    v8 = *(_DWORD *)(a2 + 4);
    v9 = *(_DWORD *)(v7 + 4);
    *(_DWORD *)v5 = v6;
    *(_DWORD *)(v5 + 4) = v8;
    *(_DWORD *)(v5 + 8) = v9;
  }
  j_mm_camera_poll_thread_launch(v4 + 192, 1);
  *(_DWORD *)(v4 + 4) = 1;
  return 0;
}

//----- (000054F2) --------------------------------------------------------
int __fastcall mm_channel_release(int a1)
{
  int v1; // r4@1
  int result; // r0@1

  v1 = a1;
  result = j_mm_camera_poll_thread_release(a1 + 192);
  *(_DWORD *)(v1 + 4) = 0;
  return result;
}

//----- (00005504) --------------------------------------------------------
int __fastcall mm_channel_add_stream(int a1)
{
  int v1; // r3@1
  int v2; // r7@1
  int v3; // r8@2
  int v4; // r9@2
  int v5; // r4@2
  int result; // r0@4

  v1 = 0;
  v2 = a1;
  while ( 1 )
  {
    v3 = v1;
    v4 = a1 + 448 * v1;
    v5 = *(_DWORD *)(v4 + 352);
    if ( !v5 )
      break;
    if ( ++v1 == 4 )
    {
      _android_log_print(
        6,
        "mm-camera-intf",
        "%s: streams reach max, no more stream allowed to add",
        "mm_channel_add_stream");
      return 0;
    }
  }
  memset((void *)(v4 + 340), 0, 0x1C0u);
  *(_DWORD *)(v4 + 340) = j_mm_camera_util_generate_handler(v3);
  *(_DWORD *)(v4 + 756) = v2;
  pthread_mutex_init((pthread_mutex_t *)(v4 + 740), 0);
  pthread_mutex_init((pthread_mutex_t *)(v4 + 688), 0);
  *(_DWORD *)(v4 + 352) = 1;
  if ( j_mm_stream_fsm_fn(v4 + 340, 0, 0, 0) )
  {
    pthread_mutex_destroy((pthread_mutex_t *)(v4 + 740));
    pthread_mutex_destroy((pthread_mutex_t *)(v4 + 688));
    memset((void *)(v4 + 340), 0, 0x1C0u);
    result = 0;
  }
  else
  {
    result = *(_DWORD *)(v4 + 340);
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (000055C0) --------------------------------------------------------
int __fastcall mm_channel_del_stream(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r0@1
  int result; // r0@2
  int v5; // [sp+4h] [bp-Ch]@1

  v5 = a2;
  v2 = a2;
  v3 = j_mm_channel_util_get_stream_by_handler(a1, a2);
  if ( v3 )
  {
    result = j_j_j_mm_stream_fsm_fn(v3, (int (*)(int))1, 0, 0);
  }
  else
  {
    _android_log_print(
      6,
      "mm-camera-intf",
      "%s :Invalid Stream Object for stream_id = %d",
      "mm_channel_del_stream",
      v2,
      v5);
    result = -1;
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00005604) --------------------------------------------------------
int __fastcall mm_channel_config_stream(int a1, int a2, int a3)
{
  int v3; // r5@1
  int v4; // r4@1
  int v5; // r0@1
  int result; // r0@2
  int v7; // [sp+4h] [bp-14h]@1
  int v8; // [sp+8h] [bp-10h]@1

  v7 = a2;
  v8 = a3;
  v3 = a2;
  v4 = a3;
  v5 = j_mm_channel_util_get_stream_by_handler(a1, a2);
  if ( v5 )
  {
    result = j_j_j_mm_stream_fsm_fn(v5, (int (*)(int))2, v4, 0);
  }
  else
  {
    _android_log_print(
      6,
      "mm-camera-intf",
      "%s :Invalid Stream Object for stream_id = %d",
      "mm_channel_config_stream",
      v3,
      v7,
      v8);
    result = -1;
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00005648) --------------------------------------------------------
signed int __fastcall mm_channel_get_bundle_info(int *a1, _BYTE *a2, int a3)
{
  _BYTE *v3; // r7@1
  int *v4; // r8@1
  int v5; // r3@1
  int v6; // r4@1
  int v7; // r6@2
  int v8; // r1@2
  int v9; // r0@3
  int v10; // r5@3
  int v11; // r3@5
  int v13; // [sp+8h] [bp-20h]@1

  v13 = a3;
  v3 = a2;
  v4 = a1;
  memset(a2, 0, 0x18u);
  v5 = *v4;
  v6 = 0;
  v3[4] = 0;
  *(_DWORD *)v3 = v5;
  do
  {
    v7 = (int)&v4[112 * v6];
    v8 = *(_DWORD *)(v7 + 340);
    if ( v8 )
    {
      v9 = j_mm_channel_util_get_stream_by_handler((int)v4, v8);
      v10 = v9;
      if ( !v9 )
      {
        _android_log_print(
          6,
          "mm-camera-intf",
          "%s: cannot find stream obj (%d) by handler (%d)",
          "mm_channel_get_bundle_info",
          v6,
          *(_DWORD *)(v7 + 340),
          v13);
        memset(v3, v10, 0x18u);
        return -1;
      }
      if ( *(_DWORD *)(*(_DWORD *)(v9 + 16) + 4) != 7 )
      {
        v11 = v3[4];
        v3[4] = v11 + 1;
        *(_DWORD *)&v3[4 * (v11 + 2)] = *(_DWORD *)(v9 + 4);
      }
    }
    ++v6;
  }
  while ( v6 != 4 );
  return 0;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (000056D8) --------------------------------------------------------
signed int __fastcall mm_channel_request_super_buf(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r6@1
  void *v4; // r0@1
  int v5; // r4@1
  signed int result; // r0@2

  v2 = a1;
  v3 = a2;
  v4 = malloc(0x88u);
  v5 = (int)v4;
  if ( v4 )
  {
    memset(v4, 0, 0x88u);
    *(_DWORD *)v5 = 3;
    *(_DWORD *)(v5 + 4) = v3;
    sub_5390(v2 + 88, v5);
    sub_53D4(v2 + 120);
    result = 0;
  }
  else
  {
    _android_log_print(6, "mm-camera-intf", "%s: No memory for mm_camera_node_t", "mm_channel_request_super_buf");
    result = -1;
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00005730) --------------------------------------------------------
signed int __fastcall mm_channel_cancel_super_buf_request(int a1)
{
  return j_j_j_mm_channel_request_super_buf(a1, 0);
}

//----- (00005738) --------------------------------------------------------
signed int __fastcall mm_channel_flush_super_buf_queue(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r6@1
  void *v4; // r0@1
  int v5; // r4@1
  signed int result; // r0@2

  v2 = a1;
  v3 = a2;
  v4 = malloc(0x88u);
  v5 = (int)v4;
  if ( v4 )
  {
    memset(v4, 0, 0x88u);
    *(_DWORD *)v5 = 6;
    *(_DWORD *)(v5 + 4) = v3;
    sub_5390(v2 + 88, v5);
    sub_53D4(v2 + 120);
    result = 0;
  }
  else
  {
    _android_log_print(6, "mm-camera-intf", "%s: No memory for mm_camera_node_t", "mm_channel_flush_super_buf_queue");
    result = -1;
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00005790) --------------------------------------------------------
signed int __fastcall mm_channel_config_notify_mode(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r6@1
  void *v4; // r0@1
  int v5; // r4@1
  signed int result; // r0@2

  v2 = a1;
  v3 = a2;
  v4 = malloc(0x88u);
  v5 = (int)v4;
  if ( v4 )
  {
    memset(v4, 0, 0x88u);
    *(_DWORD *)v5 = 5;
    *(_DWORD *)(v5 + 4) = v3;
    sub_5390(v2 + 88, v5);
    sub_53D4(v2 + 120);
    result = 0;
  }
  else
  {
    _android_log_print(6, "mm-camera-intf", "%s: No memory for mm_camera_node_t", "mm_channel_config_notify_mode");
    result = -1;
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (000057E8) --------------------------------------------------------
signed int __fastcall mm_channel_unprepare_snapshot(int a1, int a2, int a3, int a4)
{
  int v4; // r4@1
  _DWORD *v5; // r0@1
  _DWORD *v6; // r5@1
  signed int result; // r0@2
  int v8; // [sp+0h] [bp-10h]@1

  v8 = a4;
  v4 = a1;
  v5 = malloc(0x88u);
  v6 = v5;
  if ( v5 )
  {
    memset(v5, 0, 0x88u);
    *v6 = 7;
    sub_5390(v4 + 88, (int)v6);
    sub_53D4(v4 + 120);
    result = 0;
  }
  else
  {
    _android_log_print(6, "mm-camera-intf", "%s: No memory for mm_camera_node_t", "mm_channel_unprepare_snapshot", v8);
    result = -1;
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0000583C) --------------------------------------------------------
int __fastcall mm_channel_qbuf(int a1, int *a2)
{
  int v2; // r4@1
  int v3; // r0@1
  int result; // r0@2

  v2 = (int)a2;
  v3 = j_mm_channel_util_get_stream_by_handler(a1, *a2);
  if ( v3 )
    result = j_j_j_mm_stream_fsm_fn(v3, (int (*)(int))9, v2, 0);
  else
    result = -1;
  return result;
}

//----- (0000585C) --------------------------------------------------------
int __fastcall mm_channel_get_queued_buf_count(int a1, int a2)
{
  int v2; // r0@1
  int result; // r0@2

  v2 = j_mm_channel_util_get_stream_by_handler(a1, a2);
  if ( v2 )
    result = j_j_j_mm_stream_fsm_fn(v2, (int (*)(int))0xD, 0, 0);
  else
    result = -1;
  return result;
}

//----- (00005878) --------------------------------------------------------
int __fastcall mm_channel_set_stream_parm(int a1, int *a2)
{
  int v2; // r4@1
  int v3; // r0@1
  int result; // r0@2

  v2 = (int)a2;
  v3 = j_mm_channel_util_get_stream_by_handler(a1, *a2);
  if ( v3 )
    result = j_j_j_mm_stream_fsm_fn(v3, (int (*)(int))0xA, v2, 0);
  else
    result = -1;
  return result;
}

//----- (00005898) --------------------------------------------------------
int __fastcall mm_channel_get_stream_parm(int a1, int *a2)
{
  int v2; // r4@1
  int v3; // r0@1
  int result; // r0@2

  v2 = (int)a2;
  v3 = j_mm_channel_util_get_stream_by_handler(a1, *a2);
  if ( v3 )
    result = j_j_j_mm_stream_fsm_fn(v3, (int (*)(int))0xB, v2, 0);
  else
    result = -1;
  return result;
}

//----- (000058B8) --------------------------------------------------------
int __fastcall mm_channel_do_stream_action(int a1, int *a2)
{
  int v2; // r4@1
  int v3; // r0@1
  int result; // r0@2

  v2 = (int)a2;
  v3 = j_mm_channel_util_get_stream_by_handler(a1, *a2);
  if ( v3 )
    result = j_j_j_mm_stream_fsm_fn(v3, (int (*)(int))0xC, v2, 0);
  else
    result = -1;
  return result;
}

//----- (000058D8) --------------------------------------------------------
int __fastcall mm_channel_map_stream_buf(int a1, int *a2)
{
  int *v2; // r4@1
  int v3; // r0@1
  int result; // r0@2

  v2 = a2;
  v3 = j_mm_channel_util_get_stream_by_handler(a1, *a2);
  if ( v3 )
    result = j_mm_stream_map_buf(v3, *((_BYTE *)v2 + 4), v2[2], v2[3], v2[4], v2[5]);
  else
    result = -1;
  return result;
}

//----- (00005900) --------------------------------------------------------
int __fastcall mm_channel_unmap_stream_buf(int a1, int *a2)
{
  int *v2; // r4@1
  int v3; // r0@1
  int result; // r0@2

  v2 = a2;
  v3 = j_mm_channel_util_get_stream_by_handler(a1, *a2);
  if ( v3 )
    result = j_j_j_mm_stream_unmap_buf(v3, *((_BYTE *)v2 + 4), v2[2], v2[3]);
  else
    result = -1;
  return result;
}

//----- (00005920) --------------------------------------------------------
int __fastcall mm_channel_superbuf_queue_init(int a1)
{
  int v1; // r4@1
  int result; // r0@1

  v1 = a1;
  pthread_mutex_init((pthread_mutex_t *)(a1 + 16), 0);
  result = 0;
  *(_DWORD *)v1 = v1;
  *(_DWORD *)(v1 + 4) = v1;
  *(_DWORD *)(v1 + 12) = 0;
  return result;
}

//----- (00005938) --------------------------------------------------------
int __fastcall mm_channel_start(int a1)
{
  int v1; // r4@1
  int v2; // r5@1
  int v3; // r8@1
  int v4; // r6@1
  int v5; // r1@2
  int v6; // r0@3
  int v7; // r0@9
  char *v8; // lr@9
  int v9; // r2@11
  int v10; // r3@11
  int v11; // r1@13
  int v12; // r5@13
  int i; // r5@15
  int v14; // r9@17
  int v15; // r4@18
  const char *v16; // r1@20
  const char *v17; // r2@20
  const char *v18; // r3@20
  int v19; // r6@28
  int v20; // r8@29
  int v22; // [sp+0h] [bp-8h]@20
  int v23[4]; // [sp+8h] [bp+0h]@1
  char v24[4]; // [sp+18h] [bp+10h]@6

  v1 = a1;
  v2 = 0;
  memset(v23, 0, 0x10u);
  v3 = v1;
  v4 = 0;
  do
  {
    v5 = *(_DWORD *)(v3 + 340);
    if ( v5 )
    {
      v6 = j_mm_channel_util_get_stream_by_handler(v1, v5);
      if ( v6 )
      {
        if ( *(_DWORD *)(*(_DWORD *)(v6 + 16) + 4) == 7 )
          v2 = v4;
        *(_DWORD *)&v24[4 * v4 - 16] = v6;
        v4 = (unsigned __int8)(v4 + 1);
      }
    }
    v3 += 448;
  }
  while ( v3 != v1 + 1792 );
  if ( v2 )
  {
    v7 = v23[0];
    v8 = &v24[4 * v2];
    v23[0] = *((_DWORD *)v8 - 4);
    *((_DWORD *)v8 - 4) = v7;
  }
  if ( *(_DWORD *)(v1 + 76) )
  {
    j_mm_channel_superbuf_queue_init(v1 + 16);
    v9 = v1 + 36;
    v10 = 0;
    *(_BYTE *)(v1 + 36) = v4;
    *(_DWORD *)(v1 + 68) = 0;
    while ( v10 < v4 )
    {
      v11 = v23[v10++];
      v12 = *(_DWORD *)v11;
      *(_BYTE *)(v11 + 420) = 1;
      *(_DWORD *)(v9 + 4) = v12;
      v9 += 4;
    }
    j_mm_camera_cmd_thread_launch(v1 + 140, (int)sub_53F8, v1);
    j_mm_camera_cmd_thread_launch(v1 + 88, (int)sub_65C0, v1);
    *(_BYTE *)(v1 + 12) = 1;
  }
  for ( i = 0; ; ++i )
  {
    if ( i >= v4 )
      return 0;
    v14 = v23[i];
    if ( *(_DWORD *)(v14 + 12) == 6 )
    {
      v15 = -1;
      _android_log_print(6, "mm-camera-intf", "%s: stream already started idx(%d)", "mm_channel_start", i);
      goto LABEL_28;
    }
    v15 = j_mm_stream_fsm_fn(v23[i], (int (*)(int))3, 0, 0);
    if ( v15 )
    {
      v16 = "mm-camera-intf";
      v22 = i;
      v17 = "%s: get buf failed at idx(%d)";
      v18 = "mm_channel_start";
      goto LABEL_25;
    }
    v15 = j_mm_stream_fsm_fn(v14, (int (*)(int))5, 0, 0);
    if ( v15 )
    {
      v16 = "mm-camera-intf";
      v22 = i;
      v17 = "%s: reg buf failed at idx(%d)";
      v18 = "mm_channel_start";
      goto LABEL_25;
    }
    v15 = j_mm_stream_fsm_fn(v14, (int (*)(int))7, 0, 0);
    if ( v15 )
      break;
  }
  v16 = "mm-camera-intf";
  v17 = "%s: start stream failed at idx(%d)";
  v22 = i;
  v18 = "mm_channel_start";
LABEL_25:
  _android_log_print(6, v16, v17, v18, v22);
LABEL_28:
  v19 = 0;
  do
  {
    v20 = v23[v19++];
    j_mm_stream_fsm_fn(v20, (int (*)(int))8, 0, 0);
    j_mm_stream_fsm_fn(v20, (int (*)(int))6, 0, 0);
    j_mm_stream_fsm_fn(v20, (int (*)(int))4, 0, 0);
  }
  while ( v19 <= i );
  return v15;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 5938: using guessed type char var_4[4];
// 5938: using guessed type int var_14[4];

//----- (00005AF8) --------------------------------------------------------
signed int __fastcall mm_channel_fsm_fn_stopped(int a1, int a2, int a3, int *a4)
{
  int v4; // r4@1
  signed int result; // r0@2

  v4 = a1;
  switch ( a2 )
  {
    case 20:
      return j_j_j_mm_channel_get_queued_buf_count(a1, *(_DWORD *)a3);
    case 0:
      *a4 = j_mm_channel_add_stream(a1);
      goto LABEL_16;
    case 1:
      return j_j_j_mm_channel_del_stream(a1, a3);
    case 4:
      result = j_mm_channel_start(a1);
      if ( !result )
        *(_DWORD *)(v4 + 4) = 2;
      return result;
    case 2:
      return j_j_j_mm_channel_config_stream(a1, *(_DWORD *)a3, *(_DWORD *)(a3 + 4));
    case 3:
      return j_j_j_mm_channel_get_bundle_info((int *)a1, (_BYTE *)a3, a3);
    case 18:
      j_mm_channel_release(a1);
      goto LABEL_16;
    case 15:
      result = j_j_j_mm_channel_set_stream_parm(a1, (int *)a3);
      break;
    case 16:
      result = j_j_j_mm_channel_get_stream_parm(a1, (int *)a3);
      break;
    case 17:
      result = j_j_j_mm_channel_do_stream_action(a1, (int *)a3);
      break;
    case 13:
      result = j_j_j_mm_channel_map_stream_buf(a1, (int *)a3);
      break;
    case 14:
      result = j_j_j_mm_channel_unmap_stream_buf(a1, (int *)a3);
      break;
    default:
      _android_log_print(
        6,
        "mm-camera-intf",
        "%s: invalid state (%d) for evt (%d)",
        "mm_channel_fsm_fn_stopped",
        *(_DWORD *)(a1 + 4),
        a2,
        a3);
LABEL_16:
      result = 0;
      break;
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00005BE8) --------------------------------------------------------
int __fastcall mm_channel_superbuf_queue_deinit(int a1)
{
  pthread_mutex_t *v1; // r6@1
  int v2; // r5@1
  int v3; // r4@1
  int v4; // r7@3
  _DWORD *v5; // r3@3
  void *v6; // r0@3
  void *v7; // r0@5

  v1 = (pthread_mutex_t *)(a1 + 16);
  v2 = a1;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 16));
  v3 = *(_DWORD *)v2;
  while ( v3 != v2 )
  {
    v4 = *(_DWORD *)v3;
    v5 = *(_DWORD **)(v3 + 4);
    *(_DWORD *)(*(_DWORD *)v3 + 4) = v5;
    *v5 = *(_DWORD *)v3;
    *(_DWORD *)v3 = v3;
    *(_DWORD *)(v3 + 4) = v3;
    --*(_DWORD *)(v2 + 12);
    v6 = *(void **)(v3 + 8);
    if ( v6 )
      free(v6);
    v7 = (void *)v3;
    v3 = v4;
    free(v7);
  }
  *(_DWORD *)(v3 + 12) = 0;
  pthread_mutex_unlock(v1);
  pthread_mutex_destroy(v1);
  return 0;
}

//----- (00005C36) --------------------------------------------------------
int __fastcall mm_channel_stop(int a1)
{
  int v1; // r5@1
  int v2; // r3@1
  int v3; // r6@1
  int v4; // r8@1
  int v5; // r4@1
  int v6; // r1@2
  int v7; // r0@3
  char *v8; // lr@9
  char *v9; // r6@9
  int v10; // r6@10
  int v11; // r8@12
  int v12; // r1@14
  int v13; // r2@14
  int v14; // r3@14
  int i; // r5@15
  int v17; // [sp+0h] [bp-30h]@1
  char v18; // [sp+10h] [bp-20h]@6

  v1 = a1;
  memset(&v17, 0, 0x10u);
  v3 = 0;
  v4 = v1;
  v5 = 0;
  do
  {
    v6 = *(_DWORD *)(v4 + 340);
    if ( v6 )
    {
      v7 = j_mm_channel_util_get_stream_by_handler(v1, v6);
      if ( v7 )
      {
        v6 = *(_DWORD *)(*(_DWORD *)(v7 + 16) + 4);
        v2 = v5 + 1;
        if ( v6 == 7 )
          v3 = v5;
        *((_DWORD *)&v18 + v5 - 4) = v7;
        v5 = (unsigned __int8)v2;
      }
    }
    v4 += 448;
  }
  while ( v4 != v1 + 1792 );
  if ( v3 < v5 - 1 )
  {
    v8 = &v18 + 4 * (v5 - 1);
    v9 = &v18 + 4 * v3;
    v2 = *((_DWORD *)v8 - 4);
    v6 = *((_DWORD *)v9 - 4);
    *((_DWORD *)v8 - 4) = v6;
    *((_DWORD *)v9 - 4) = v2;
  }
  v10 = 0;
  while ( v10 < v5 )
  {
    v11 = *(&v17 + v10++);
    j_mm_stream_fsm_fn(v11, (int (*)(int))8, 0, 0);
    j_mm_stream_fsm_fn(v11, (int (*)(int))6, 0, 0);
  }
  if ( *(_BYTE *)(v1 + 12) == 1 )
  {
    j_mm_camera_cmd_thread_release(v1 + 88, v6, 1, v2);
    j_mm_camera_cmd_thread_release(v1 + 140, v12, v13, v14);
    j_mm_channel_superbuf_queue_deinit(v1 + 16);
    memset((void *)(v1 + 12), 0, 0x48u);
  }
  for ( i = 0; i < v5; ++i )
    j_mm_stream_fsm_fn(*(&v17 + i), (int (*)(int))4, 0, 0);
  return 0;
}

//----- (00005D18) --------------------------------------------------------
int __fastcall mm_channel_fsm_fn_active(int a1, int a2, int a3, int a4)
{
  int v4; // r5@1
  int v5; // r4@1
  int result; // r0@2
  const char *v7; // r1@15
  const char *v8; // r2@15
  const char *v9; // r3@15
  void *v10; // r0@21
  int v11; // r7@21

  v4 = a3;
  v5 = a1;
  switch ( a2 )
  {
    case 20:
      result = j_j_j_mm_channel_get_queued_buf_count(a1, *(_DWORD *)a3);
      break;
    case 5:
      result = j_mm_channel_stop(a1);
      *(_DWORD *)(v5 + 4) = 1;
      break;
    case 8:
      result = j_j_j_mm_channel_request_super_buf(a1, a3);
      break;
    case 9:
      result = j_j_j_mm_channel_cancel_super_buf_request(a1);
      break;
    case 10:
      result = j_j_j_mm_channel_flush_super_buf_queue(a1, a3);
      break;
    case 11:
      result = j_j_j_mm_channel_config_notify_mode(a1, a3);
      break;
    case 12:
      result = j_j_j_mm_channel_unprepare_snapshot(a1, a2, a3, a4);
      break;
    case 15:
      result = j_j_j_mm_channel_set_stream_parm(a1, (int *)a3);
      break;
    case 16:
      result = j_j_j_mm_channel_get_stream_parm(a1, (int *)a3);
      break;
    case 17:
      result = j_j_j_mm_channel_do_stream_action(a1, (int *)a3);
      break;
    case 13:
      if ( !a3 || *(_BYTE *)(a3 + 4) != 4 )
      {
        v7 = "mm-camera-intf";
        v8 = "%s: cannot map regualr stream buf in active state";
        v9 = "mm_channel_fsm_fn_active";
        goto LABEL_20;
      }
      result = j_j_j_mm_channel_map_stream_buf(a1, (int *)a3);
      break;
    case 14:
      if ( !a3 || *(_BYTE *)(a3 + 4) != 4 )
      {
        v7 = "mm-camera-intf";
        v8 = "%s: cannot unmap regualr stream buf in active state";
        v9 = "mm_channel_fsm_fn_active";
LABEL_20:
        _android_log_print(6, v7, v8, v9);
        goto LABEL_25;
      }
      result = j_j_j_mm_channel_unmap_stream_buf(a1, (int *)a3);
      break;
    case 19:
      _android_log_print(6, "mm-camera-intf", "MM_CHANNEL_EVT_AE_BRACKETTING");
      v10 = malloc(0x88u);
      v11 = (int)v10;
      if ( v10 )
      {
        memset(v10, 0, 0x88u);
        *(_DWORD *)v11 = 8;
        *(_DWORD *)(v11 + 4) = 0;
        *(_DWORD *)(v11 + 8) = v4;
        sub_5390(v5 + 88, v11);
        sub_53D4(v5 + 120);
        result = 0;
      }
      else
      {
        _android_log_print(6, "mm-camera-intf", "%s: No memory for mm_camera_node_t", "mm_channel_proc_general_cmd");
        result = -1;
      }
      break;
    default:
      _android_log_print(
        6,
        "mm-camera-intf",
        "%s: invalid state (%d) for evt (%d), in(%p), out(%p)",
        "mm_channel_fsm_fn_active",
        *(_DWORD *)(a1 + 4),
        a2,
        a3,
        a4);
LABEL_25:
      result = 0;
      break;
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00005EC0) --------------------------------------------------------
signed int __fastcall mm_channel_fsm_fn(int a1, int a2, int a3, int *a4)
{
  int v4; // r4@1
  signed int v5; // r0@2
  signed int v6; // r5@6

  v4 = a1;
  switch ( *(_DWORD *)(a1 + 4) )
  {
    case 0:
      v5 = j_mm_channel_fsm_fn_notused(a1, a2, a3, (int)a4);
      goto LABEL_6;
    case 1:
      v5 = j_mm_channel_fsm_fn_stopped(a1, a2, a3, a4);
      goto LABEL_6;
    case 2:
      v5 = j_mm_channel_fsm_fn_active(a1, a2, a3, (int)a4);
      goto LABEL_6;
    case 3:
      v5 = j_mm_channel_fsm_fn_paused(a1, a2, a3, (int)a4);
LABEL_6:
      v6 = v5;
      break;
    default:
      v6 = -1;
      break;
  }
  pthread_mutex_unlock((pthread_mutex_t *)(v4 + 8));
  return v6;
}

//----- (00005F04) --------------------------------------------------------
int __fastcall mm_channel_util_seq_comp_w_rollover(unsigned int a1, unsigned int a2)
{
  int result; // r0@3

  if ( a1 > a2 )
  {
    LOBYTE(result) = 1;
  }
  else if ( a1 >= a2 )
  {
    LOBYTE(result) = 0;
  }
  else
  {
    LOBYTE(result) = -1;
  }
  return (char)result;
}

//----- (00005F1A) --------------------------------------------------------
int __fastcall mm_channel_superbuf_dequeue_internal(int a1, int a2)
{
  _DWORD *v2; // r3@1
  int v3; // r4@2
  _DWORD *v4; // r2@7

  v2 = *(_DWORD **)a1;
  if ( *(_DWORD *)a1 == a1 )
  {
    v3 = 0;
  }
  else
  {
    v3 = v2[2];
    if ( v3 )
    {
      if ( a2 != 1 || *(_BYTE *)(v3 + 52) )
      {
        v4 = (_DWORD *)v2[1];
        *(_DWORD *)(*v2 + 4) = v4;
        *v4 = *v2;
        *v2 = v2;
        v2[1] = v2;
        --*(_DWORD *)(a1 + 12);
        if ( *(_BYTE *)(v3 + 52) == 1 )
          --*(_DWORD *)(a1 + 56);
        free(v2);
      }
      else
      {
        v3 = *(_BYTE *)(v3 + 52);
      }
    }
  }
  return v3;
}

//----- (00005F64) --------------------------------------------------------
int __fastcall mm_channel_superbuf_dequeue(int a1)
{
  pthread_mutex_t *v1; // r4@1
  int v2; // r5@1
  int v3; // r5@1

  v1 = (pthread_mutex_t *)(a1 + 16);
  v2 = a1;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 16));
  v3 = j_mm_channel_superbuf_dequeue_internal(v2, 1);
  pthread_mutex_unlock(v1);
  return v3;
}

//----- (00005F86) --------------------------------------------------------
int __fastcall mm_channel_superbuf_bufdone_overflow(int a1, int a2)
{
  int v2; // r8@1
  int v3; // r4@1
  pthread_mutex_t *v4; // r7@2
  _DWORD *v5; // r5@4
  signed int i; // r6@5
  int *v7; // r1@7

  v2 = a1;
  v3 = a2;
  if ( *(_DWORD *)(a2 + 40) != 1 )
  {
    v4 = (pthread_mutex_t *)(a2 + 16);
    pthread_mutex_lock((pthread_mutex_t *)(a2 + 16));
    while ( *(_DWORD *)(v3 + 56) > (unsigned int)*(_BYTE *)(v3 + 44) )
    {
      v5 = (_DWORD *)j_mm_channel_superbuf_dequeue_internal(v3, 1);
      if ( v5 )
      {
        for ( i = 0; i < *(_BYTE *)v5; ++i )
        {
          v7 = (int *)v5[3 * i + 3];
          if ( v7 )
            j_mm_channel_qbuf(v2, v7);
        }
        free(v5);
      }
    }
    pthread_mutex_unlock(v4);
  }
  return 0;
}

//----- (00005FEA) --------------------------------------------------------
int __fastcall mm_channel_superbuf_skip(int a1, int a2)
{
  int v2; // r8@1
  int v3; // r4@1
  pthread_mutex_t *v4; // r7@2
  _DWORD *v5; // r5@4
  signed int i; // r6@5
  int *v7; // r1@7

  v2 = a1;
  v3 = a2;
  if ( *(_DWORD *)(a2 + 40) != 1 )
  {
    v4 = (pthread_mutex_t *)(a2 + 16);
    pthread_mutex_lock((pthread_mutex_t *)(a2 + 16));
    while ( *(_DWORD *)(v3 + 56) > (unsigned int)*(_BYTE *)(v3 + 45) )
    {
      v5 = (_DWORD *)j_mm_channel_superbuf_dequeue_internal(v3, 1);
      if ( v5 )
      {
        for ( i = 0; i < *(_BYTE *)v5; ++i )
        {
          v7 = (int *)v5[3 * i + 3];
          if ( v7 )
            j_mm_channel_qbuf(v2, v7);
        }
        free(v5);
      }
    }
    pthread_mutex_unlock(v4);
  }
  return 0;
}

//----- (0000604E) --------------------------------------------------------
int __fastcall mm_channel_superbuf_flush(int a1, int a2)
{
  pthread_mutex_t *v2; // r7@1
  int v3; // r6@1
  int v4; // r8@1
  _DWORD *i; // r4@1
  signed int j; // r5@3
  int *v7; // r1@5

  v2 = (pthread_mutex_t *)(a2 + 16);
  v3 = a2;
  v4 = a1;
  pthread_mutex_lock((pthread_mutex_t *)(a2 + 16));
  for ( i = (_DWORD *)j_mm_channel_superbuf_dequeue_internal(v3, 0);
        i;
        i = (_DWORD *)j_mm_channel_superbuf_dequeue_internal(v3, 0) )
  {
    for ( j = 0; j < *(_BYTE *)i; ++j )
    {
      v7 = (int *)i[3 * j + 3];
      if ( v7 )
        j_mm_channel_qbuf(v4, v7);
    }
    free(i);
  }
  pthread_mutex_unlock(v2);
  return 0;
}

//----- (000060A8) --------------------------------------------------------
int __fastcall mm_channel_superbuf_flush_matched(int a1, int a2)
{
  pthread_mutex_t *v2; // r7@1
  int v3; // r6@1
  int v4; // r8@1
  _DWORD *i; // r4@1
  signed int j; // r5@3
  int *v7; // r1@5

  v2 = (pthread_mutex_t *)(a2 + 16);
  v3 = a2;
  v4 = a1;
  pthread_mutex_lock((pthread_mutex_t *)(a2 + 16));
  for ( i = (_DWORD *)j_mm_channel_superbuf_dequeue_internal(v3, 1);
        i;
        i = (_DWORD *)j_mm_channel_superbuf_dequeue_internal(v3, 1) )
  {
    for ( j = 0; j < *(_BYTE *)i; ++j )
    {
      v7 = (int *)i[3 * j + 3];
      if ( v7 )
        j_mm_channel_qbuf(v4, v7);
    }
    free(i);
  }
  pthread_mutex_unlock(v2);
  return 0;
}

//----- (00006104) --------------------------------------------------------
signed int __fastcall mm_channel_handle_metadata(int a1, int a2, int *a3)
{
  int v3; // r6@1
  int v4; // r4@1
  int *v5; // r5@1
  int v6; // r0@1
  const char *v7; // r1@2
  const char *v8; // r2@2
  const char *v9; // r3@2
  int v10; // r3@3
  int v12; // r5@8
  const char *v13; // r1@9
  const char *v14; // r2@9
  const char *v15; // r3@9
  _BYTE *v16; // r0@25
  int v17; // [sp+0h] [bp-20h]@1
  int v18; // [sp+0h] [bp-20h]@2
  int v19; // [sp+4h] [bp-1Ch]@1
  int *v20; // [sp+8h] [bp-18h]@1

  v17 = a1;
  v19 = a2;
  v20 = a3;
  v3 = a2;
  v4 = a1;
  v5 = a3;
  v6 = j_mm_channel_util_get_stream_by_handler(a1, *a3);
  if ( !v6 )
  {
    v7 = "mm-camera-intf";
    v18 = *v5;
    v8 = "%s: Invalid Stream Object for stream_id = %d";
    v9 = "mm_channel_handle_metadata";
LABEL_5:
    _android_log_print(6, v7, v8, v9, v18, v19, v20);
    return -1;
  }
  v10 = *(_DWORD *)(v6 + 16);
  if ( !v10 )
  {
    v7 = "mm-camera-intf";
    v8 = "%s: NULL stream info for stream_id = %d";
    v9 = "mm_channel_handle_metadata";
    v18 = *v5;
    goto LABEL_5;
  }
  if ( *(_DWORD *)(v10 + 4) == 7 )
  {
    v12 = *(_DWORD *)(v5[2] + 512);
    if ( !v12 )
    {
      v13 = "mm-camera-intf";
      v14 = "%s: NULL metadata buffer for metadata stream";
      v15 = "mm_channel_handle_metadata";
LABEL_14:
      _android_log_print(6, v13, v14, v15, v17, v19, v20);
      return -1;
    }
    if ( *(_BYTE *)(v12 + 4888) )
    {
      if ( *(_DWORD *)(v12 + 4892) == 1 )
      {
        if ( *(_BYTE *)(v12 + 4908) )
        {
          v13 = "mm-camera-intf";
          v14 = "%s: prep_snapshot_done or zsl hdr and good_idx_range shouldn't be valid at the same time";
          v15 = "mm_channel_handle_metadata";
          goto LABEL_14;
        }
        *(_DWORD *)(v3 + 52) += 100;
        j_mm_channel_superbuf_flush(v4, v3);
        *(_BYTE *)(v4 + 2138) = 1;
      }
      else
      {
        *(_BYTE *)(v4 + 2138) = 0;
        j_mm_channel_superbuf_flush(v4, v3);
        if ( *(_BYTE *)(v12 + 4908) )
        {
          *(_DWORD *)(v3 + 52) = *(_DWORD *)(v12 + 4912);
          j_mm_channel_superbuf_flush(v4, v3);
          *(_BYTE *)(v4 + 2142) = 1;
        }
      }
      *(_BYTE *)(v4 + 2136) = 0;
    }
    else if ( !*(_BYTE *)(v4 + 2139) || *(_BYTE *)(v12 + 4908) )
    {
      if ( *(_BYTE *)(v12 + 4908) )
      {
        *(_DWORD *)(v3 + 52) = *(_DWORD *)(v12 + 4912);
        j_mm_channel_superbuf_flush(v4, v3);
        *(_BYTE *)(v4 + 2142) = 1;
      }
    }
    else
    {
      j_mm_channel_superbuf_flush_matched(v4, v3);
    }
    if ( *(_BYTE *)(v12 + 4696) )
    {
      v16 = *(_BYTE **)(v4 + 2132);
      if ( *v16 )
      {
        if ( *(_DWORD *)(v12 + 4700) == 32 )
        {
          *(_BYTE *)(v4 + 2136) = 1;
          j_mm_channel_superbuf_flush(v4, v3);
        }
        else
        {
          *(_BYTE *)(v4 + 2136) = 0;
          *v16 = 0;
        }
      }
      else if ( *(_BYTE *)(v4 + 2136) == 1 && *(_DWORD *)(v12 + 4700) != 32 )
      {
        *(_BYTE *)(v4 + 2136) = 0;
      }
    }
    if ( *(_BYTE *)(v12 + 90476) )
    {
      *(_DWORD *)(v3 + 52) = 1;
      j_mm_channel_superbuf_flush(v4, v3);
    }
  }
  return 0;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (000062B4) --------------------------------------------------------
signed int __fastcall mm_channel_superbuf_comp_and_enqueue(int a1, int a2, int a3)
{
  int v3; // r4@1
  unsigned int v4; // r1@1
  int v5; // r3@1
  int v6; // r5@1
  int v7; // r7@1
  unsigned int v8; // r2@1
  unsigned int v9; // r9@2
  int v10; // t1@3
  int v12; // r10@11
  _DWORD *v13; // r6@11
  int v14; // r11@11
  unsigned int v15; // r2@11
  int v16; // r8@13
  unsigned int v17; // r1@15
  unsigned int v18; // r0@15
  void *v19; // r10@23
  int v20; // ST0C_4@24
  int v21; // r1@24
  int v22; // r2@24
  int v23; // r9@25
  int v24; // r0@25
  int v25; // r1@32
  int v26; // r2@32
  int v27; // r5@33
  int v28; // r8@33
  char *v29; // r6@35
  unsigned int i; // r8@36
  int v31; // lr@38
  void *v32; // r0@41
  int v33; // r8@41
  _DWORD *v34; // r5@41
  int v35; // r1@41
  char *v36; // r8@45
  unsigned int v37; // r11@45
  signed int v38; // r12@45
  int v39; // lr@47
  signed int v40; // ST0C_4@48
  _DWORD *v41; // r2@50
  void *v42; // r8@51
  void *v43; // r0@51
  void *v44; // r6@51
  char v45; // r1@53
  int v46; // r1@53
  int v47; // r2@53
  int v48; // r11@53
  _DWORD *v49; // r3@54
  _DWORD *v50; // r2@55
  int v51; // r6@56
  int v52; // r5@57
  int v53; // r10@57
  int v54; // r7@57

  v3 = a2;
  v5 = a2 + 20;
  v4 = *(_BYTE *)(a2 + 20);
  v6 = a3;
  v7 = a1;
  v8 = 0;
  do
  {
    v9 = v8;
    if ( v8 >= v4 )
      break;
    ++v8;
    v10 = *(_DWORD *)(v5 + 4);
    v5 += 4;
  }
  while ( *(_DWORD *)v6 != v10 );
  if ( v9 == v4 )
  {
    _android_log_print(
      6,
      "mm-camera-intf",
      "%s: buf from stream (%d) not bundled",
      "mm_channel_superbuf_comp_and_enqueue",
      *(_DWORD *)v6);
LABEL_7:
    j_mm_channel_qbuf(v7, *(int **)(v6 + 8));
    return -1;
  }
  if ( j_mm_channel_handle_metadata(a1, v3, (int *)v6) < 0 )
    goto LABEL_7;
  if ( *(_BYTE *)(v7 + 2136) == 1
    || j_mm_channel_util_seq_comp_w_rollover(*(_DWORD *)(v6 + 4), *(_DWORD *)(v3 + 52)) < 0 )
  {
    j_mm_channel_qbuf(v7, *(int **)(v6 + 8));
    return 0;
  }
  v12 = 0;
  v13 = 0;
  pthread_mutex_lock((pthread_mutex_t *)(v3 + 16));
  v14 = *(_DWORD *)v3;
  v15 = 0;
  while ( 1 )
  {
    do
    {
      if ( v14 == v3 )
      {
        if ( *(_BYTE *)(v14 + 47) < v15 )
        {
          if ( !v13 )
            goto LABEL_60;
          v36 = (char *)v13[2];
          v37 = 0;
          v38 = 12;
          while ( (unsigned __int8)*v36 > v37 )
          {
            v39 = (int)&v36[v38 * v37];
            if ( *(_DWORD *)(v39 + 8) )
            {
              v40 = v38;
              j_mm_channel_qbuf(v7, *(int **)(v39 + 12));
              v38 = v40;
            }
            ++v37;
          }
          --*(_DWORD *)(v3 + 12);
          v41 = (_DWORD *)v13[1];
          *(_DWORD *)(*v13 + 4) = v41;
          *v41 = *v13;
          free(v13);
          free(v36);
        }
        v42 = malloc(0x3Cu);
        v43 = malloc(0xCu);
        v44 = v43;
        if ( v42 )
        {
          v43 = v42;
          if ( v44 )
          {
            memset(v42, 0, 0x3Cu);
            memset(v44, 0, 0xCu);
            v45 = *(_BYTE *)(v3 + 20);
            *((_DWORD *)v44 + 2) = v42;
            *(_BYTE *)v42 = v45;
            v46 = *(_DWORD *)(v6 + 4);
            v47 = *(_DWORD *)(v6 + 8);
            v48 = (int)v42 + 12 * v9 + 4;
            *(_DWORD *)v48 = *(_DWORD *)v6;
            *(_DWORD *)(v48 + 4) = v46;
            *(_DWORD *)(v48 + 8) = v47;
            *((_DWORD *)v42 + 14) = v46;
            if ( v12 )
            {
              *(_DWORD *)v44 = v12;
              v49 = *(_DWORD **)(v12 + 4);
              *((_DWORD *)v44 + 1) = v49;
              *v49 = v44;
              *(_DWORD *)(v12 + 4) = v44;
            }
            else
            {
              v50 = *(_DWORD **)(v3 + 4);
              *(_DWORD *)v44 = v3;
              *(_DWORD *)(v3 + 4) = v44;
              *((_DWORD *)v44 + 1) = v50;
              *v50 = v44;
            }
            v51 = *(_BYTE *)(v3 + 20);
            ++*(_DWORD *)(v3 + 12);
            if ( v51 == 1 )
            {
              v52 = *(_DWORD *)(v6 + 4);
              v53 = *(_BYTE *)(v3 + 46);
              v54 = *(_DWORD *)(v3 + 56) + 1;
              *((_BYTE *)v42 + 52) = 1;
              *(_DWORD *)(v3 + 56) = v54;
              *(_DWORD *)(v3 + 52) = v52 + v53;
            }
            goto LABEL_30;
          }
          goto LABEL_59;
        }
        if ( v43 )
LABEL_59:
          free(v43);
LABEL_60:
        j_mm_channel_qbuf(v7, *(int **)(v6 + 8));
        goto LABEL_30;
      }
      v16 = *(_DWORD *)(v14 + 8);
    }
    while ( !v16 );
    if ( *(_BYTE *)(v16 + 52) )
      goto LABEL_22;
    v17 = *(_DWORD *)(v6 + 4);
    v18 = *(_DWORD *)(v16 + 56);
    if ( v17 == v18 )
      break;
    v15 = (unsigned __int8)(v15 + 1);
    if ( !v13 && v18 < v17 )
      v13 = (_DWORD *)v14;
    if ( !v12 && v18 > v17 )
      v12 = v14;
LABEL_22:
    v14 = *(_DWORD *)v14;
  }
  v19 = v13;
  if ( *(_DWORD *)(v16 + 12 * v9 + 8) )
  {
    v20 = v16 + 12 * v9 + 4;
    j_mm_channel_qbuf(v7, *(int **)(v16 + 12 * v9 + 12));
    v21 = *(_DWORD *)(v6 + 4);
    v22 = *(_DWORD *)(v6 + 8);
    *(_DWORD *)v20 = *(_DWORD *)v6;
    *(_DWORD *)(v20 + 4) = v21;
    *(_DWORD *)(v20 + 8) = v22;
    _android_log_print(
      6,
      "mm-camera-intf",
      " %s : **** ERROR CASE Same stream is already in queue! **** ",
      "mm_channel_superbuf_comp_and_enqueue");
  }
  else
  {
    v25 = *(_DWORD *)(v6 + 4);
    v26 = *(_DWORD *)(v6 + 8);
    *(_DWORD *)(v16 + 12 * v9 + 4) = *(_DWORD *)v6;
    *(_DWORD *)(v16 + 12 * v9 + 8) = v25;
    *(_DWORD *)(v16 + 12 * v9 + 12) = v26;
  }
  v23 = *(_BYTE *)v16;
  v24 = v16;
  *(_BYTE *)(v16 + 52) = 1;
  while ( v24 != v16 + 12 * v23 )
  {
    v24 += 12;
    if ( !*(_DWORD *)(v24 - 4) )
    {
      *(_BYTE *)(v16 + 52) = 0;
      break;
    }
  }
  if ( *(_BYTE *)(v16 + 52) )
  {
    v27 = *(_DWORD *)(v6 + 4);
    v28 = *(_BYTE *)(v3 + 46);
    ++*(_DWORD *)(v3 + 56);
    *(_DWORD *)(v3 + 52) = v27 + v28;
    if ( v13 )
    {
      while ( v19 != (void *)v14 )
      {
        v29 = (char *)*((_DWORD *)v19 + 2);
        if ( !v29 )
        {
          _android_log_print(
            6,
            "mm-camera-intf",
            " %s : Invalid superbuf in queue!",
            "mm_channel_superbuf_comp_and_enqueue");
          break;
        }
        for ( i = 0; (unsigned __int8)*v29 > i; ++i )
        {
          v31 = (int)&v29[12 * i];
          if ( *(_DWORD *)(v31 + 8) )
            j_mm_channel_qbuf(v7, *(int **)(v31 + 12));
        }
        v32 = v19;
        --*(_DWORD *)(v3 + 12);
        v33 = *(_DWORD *)v19;
        v34 = (_DWORD *)*((_DWORD *)v19 + 1);
        *(_DWORD *)(v33 + 4) = v34;
        v35 = *(_DWORD *)v19;
        v19 = (void *)v33;
        *v34 = v35;
        free(v32);
        free(v29);
      }
    }
  }
LABEL_30:
  pthread_mutex_unlock((pthread_mutex_t *)(v3 + 16));
  return 0;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (000065C0) --------------------------------------------------------
void __fastcall sub_65C0(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  int v4; // r3@2
  int v5; // r7@2
  int v6; // r1@5
  int v7; // r2@5
  int v8; // r6@6
  char v9; // r12@7
  int v10; // r5@25
  int v11; // r8@28
  int v12; // r1@31
  char *v13; // r6@31
  int v14; // r2@33
  int v15; // r3@38
  void *v16; // r0@39
  unsigned int v17; // r5@39
  unsigned int v18; // r3@40
  int v19; // lr@42
  int v20; // r12@42
  int v21; // r3@43
  signed int v22; // r1@44
  signed int v23; // ST08_4@46
  signed int i; // r2@47
  int v25; // r5@48
  signed int v26; // ST08_4@49

  v2 = a1;
  v3 = a2;
  if ( !a2 )
    return;
  v4 = *(_DWORD *)a1;
  v5 = a2 + 16;
  if ( *(_DWORD *)a1 )
  {
    if ( v4 == 3 )
    {
      *(_DWORD *)(a2 + 84) = *(_DWORD *)(a1 + 4);
      j_mm_channel_superbuf_skip(a2, a2 + 16);
      if ( *(_DWORD *)(v3 + 84) )
      {
        v8 = *(_DWORD *)(v3 + 2136);
        if ( (v8 & 0xFFFF00) == 0x10000 )
        {
          j_mm_camera_start_zsl_snapshot(*(_DWORD *)(v3 + 2132), v6, v7);
          v9 = 1;
          *(_BYTE *)(v3 + 2137) = 1;
          *(_BYTE *)(v3 + 2138) = 0;
        }
        else
        {
          if ( (v8 & 0xFF00FF00) != 0x1000000 )
          {
            v9 = 0;
            goto LABEL_12;
          }
          j_mm_camera_start_zsl_snapshot(*(_DWORD *)(v3 + 2132), v6, 0x1000000);
          v9 = 1;
          *(_BYTE *)(v3 + 2137) = 1;
        }
        *(_BYTE *)(v3 + 2142) = 0;
LABEL_12:
        *(_BYTE *)(v3 + 2141) = v9;
        goto LABEL_28;
      }
      if ( *(_BYTE *)(v3 + 2137) == 1 )
      {
        j_mm_camera_stop_zsl_snapshot(*(_DWORD *)(v3 + 2132), v6, v7);
        *(_BYTE *)(v3 + 2137) = 0;
      }
      else if ( !*(_BYTE *)(v3 + 2141) )
      {
        *(_BYTE *)(v3 + 2141) = 1;
      }
    }
    else
    {
      if ( v4 == 5 )
      {
        *(_DWORD *)(a2 + 56) = *(_DWORD *)(a1 + 4);
        goto LABEL_28;
      }
      if ( v4 == 6 )
      {
        *(_DWORD *)(a2 + 68) = *(_DWORD *)(a1 + 4);
        j_j_j_mm_channel_superbuf_flush(a2, v5);
        return;
      }
      if ( v4 != 7 )
      {
        if ( v4 == 8 )
        {
          _android_log_print(
            6,
            "mm-camera-intf",
            "%s:%d] MM_CAMERA_CMD_TYPE_GENERAL",
            "mm_channel_process_stream_buf",
            281);
          if ( *(_DWORD *)(v2 + 4) )
          {
            _android_log_print(
              6,
              "mm-camera-intf",
              "%s:%d] Error: Invalid command",
              "mm_channel_process_stream_buf",
              304);
          }
          else
          {
            v10 = *(_BYTE *)(v2 + 8);
            _android_log_print(
              6,
              "mm-camera-intf",
              "%s:%d] MM_CAMERA_GENERIC_CMDTYPE_AE_BRACKETTING %d",
              "mm_channel_process_stream_buf",
              285,
              (char)v10);
            j_mm_channel_superbuf_flush(v3, v5);
            if ( v10 )
            {
              _android_log_print(
                6,
                "mm-camera-intf",
                "%s:%d] need AE bracketting, start zsl snapshot",
                "mm_channel_process_stream_buf",
                288);
              *(_BYTE *)(v3 + 2140) = 1;
              *(_BYTE *)(v3 + 2139) = 1;
              *(_DWORD *)(v3 + 68) = 0;
            }
          }
        }
        goto LABEL_28;
      }
    }
    *(_BYTE *)(v3 + 2138) = 0;
    goto LABEL_28;
  }
  j_mm_channel_superbuf_comp_and_enqueue(a2, a2 + 16, a1 + 4);
LABEL_28:
  v11 = *(_DWORD *)(v3 + 56);
  j_mm_channel_superbuf_bufdone_overflow(v3, v5);
  if ( !*(_BYTE *)(v3 + 2137) || *(_BYTE *)(v3 + 2142) )
  {
    while ( *(_DWORD *)(v3 + 84) || v11 == 1 )
    {
      v13 = (char *)j_mm_channel_superbuf_dequeue(v5);
      if ( !v13 )
        break;
      if ( !v11 )
      {
        v14 = *(_DWORD *)(v3 + 84);
        *(_DWORD *)(v3 + 84) = v14 - 1;
        if ( v14 == 1 )
        {
          if ( *(_BYTE *)(v3 + 2137) == 1 )
          {
            j_mm_camera_stop_zsl_snapshot(*(_DWORD *)(v3 + 2132), v12, 1);
            *(_BYTE *)(v3 + 2137) = 0;
            *(_BYTE *)(v3 + 2142) = 0;
            *(_BYTE *)(v3 + 2139) = 0;
          }
          else if ( !*(_BYTE *)(v3 + 2141) )
          {
            *(_BYTE *)(v3 + 2141) = 1;
          }
        }
      }
      v15 = *(_DWORD *)(v3 + 76);
      if ( v15 )
      {
        v16 = malloc(0x88u);
        v17 = (unsigned int)v16;
        if ( v16 )
        {
          memset(v16, 0, 0x88u);
          *(_DWORD *)v17 = 4;
          v18 = 0;
          *(_BYTE *)(v17 + 12) = *v13;
          while ( (unsigned __int8)*v13 > v18 )
          {
            v19 = (int)&v13[12 * v18];
            v20 = v17 + 4 * v18++;
            *(_DWORD *)(v20 + 16) = *(_DWORD *)(v19 + 12);
          }
          v21 = *(_DWORD *)(*(_DWORD *)(v3 + 2132) + 4);
          *(_DWORD *)(v17 + 8) = *(_DWORD *)v3;
          *(_DWORD *)(v17 + 4) = v21;
          sub_5390(v3 + 140, v17);
          sub_53D4(v3 + 172);
        }
        else
        {
          _android_log_print(6, "mm-camera-intf", "%s: No memory for mm_camera_node_t", "mm_channel_process_stream_buf");
          v22 = 12;
          while ( (unsigned __int8)*v13 > v17 )
          {
            v23 = v22;
            j_mm_channel_qbuf(v3, *(int **)&v13[v22 * v17 + 12]);
            v22 = v23;
            ++v17;
          }
        }
      }
      else
      {
        for ( i = 12; ; i = v26 )
        {
          v25 = v15 + 1;
          if ( (unsigned __int8)*v13 <= (unsigned int)(unsigned __int8)v15 )
            break;
          v26 = i;
          j_mm_channel_qbuf(v3, *(int **)&v13[i * (unsigned __int8)v15 + 12]);
          v15 = v25;
        }
      }
      free(v13);
    }
  }
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00006894) --------------------------------------------------------
unsigned int __fastcall sub_6894(unsigned int a1, int a2)
{
  unsigned int v2; // r2@4
  unsigned int v3; // r3@4

  if ( a1 )
    a1 = (a1 + 127) & 0xFFFFFF80;
  if ( a2 )
  {
    v2 = (a2 + 31) & 0xFFFFFFE0;
    v3 = (((a2 + 1) >> 1) + 15) & 0xFFFFFFF0;
  }
  else
  {
    v2 = 0;
    v3 = 0;
  }
  return (a1 * (v3 + v2) + 24575) & 0xFFFFF000;
}

//----- (000068CC) --------------------------------------------------------
int __fastcall mm_stream_handle_rcvd_buf(int result, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r8@1
  _DWORD *v6; // r0@2
  _DWORD *v7; // r6@2
  int v8; // r7@3
  int v9; // r1@3
  int v10; // r2@3
  int v11; // r6@3
  _DWORD *v12; // r0@6
  _DWORD *v13; // r8@6
  int v14; // r12@7
  int v15; // r1@7
  int v16; // r2@7

  v3 = result;
  v4 = a2;
  v5 = a3;
  if ( *(_BYTE *)(result + 420) )
  {
    v6 = malloc(0x88u);
    v7 = v6;
    if ( v6 )
    {
      memset(v6, 0, 0x88u);
      *v7 = 0;
      v8 = (int)(v7 + 1);
      v9 = *(_DWORD *)(v4 + 4);
      v10 = *(_DWORD *)(v4 + 8);
      *(_DWORD *)v8 = *(_DWORD *)v4;
      *(_DWORD *)(v8 + 4) = v9;
      *(_DWORD *)(v8 + 8) = v10;
      sub_5390(*(_DWORD *)(v3 + 416) + 88, (int)v7);
      v11 = *(_DWORD *)(v3 + 416);
      pthread_mutex_lock((pthread_mutex_t *)(v11 + 124));
      ++*(_DWORD *)(v11 + 120);
      pthread_cond_signal((pthread_cond_t *)(v11 + 128));
      result = pthread_mutex_unlock((pthread_mutex_t *)(v11 + 124));
    }
    else
    {
      result = _android_log_print(
                 6,
                 "mm-camera-intf",
                 "%s: No memory for mm_camera_node_t",
                 "mm_stream_handle_rcvd_buf");
    }
  }
  if ( v5 )
  {
    v12 = malloc(0x88u);
    v13 = v12;
    if ( v12 )
    {
      memset(v12, 0, 0x88u);
      *v13 = 0;
      v14 = (int)(v13 + 1);
      v15 = *(_DWORD *)(v4 + 4);
      v16 = *(_DWORD *)(v4 + 8);
      *(_DWORD *)v14 = *(_DWORD *)v4;
      *(_DWORD *)(v14 + 4) = v15;
      *(_DWORD *)(v14 + 8) = v16;
      sub_5390(v3 + 296, (int)v13);
      pthread_mutex_lock((pthread_mutex_t *)(v3 + 332));
      ++*(_DWORD *)(v3 + 328);
      pthread_cond_signal((pthread_cond_t *)(v3 + 336));
      result = j_j_pthread_mutex_unlock((pthread_mutex_t *)(v3 + 332));
    }
    else
    {
      result = j_j___android_log_print(6, (int)"mm-camera-intf", "%s: No memory for mm_camera_node_t");
    }
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (000069CC) --------------------------------------------------------
int __fastcall mm_stream_release(int a1)
{
  int v1; // r4@1
  int v2; // r0@1

  v1 = a1;
  v2 = *(_DWORD *)(a1 + 8);
  if ( v2 > 0 )
    close(v2);
  pthread_mutex_destroy((pthread_mutex_t *)(v1 + 400));
  pthread_mutex_destroy((pthread_mutex_t *)(v1 + 348));
  memset((void *)v1, 0, 0x1C0u);
  return 0;
}

//----- (000069FC) --------------------------------------------------------
int __fastcall mm_stream_streamon(int a1)
{
  int v1; // r4@1
  int v2; // r2@1
  int v3; // r0@1
  int v4; // r1@1
  int result; // r0@1
  int v6; // r0@2
  int v7; // r5@2
  int v8; // r2@3
  int v9; // [sp+14h] [bp-1Ch]@1

  v1 = a1;
  v2 = *(_DWORD *)(a1 + 12);
  v3 = *(_DWORD *)a1;
  v4 = *(_DWORD *)(v1 + 8);
  v9 = 9;
  _android_log_print(
    6,
    "mm-camera-intf",
    "%s: E, my_handle = 0x%x, fd = %d, state = %d",
    "mm_stream_streamon",
    v3,
    v4,
    v2);
  result = j_mm_camera_poll_thread_add_poll_fd(
             (_DWORD *)(*(_DWORD *)(v1 + 416) + 192),
             *(_DWORD *)v1,
             *(_DWORD *)(v1 + 8),
             (int)sub_6C40,
             v1);
  if ( result >= 0 )
  {
    v6 = ioctl(*(_DWORD *)(v1 + 8), 0x40045612u, &v9);
    v7 = v6;
    if ( v6 < 0 )
    {
      _android_log_print(6, "mm-camera-intf", "%s: ioctl VIDIOC_STREAMON failed: rc=%d\n", "mm_stream_streamon", v6);
      j_mm_camera_poll_thread_del_poll_fd((_DWORD *)(*(_DWORD *)(v1 + 416) + 192), *(_DWORD *)v1, v8);
    }
    result = v7;
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00006A88) --------------------------------------------------------
int __fastcall mm_stream_streamoff(int *a1)
{
  int *v1; // r4@1
  int v2; // r0@1
  int v3; // r2@1
  int v4; // r0@1
  int v5; // r4@1
  int *v6; // r0@2
  char *v7; // r0@2
  signed int v9; // [sp+14h] [bp-1Ch]@1

  v1 = a1;
  v2 = *a1;
  v9 = 9;
  _android_log_print(
    6,
    "mm-camera-intf",
    "%s: E, my_handle = 0x%x, fd = %d, state = %d",
    "mm_stream_streamoff",
    v2,
    v1[2],
    v1[3]);
  j_mm_camera_poll_thread_del_poll_fd((_DWORD *)(v1[104] + 192), *v1, v3);
  v4 = ioctl(v1[2], 0x40045613u, &v9);
  v5 = v4;
  if ( v4 < 0 )
  {
    v6 = (int *)_errno(v4);
    v7 = strerror(*v6);
    _android_log_print(6, "mm-camera-intf", "%s: STREAMOFF failed: %s\n", "mm_stream_streamoff", v7);
  }
  return v5;
}
// 2FC0: using guessed type int __fastcall _errno(_DWORD);
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00006B08) --------------------------------------------------------
int __fastcall mm_stream_read_msm_frame(int a1, int a2, int a3)
{
  int v3; // r7@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r0@1
  int v7; // r7@1
  const char *v8; // r1@2
  const char *v9; // r2@2
  const char *v10; // r3@2
  int v11; // r1@3
  int v12; // r0@3
  int v13; // r8@3
  int v14; // r6@3
  bool v15; // r3@4
  int (__fastcall *v16)(int, _DWORD); // r6@6
  int v18; // [sp+0h] [bp-250h]@2
  unsigned __int8 s; // [sp+Ch] [bp-244h]@1
  signed int v20; // [sp+10h] [bp-240h]@1
  int v21; // [sp+20h] [bp-230h]@3
  int v22; // [sp+24h] [bp-22Ch]@3
  int v23; // [sp+38h] [bp-218h]@3
  signed int v24; // [sp+3Ch] [bp-214h]@1
  char *v25; // [sp+40h] [bp-210h]@1
  int v26; // [sp+44h] [bp-20Ch]@1
  int v27; // [sp+4Ch] [bp-204h]@3
  char v28; // [sp+50h] [bp-200h]@1

  v3 = a3;
  v4 = a1;
  v5 = a2;
  memset(&s, 0, 0x44u);
  v24 = 2;
  v25 = &v28;
  v6 = *(_DWORD *)(v4 + 8);
  v26 = v3;
  v20 = 9;
  v7 = ioctl(v6, 0xC0445611, &s);
  if ( v7 < 0 )
  {
    v8 = "mm-camera-intf";
    v18 = v7;
    v9 = "%s: VIDIOC_DQBUF ioctl call failed (rc=%d)\n";
    v10 = "mm_stream_read_msm_frame";
LABEL_9:
    _android_log_print(6, v8, v9, v10, v18);
    return v7;
  }
  pthread_mutex_lock((pthread_mutex_t *)(v4 + 400));
  v11 = s;
  v12 = *(_DWORD *)(v4 + 408);
  --*(_BYTE *)(v4 + 444);
  v13 = v11;
  *(_DWORD *)(v5 + 8) = v12 + 524 * v11;
  *(_DWORD *)(v5 + 4) = v23;
  *(_DWORD *)v5 = *(_DWORD *)v4;
  *(_DWORD *)(v12 + 524 * v11) = *(_DWORD *)v4;
  *(_BYTE *)(*(_DWORD *)(v5 + 8) + 8) = v11;
  *(_DWORD *)(*(_DWORD *)(v5 + 8) + 20) = v23;
  *(_DWORD *)(*(_DWORD *)(v5 + 8) + 12) = v21;
  *(_DWORD *)(*(_DWORD *)(v5 + 8) + 16) = 1000 * v22;
  v14 = *(_DWORD *)(v5 + 8);
  if ( v27 == 875648590 )
    v15 = 1;
  else
    v15 = (unsigned int)(v27 - 825513550) <= 0;
  *(_BYTE *)(v14 + 9) = v15;
  pthread_mutex_unlock((pthread_mutex_t *)(v4 + 400));
  v16 = *(int (__fastcall **)(int, _DWORD))(v4 + 440);
  if ( !v16 )
  {
    _android_log_print(
      6,
      "mm-camera-intf",
      " %s : Clean invalidate cache op not supported\n",
      "mm_stream_read_msm_frame");
    return v7;
  }
  v7 = v16(v13, *(_DWORD *)(v4 + 424));
  if ( v7 < 0 )
  {
    v8 = "mm-camera-intf";
    v9 = "%s: Clean invalidate cache failed on buffer index: %d";
    v18 = v13;
    v10 = "mm_stream_read_msm_frame";
    goto LABEL_9;
  }
  return v7;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00006C40) --------------------------------------------------------
int __fastcall sub_6C40(int result)
{
  int v1; // r4@1
  int v2; // r5@5
  int v3; // r1@5
  int v4; // r6@6
  int v5; // r3@10
  char s; // [sp+Ch] [bp-24h]@4
  int v7; // [sp+14h] [bp-1Ch]@5

  v1 = result;
  if ( result )
  {
    if ( *(_DWORD *)(result + 12) == 6 )
    {
      memset(&s, 0, 0xCu);
      result = j_mm_stream_read_msm_frame(v1, (int)&s, *(_BYTE *)(v1 + 32));
      if ( !result )
      {
        v2 = *(_BYTE *)(v7 + 8);
        pthread_mutex_lock((pthread_mutex_t *)(v1 + 348));
        v3 = v1;
        while ( 1 )
        {
          v4 = *(_DWORD *)(v3 + 352);
          if ( v4 )
            break;
          v3 += 12;
          if ( v3 == v1 + 48 )
            goto LABEL_10;
        }
        v4 = 1;
LABEL_10:
        pthread_mutex_unlock((pthread_mutex_t *)(v1 + 348));
        pthread_mutex_lock((pthread_mutex_t *)(v1 + 400));
        v5 = 3 * v2;
        *(_BYTE *)(*(_DWORD *)(v1 + 412) + 3 * v2 + 2) = 0;
        if ( *(_BYTE *)(v1 + 420) )
          ++*(_BYTE *)(*(_DWORD *)(v1 + 412) + v5);
        *(_BYTE *)(*(_DWORD *)(v1 + 412) + v5) += v4;
        pthread_mutex_unlock((pthread_mutex_t *)(v1 + 400));
        result = j_mm_stream_handle_rcvd_buf(v1, (int)&s, v4);
      }
    }
    else
    {
      result = _android_log_print(
                 6,
                 "mm-camera-intf",
                 "%s: ERROR!! Wrong state (%d) to receive data notify!",
                 "mm_stream_data_notify",
                 *(_DWORD *)(result + 12));
    }
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00006D04) --------------------------------------------------------
int __fastcall mm_stream_set_parm(int a1, int a2, int a3)
{
  int result; // r0@2
  int v4; // [sp+4h] [bp-Ch]@1
  int v5; // [sp+8h] [bp-8h]@1

  v5 = a3;
  v4 = 0;
  if ( a2 )
    result = j_mm_camera_util_s_ctrl(*(_DWORD *)(a1 + 8), 134217747, &v4);
  else
    result = -1;
  return result;
}

//----- (00006D28) --------------------------------------------------------
int __fastcall mm_stream_get_parm(int a1, int a2, int a3)
{
  int result; // r0@2
  int v4; // [sp+4h] [bp-Ch]@1
  int v5; // [sp+8h] [bp-8h]@1

  v5 = a3;
  v4 = 0;
  if ( a2 )
    result = j_mm_camera_util_g_ctrl(*(_DWORD *)(a1 + 8), 134217747, &v4);
  else
    result = -1;
  return result;
}

//----- (00006D4C) --------------------------------------------------------
int __fastcall mm_stream_set_ext_mode(int a1)
{
  int v1; // r5@1
  int result; // r0@1
  int v3; // [sp+0h] [bp-E0h]@1
  int v4; // [sp+14h] [bp-CCh]@2
  int v5; // [sp+CCh] [bp-14h]@1

  v1 = a1;
  v5 = _stack_chk_guard;
  memset(&v3, 0, 0xCCu);
  v3 = 9;
  result = ioctl(*(_DWORD *)(v1 + 8), 0xC0CC5616, &v3);
  if ( !result )
    *(_DWORD *)(v1 + 4) = v4;
  if ( v5 != _stack_chk_guard )
    _stack_chk_fail(result);
  return result;
}
// 2FFC: using guessed type int __fastcall _stack_chk_fail(_DWORD);

//----- (00006D94) --------------------------------------------------------
int __fastcall mm_stream_fsm_inited(int a1, int a2, int a3, int a4)
{
  int v4; // r4@1
  int v5; // r7@1
  int v6; // r3@2
  int v7; // r1@3
  char *v8; // r0@5
  int v9; // r0@5
  int v10; // r5@7
  int result; // r0@12
  char v12; // [sp+14h] [bp-3Ch]@5
  int v13; // [sp+34h] [bp-1Ch]@1

  v4 = a1;
  v5 = a2;
  v13 = _stack_chk_guard;
  if ( a2 )
  {
    v10 = 0;
    _android_log_print(
      6,
      "mm-camera-intf",
      "%s: invalid state (%d) for evt (%d), in(%p), out(%p)",
      "mm_stream_fsm_inited",
      *(_DWORD *)(a1 + 12),
      a2,
      a3,
      a4);
  }
  else
  {
    v6 = *(_DWORD *)(a1 + 416);
    if ( v6 && (v7 = *(_DWORD *)(v6 + 2132)) != 0 )
    {
      v8 = j_mm_camera_util_get_dev_name(*(_DWORD *)(v7 + 4));
      snprintf(&v12, 0x20u, "/dev/%s", v8);
      v9 = open(&v12, 2050);
      *(_DWORD *)(v4 + 8) = v9;
      if ( v9 > 0 )
      {
        v10 = j_mm_stream_set_ext_mode(v4);
        if ( v10 )
        {
          close(*(_DWORD *)(v4 + 8));
          *(_DWORD *)(v4 + 8) = v5;
        }
        else
        {
          *(_DWORD *)(v4 + 12) = 2;
        }
        goto LABEL_12;
      }
      _android_log_print(6, "mm-camera-intf", "%s: open dev returned %d\n", "mm_stream_fsm_inited", v9);
    }
    else
    {
      _android_log_print(6, "mm-camera-intf", "%s: NULL channel or camera obj\n", "mm_stream_fsm_inited");
    }
    v10 = -1;
  }
LABEL_12:
  result = v10;
  if ( v13 != _stack_chk_guard )
    _stack_chk_fail(v10);
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 2FFC: using guessed type int __fastcall _stack_chk_fail(_DWORD);

//----- (00006E84) --------------------------------------------------------
int __fastcall mm_stream_qbuf(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r6@1
  int v4; // r1@1
  int (*v5)(void); // r2@1
  int v6; // r0@1
  int v7; // r1@2
  int v8; // r4@2
  int result; // r0@3
  char v10; // [sp+Ch] [bp-44h]@1
  signed int v11; // [sp+10h] [bp-40h]@1
  signed int v12; // [sp+3Ch] [bp-14h]@1
  int *v13; // [sp+40h] [bp-10h]@1
  int v14; // [sp+44h] [bp-Ch]@1
  int v15; // [sp+50h] [bp+0h]@1

  v2 = a2;
  v3 = a1;
  memcpy(&v15, (const void *)(a2 + 28), 0x1E0u);
  memset(&v10, 0, 0x44u);
  v4 = *(_BYTE *)(v2 + 24);
  v12 = 2;
  v5 = *(int (**)(void))(v3 + 436);
  v6 = *(_BYTE *)(v2 + 8);
  v11 = 9;
  v13 = &v15;
  *(_DWORD *)&v10 = v6;
  v14 = v4;
  if ( v5 )
  {
    v7 = *(_DWORD *)(v3 + 424);
    v8 = v5();
    if ( v8 < 0 )
    {
      _android_log_print(
        6,
        "mm-camera-intf",
        "%s: Cache invalidate failed on buffer index: %d",
        "mm_stream_qbuf",
        *(_DWORD *)&v10);
      return v8;
    }
  }
  else
  {
    _android_log_print(6, "mm-camera-intf", "%s: Cache invalidate op not added", "mm_stream_qbuf");
  }
  result = ioctl(*(_DWORD *)(v3 + 8), 0xC044560F, &v10);
  if ( result >= 0 )
    ++*(_BYTE *)(v3 + 444);
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00006F34) --------------------------------------------------------
signed int __fastcall mm_stream_request_buf(int a1)
{
  unsigned int v1; // r6@1
  int v2; // r5@1
  signed int result; // r0@2
  int v4; // r4@3
  int v5; // r12@5
  int v6; // r4@6
  int v7; // r0@10
  unsigned int s; // [sp+Ch] [bp-2Ch]@10
  int v9; // [sp+10h] [bp-28h]@10
  int v10; // [sp+14h] [bp-24h]@10

  v1 = *(_BYTE *)(a1 + 404);
  v2 = a1;
  _android_log_print(
    6,
    "mm-camera-intf",
    "%s: buf_num = %d, stream type = %d",
    "mm_stream_request_buf",
    v1,
    *(_DWORD *)(*(_DWORD *)(a1 + 16) + 4));
  if ( v1 <= 0x18 )
  {
    v4 = 0;
    pthread_mutex_lock((pthread_mutex_t *)(v2 + 400));
    while ( (unsigned __int8)v4 < v1 )
    {
      v5 = 3 * v4++;
      if ( *(_BYTE *)(v5 + *(_DWORD *)(v2 + 412) + 1) )
      {
        v6 = 1;
        goto LABEL_8;
      }
    }
    v6 = 0;
LABEL_8:
    pthread_mutex_unlock((pthread_mutex_t *)(v2 + 400));
    if ( v6 )
    {
      memset(&s, 0, 0x14u);
      v9 = 9;
      v10 = 2;
      v7 = *(_DWORD *)(v2 + 8);
      s = v1;
      v6 = ioctl(v7, 0xC0145608, &s);
      if ( v6 < 0 )
        _android_log_print(
          6,
          "mm-camera-intf",
          "%s: fd=%d, ioctl VIDIOC_REQBUFS failed: rc=%d\n",
          "mm_stream_request_buf",
          *(_DWORD *)(v2 + 8),
          v6);
    }
    else
    {
      _android_log_print(6, "mm-camera-intf", "No Need to register this buffer");
    }
    result = v6;
  }
  else
  {
    _android_log_print(6, "mm-camera-intf", "%s: buf num %d > max limit %d\n", "mm_stream_request_buf", v1, 24);
    result = -1;
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00007028) --------------------------------------------------------
int __fastcall mm_stream_map_buf(int a1, int a2, int a3, int a4, int a5, int a6)
{
  int v6; // r10@1
  int v7; // r9@1
  int v8; // r8@1
  int v9; // r4@1
  int v10; // r0@2
  int v11; // r7@3
  int result; // r0@4
  int v13; // r1@5
  int v14; // [sp+0h] [bp-40h]@5
  int v15; // [sp+4h] [bp-3Ch]@5
  int v16; // [sp+8h] [bp-38h]@5
  int v17; // [sp+Ch] [bp-34h]@5
  int v18; // [sp+10h] [bp-30h]@5
  int v19; // [sp+18h] [bp-28h]@5
  int v20; // [sp+1Ch] [bp-24h]@5

  v6 = a2;
  v7 = a3;
  v8 = a4;
  v9 = a1;
  if ( a1 && (v10 = *(_DWORD *)(a1 + 416)) != 0 && (v11 = *(_DWORD *)(v10 + 2132)) != 0 )
  {
    memset(&v14, 0, 0x20u);
    v13 = *(_DWORD *)(v9 + 4);
    v15 = v6;
    v20 = a6;
    v16 = v13;
    v19 = a5;
    v17 = v7;
    v18 = v8;
    result = j_mm_camera_util_sendmsg(v11, (int)&v14, 32, a5);
  }
  else
  {
    _android_log_print(6, "mm-camera-intf", "%s: NULL obj of stream/channel/camera", "mm_stream_map_buf");
    result = -1;
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0000709C) --------------------------------------------------------
int __fastcall sub_709C(int a1, int a2, int a3, int a4, int a5)
{
  return j_mm_stream_map_buf(a5, 2, a1, a2, a3, a4);
}

//----- (000070B8) --------------------------------------------------------
int __fastcall mm_stream_unmap_buf(int a1, int a2, int a3, int a4)
{
  int v4; // r9@1
  int v5; // r8@1
  int v6; // r7@1
  int v7; // r4@1
  int v8; // r0@2
  int v9; // r6@3
  int result; // r0@4
  int v11; // r3@5
  signed int v12; // [sp+0h] [bp-40h]@5
  int v13; // [sp+4h] [bp-3Ch]@5
  int v14; // [sp+8h] [bp-38h]@5
  int v15; // [sp+Ch] [bp-34h]@5
  int v16; // [sp+10h] [bp-30h]@5

  v4 = a2;
  v5 = a3;
  v6 = a4;
  v7 = a1;
  if ( a1 && (v8 = *(_DWORD *)(a1 + 416)) != 0 && (v9 = *(_DWORD *)(v8 + 2132)) != 0 )
  {
    memset(&v12, 0, 0x20u);
    v12 = 1;
    v13 = v4;
    v11 = *(_DWORD *)(v7 + 4);
    v15 = v5;
    v16 = v6;
    v14 = v11;
    result = j_mm_camera_util_sendmsg(v9, (int)&v12, 32, 0);
  }
  else
  {
    _android_log_print(6, "mm-camera-intf", "%s: NULL obj of stream/channel/camera", "mm_stream_unmap_buf");
    result = -1;
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00007124) --------------------------------------------------------
int __fastcall sub_7124(int a1, int a2, int a3)
{
  return j_j_j_mm_stream_unmap_buf(a3, 2, a1, a2);
}

//----- (00007138) --------------------------------------------------------
int __fastcall mm_stream_deinit_bufs(int a1, int (*a2)(int), int (*a3)(), int a4)
{
  int v4; // r5@1
  int (__fastcall *v5)(void **, _DWORD); // r2@2
  int v6; // r4@2
  void *v7; // r0@2
  int result; // r0@4
  void *v9; // [sp+4h] [bp-1Ch]@1
  void *v10; // [sp+8h] [bp-18h]@1
  int v11; // [sp+Ch] [bp-14h]@1

  v9 = a2;
  v10 = a3;
  v11 = a4;
  v4 = a1;
  if ( *(_DWORD *)(a1 + 408) )
  {
    v5 = *(int (__fastcall **)(void **, _DWORD))(a1 + 432);
    v9 = sub_709C;
    v11 = a1;
    v10 = sub_7124;
    v6 = v5(&v9, *(_DWORD *)(a1 + 424));
    free(*(void **)(v4 + 408));
    v7 = *(void **)(v4 + 412);
    *(_DWORD *)(v4 + 408) = 0;
    if ( v7 )
    {
      free(v7);
      *(_DWORD *)(v4 + 412) = 0;
    }
    result = v6;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00007190) --------------------------------------------------------
signed int __fastcall mm_stream_init_bufs(int a1, int a2, int (*a3)())
{
  int (*v3)(int); // r1@1
  int v4; // r4@1
  int (__fastcall *v5)(int, int, void **, int); // r5@3
  int v6; // r0@3
  int v7; // r5@3
  signed int result; // r0@4
  size_t v9; // r6@5
  void *v10; // r0@5
  int (*v11)(int); // r1@6
  int (*v12)(); // r2@6
  int v13; // r3@6
  signed int v14; // r6@7
  int v15; // r12@9
  char v16; // r1@9
  int v17; // lr@9
  int v18; // [sp+4h] [bp-24h]@3
  void *ptr; // [sp+8h] [bp-20h]@1
  int (__fastcall *v20)(int, int, int, int, int); // [sp+Ch] [bp-1Ch]@3
  int (__fastcall *v21)(int, int, int); // [sp+10h] [bp-18h]@3
  int v22; // [sp+14h] [bp-14h]@3

  v3 = *(int (**)(int))(a1 + 408);
  v4 = a1;
  ptr = 0;
  if ( v3 )
    j_mm_stream_deinit_bufs(a1, v3, a3, 0);
  v18 = *(_DWORD *)(v4 + 424);
  v20 = sub_709C;
  v5 = *(int (__fastcall **)(int, int, void **, int))(v4 + 428);
  v21 = sub_7124;
  v22 = v4;
  v6 = v5(v4 + 32, v4 + 404, &ptr, v4 + 408);
  v7 = v6;
  if ( v6 )
  {
    _android_log_print(6, "mm-camera-intf", "%s: Error get buf, rc = %d\n", "mm_stream_init_bufs", v6, v18);
    result = v7;
  }
  else
  {
    v9 = 3 * *(_BYTE *)(v4 + 404);
    v10 = malloc(v9);
    *(_DWORD *)(v4 + 412) = v10;
    if ( v10 )
    {
      memset(v10, v7, v9);
      v14 = v7;
      while ( v14 < *(_BYTE *)(v4 + 404) )
      {
        v15 = 524 * v14;
        v16 = *((_BYTE *)ptr + v14);
        v17 = 3 * v14++ + *(_DWORD *)(v4 + 412);
        *(_BYTE *)(v17 + 1) = v16;
        *(_DWORD *)(*(_DWORD *)(v4 + 408) + v15) = *(_DWORD *)v4;
        *(_DWORD *)(v15 + *(_DWORD *)(v4 + 408) + 4) = *(_DWORD *)(*(_DWORD *)(v4 + 16) + 4);
      }
      free(ptr);
      *(_BYTE *)(*(_DWORD *)(v4 + 16) + 284) = *(_BYTE *)(v4 + 404);
      result = 0;
    }
    else
    {
      _android_log_print(6, "mm-camera-intf", "%s: No memory for buf_status", "mm_stream_init_bufs", &v20, v18);
      j_mm_stream_deinit_bufs(v4, v11, v12, v13);
      free(ptr);
      result = -1;
    }
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (000072A4) --------------------------------------------------------
signed int __fastcall mm_stream_reg_buf(int a1, int a2)
{
  int v2; // r4@1
  signed int v3; // r6@1
  unsigned __int8 v4; // r7@2
  int v5; // r1@4
  int v6; // r5@4
  int v7; // r0@5
  int v9; // [sp+4h] [bp-24h]@1

  v9 = a2;
  v2 = a1;
  v3 = j_mm_stream_request_buf(a1);
  if ( !v3 )
  {
    v4 = 0;
    pthread_mutex_lock((pthread_mutex_t *)(v2 + 400));
    *(_BYTE *)(v2 + 444) = 0;
    while ( *(_BYTE *)(v2 + 404) > (unsigned int)v4 )
    {
      v5 = *(_DWORD *)(v2 + 412);
      v6 = 3 * v4;
      if ( *(_BYTE *)(v5 + 3 * v4 + 1) )
      {
        v7 = j_mm_stream_qbuf(v2, *(_DWORD *)(v2 + 408) + 524 * v4);
        if ( v7 )
        {
          v3 = v7;
          _android_log_print(6, "mm-camera-intf", "%s: VIDIOC_QBUF rc = %d\n", "mm_stream_reg_buf", v7, v9);
          break;
        }
        *(_BYTE *)(*(_DWORD *)(v2 + 412) + v6) = 0;
        *(_BYTE *)(v6 + *(_DWORD *)(v2 + 412) + 2) = 1;
      }
      else
      {
        *(_BYTE *)(v5 + v6) = 1;
        *(_BYTE *)(v6 + *(_DWORD *)(v2 + 412) + 2) = 0;
      }
      ++v4;
    }
    pthread_mutex_unlock((pthread_mutex_t *)(v2 + 400));
  }
  return v3;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00007348) --------------------------------------------------------
int __fastcall mm_stream_fsm_buffed(int a1, int (*a2)(int), int a3, int a4)
{
  int v4; // r4@1
  int result; // r0@2
  signed int v6; // r3@2

  v4 = a1;
  switch ( a2 )
  {
    case 4u:
      result = j_mm_stream_deinit_bufs(a1, a2, (int (*)())a3, a4);
      v6 = 3;
      goto LABEL_5;
    case 5u:
      result = j_mm_stream_reg_buf(a1, (int)a2);
      if ( !result )
      {
        v6 = 5;
LABEL_5:
        *(_DWORD *)(v4 + 12) = v6;
      }
      break;
    case 0xAu:
      result = j_j_j_mm_stream_set_parm(a1, *(_DWORD *)(a3 + 4), a3);
      break;
    case 0xBu:
      result = j_j_j_mm_stream_get_parm(a1, *(_DWORD *)(a3 + 4), a3);
      break;
    default:
      _android_log_print(
        6,
        "mm-camera-intf",
        "%s: invalid state (%d) for evt (%d), in(%p), out(%p)",
        "mm_stream_fsm_buffed",
        *(_DWORD *)(a1 + 12),
        a2,
        a3,
        a4);
      result = 0;
      break;
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (000073BC) --------------------------------------------------------
int __fastcall mm_stream_unreg_buf(int a1)
{
  int v1; // r4@1
  int v2; // r0@1
  int v3; // r5@1
  signed int v4; // r3@4
  int v5; // r12@6
  int v7; // [sp+Ch] [bp-24h]@1
  int v8; // [sp+10h] [bp-20h]@1
  int v9; // [sp+14h] [bp-1Ch]@1

  v1 = a1;
  v9 = 2;
  v8 = 9;
  v2 = *(_DWORD *)(a1 + 8);
  v7 = 0;
  v3 = ioctl(v2, 0xC0145608, &v7);
  if ( v3 < 0 )
    _android_log_print(
      6,
      "mm-camera-intf",
      "%s: fd=%d, VIDIOC_REQBUFS failed, rc=%d\n",
      "mm_stream_unreg_buf",
      *(_DWORD *)(v1 + 8),
      v3);
  pthread_mutex_lock((pthread_mutex_t *)(v1 + 400));
  if ( *(_DWORD *)(v1 + 412) )
  {
    v4 = 0;
    while ( v4 < *(_BYTE *)(v1 + 404) )
    {
      v5 = 3 * v4++;
      *(_BYTE *)(*(_DWORD *)(v1 + 412) + v5) = 0;
      *(_BYTE *)(v5 + *(_DWORD *)(v1 + 412) + 2) = 0;
    }
  }
  pthread_mutex_unlock((pthread_mutex_t *)(v1 + 400));
  return v3;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00007448) --------------------------------------------------------
int __fastcall mm_stream_fsm_reg(int a1, int a2, int a3, int a4)
{
  int v4; // r4@1
  int v5; // r6@2
  signed int v6; // r0@2
  int v7; // r3@3
  signed int v8; // r5@4
  int v9; // r1@10
  int v10; // r2@10
  int v11; // r3@10

  v4 = a1;
  switch ( a2 )
  {
    case 6:
      v5 = j_mm_stream_unreg_buf(a1);
      v6 = 4;
      goto LABEL_14;
    case 7:
      pthread_mutex_lock((pthread_mutex_t *)(a1 + 348));
      v7 = v4;
      break;
    case 10:
      return j_j_j_mm_stream_set_parm(a1, *(_DWORD *)(a3 + 4), a3);
    case 11:
      return j_j_j_mm_stream_get_parm(a1, *(_DWORD *)(a3 + 4), a3);
    default:
      v5 = 0;
      _android_log_print(
        6,
        "mm-camera-intf",
        "%s: invalid state (%d) for evt (%d), in(%p), out(%p)",
        "mm_stream_fsm_reg",
        *(_DWORD *)(a1 + 12),
        a2,
        a3,
        a4);
      return v5;
  }
  while ( 1 )
  {
    v8 = *(_DWORD *)(v7 + 352);
    if ( v8 )
      break;
    v7 += 12;
    if ( v7 == v4 + 48 )
      goto LABEL_8;
  }
  v8 = 1;
LABEL_8:
  pthread_mutex_unlock((pthread_mutex_t *)(v4 + 348));
  if ( v8 )
    j_mm_camera_cmd_thread_launch(v4 + 296, (int)sub_82E4, v4);
  *(_DWORD *)(v4 + 12) = 6;
  v5 = j_mm_stream_streamon(v4);
  if ( v5 )
  {
    if ( v8 )
      j_mm_camera_cmd_thread_release(v4 + 296, v9, v10, v11);
    v6 = 5;
LABEL_14:
    *(_DWORD *)(v4 + 12) = v6;
  }
  return v5;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00007508) --------------------------------------------------------
signed int __fastcall mm_stream_get_v4l2_fmt(unsigned int a1, int a2, int a3)
{
  if ( a1 == 8 )
    return 1448695129;
  if ( a1 > 8 )
  {
    if ( a1 > 0x13 )
    {
      if ( a1 == 76 )
        return 1195724874;
      if ( a1 == 77 )
        return 1413827921;
    }
    else
    {
      if ( a1 >= 0x10 )
        return 808535874;
      if ( a1 == 10 )
        return 1498831189;
      if ( a1 < 0xA )
        return 1431918169;
      if ( a1 == 11 )
        return 1498765654;
    }
    goto LABEL_26;
  }
  if ( a1 != 4 )
  {
    if ( a1 > 4 )
    {
      if ( a1 == 6 )
        return 825644622;
      if ( a1 <= 6 )
        return 909203022;
    }
    else if ( a1 != 1 )
    {
      if ( a1 == 2 )
        return 825382478;
LABEL_26:
      _android_log_print(6, "mm-camera-intf", "%s: Unknown fmt=%d", "mm_stream_get_v4l2_fmt", a1, a2, a3);
      return 0;
    }
  }
  return 842094158;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (000075C0) --------------------------------------------------------
signed int __fastcall mm_stream_calc_offset_preview(int a1, int a2, int a3)
{
  int v3; // r5@1
  int v4; // r4@1
  signed int result; // r0@2
  int v6; // r6@2
  int v7; // r7@2
  unsigned int v8; // r1@2
  unsigned int v9; // r2@2
  unsigned int v10; // r7@2
  signed int v11; // r2@2
  int v12; // r6@2
  unsigned int v13; // r1@2
  unsigned int v14; // r3@2
  int v15; // r12@2
  int v16; // r1@3
  int v17; // r7@3
  unsigned int v18; // r6@3
  unsigned int v19; // r7@3
  signed int v20; // r2@3
  int v21; // r6@3
  unsigned int v22; // r3@3
  unsigned int v23; // r2@3
  unsigned int v24; // r6@3
  signed int v25; // r5@3
  int v26; // r6@4
  int v27; // r3@4
  signed int v28; // r2@4
  unsigned int v29; // r1@4
  unsigned int v30; // r3@4
  int v31; // r6@4
  signed int v32; // r7@4
  int v33; // r2@6
  int v34; // r1@6
  unsigned int v35; // r7@6
  int v36; // r2@6
  unsigned int v37; // r0@7
  unsigned int v38; // r7@8
  int v39; // r1@10
  unsigned int v40; // r6@11
  int v41; // r1@17
  unsigned int v42; // r2@18
  unsigned int v43; // r7@20

  v3 = a2;
  v4 = a3;
  switch ( a1 )
  {
    case 1:
    case 2:
      *(_DWORD *)a3 = 2;
      result = 0;
      v6 = *(_DWORD *)(a2 + 4);
      v7 = *(_DWORD *)a2 + 15;
      *(_DWORD *)(a3 + 8) = 0;
      v8 = v7 & 0xFFFFFFF0;
      v9 = (v6 + 1) & 0xFFFFFFFE;
      *(_DWORD *)(v4 + 12) = 0;
      *(_DWORD *)(v4 + 16) = 0;
      v10 = v9 * (v7 & 0xFFFFFFF0);
      *(_DWORD *)(v4 + 20) = v8;
      *(_DWORD *)(v4 + 24) = v9;
      *(_DWORD *)(v4 + 4) = v10;
      *(_DWORD *)(v4 + 28) = *(_DWORD *)v3;
      *(_DWORD *)(v4 + 32) = *(_DWORD *)(v3 + 4);
      v11 = *(_DWORD *)(v3 + 4);
      v12 = *(_DWORD *)v3;
      *(_DWORD *)(v4 + 40) = 0;
      v13 = (v12 + 15) & 0xFFFFFFF0;
      *(_DWORD *)(v4 + 44) = 0;
      *(_DWORD *)(v4 + 48) = 0;
      *(_DWORD *)(v4 + 52) = v13;
      v14 = (v11 / 2 + 1) & 0xFFFFFFFE;
      *(_DWORD *)(v4 + 56) = v14;
      v15 = v10 + 4095 + v14 * v13;
      *(_DWORD *)(v4 + 36) = v14 * v13;
      *(_DWORD *)(v4 + 60) = *(_DWORD *)v3;
      *(_DWORD *)(v4 + 64) = *(_DWORD *)(v3 + 4) / 2;
      goto LABEL_5;
    case 3:
      *(_DWORD *)a3 = 2;
      result = 0;
      v16 = *(_DWORD *)a2;
      v17 = *(_DWORD *)(v3 + 4) + 31;
      *(_DWORD *)(a3 + 8) = 0;
      v18 = (v16 + 31) & 0xFFFFFFE0;
      *(_DWORD *)(a3 + 12) = 0;
      *(_DWORD *)(a3 + 16) = 0;
      *(_DWORD *)(a3 + 20) = v18;
      *(_DWORD *)(a3 + 24) = v17 & 0xFFFFFFE0;
      v19 = ((v17 & 0xFFFFFFE0) * v18 + 4095) & 0xFFFFF000;
      *(_DWORD *)(a3 + 4) = v19;
      *(_DWORD *)(a3 + 28) = *(_DWORD *)v3;
      *(_DWORD *)(a3 + 32) = *(_DWORD *)(v3 + 4);
      v20 = *(_DWORD *)(v3 + 4);
      *(_DWORD *)(v4 + 40) = 0;
      v21 = *(_DWORD *)v3 / 2;
      *(_DWORD *)(v4 + 44) = 0;
      *(_DWORD *)(v4 + 48) = 0;
      v22 = (v21 + 31) & 0xFFFFFFE0;
      *(_DWORD *)(v4 + 52) = 2 * v22;
      v23 = (v20 / 2 + 31) & 0xFFFFFFE0;
      *(_DWORD *)(v4 + 56) = v23;
      v24 = (v23 * 2 * v22 + 4095) & 0xFFFFF000;
      *(_DWORD *)(v4 + 36) = v24;
      *(_DWORD *)(v4 + 60) = *(_DWORD *)v3;
      v25 = *(_DWORD *)(v3 + 4);
      *(_DWORD *)(v4 + 260) = v19 + v24;
      *(_DWORD *)(v4 + 64) = v25 / 2;
      return result;
    case 4:
      *(_DWORD *)a3 = 3;
      result = 0;
      v26 = *(_DWORD *)(a2 + 4);
      v27 = *(_DWORD *)a2 + 15;
      *(_DWORD *)(a3 + 8) = 0;
      v28 = (v26 + 1) & 0xFFFFFFFE;
      *(_DWORD *)(v4 + 20) = v27 & 0xFFFFFFF0;
      *(_DWORD *)(v4 + 24) = v28;
      v29 = v28 * (v27 & 0xFFFFFFF0);
      *(_DWORD *)(v4 + 12) = 0;
      *(_DWORD *)(v4 + 16) = 0;
      v28 >>= 1;
      *(_DWORD *)(v4 + 4) = v29;
      *(_DWORD *)(v4 + 28) = *(_DWORD *)v3;
      v30 = (((signed int)(v27 & 0xFFFFFFF0) >> 1) + 15) & 0xFFFFFFF0;
      v31 = *(_DWORD *)(v3 + 4);
      *(_DWORD *)(v4 + 56) = v28;
      *(_DWORD *)(v4 + 40) = 0;
      *(_DWORD *)(v4 + 32) = v31;
      *(_DWORD *)(v4 + 44) = 0;
      *(_DWORD *)(v4 + 48) = 0;
      *(_DWORD *)(v4 + 52) = v30;
      *(_DWORD *)(v4 + 36) = v28 * v30;
      v15 = v29 + 4095 + 2 * v28 * v30;
      *(_DWORD *)(v4 + 60) = *(_DWORD *)v3 / 2;
      v32 = *(_DWORD *)(v3 + 4);
      *(_DWORD *)(v4 + 88) = v28;
      *(_DWORD *)(v4 + 72) = 0;
      *(_DWORD *)(v4 + 68) = v28 * v30;
      *(_DWORD *)(v4 + 76) = 0;
      *(_DWORD *)(v4 + 80) = 0;
      *(_DWORD *)(v4 + 64) = v32 / 2;
      *(_DWORD *)(v4 + 84) = v30;
      *(_DWORD *)(v4 + 92) = *(_DWORD *)v3 / 2;
      *(_DWORD *)(v4 + 96) = *(_DWORD *)(v3 + 4) / 2;
      goto LABEL_5;
    case 5:
    case 6:
      *(_DWORD *)a3 = 2;
      v33 = *(_DWORD *)a2;
      result = 0;
      v34 = *(_DWORD *)(a2 + 4);
      *(_DWORD *)(v4 + 8) = 0;
      v35 = (v33 + 15) & 0xFFFFFFF0;
      *(_DWORD *)(v4 + 12) = 0;
      *(_DWORD *)(v4 + 24) = v34;
      *(_DWORD *)(v4 + 16) = 0;
      *(_DWORD *)(v4 + 20) = v35;
      *(_DWORD *)(v4 + 4) = v34 * v35;
      *(_DWORD *)(v4 + 28) = *(_DWORD *)v3;
      v36 = *(_DWORD *)(v3 + 4);
      *(_DWORD *)(v4 + 56) = v34;
      *(_DWORD *)(v4 + 40) = 0;
      v15 = 2 * v34 * v35 + 4095;
      *(_DWORD *)(v4 + 32) = v36;
      *(_DWORD *)(v4 + 36) = v34 * v35;
      *(_DWORD *)(v4 + 44) = 0;
      *(_DWORD *)(v4 + 48) = 0;
      *(_DWORD *)(v4 + 52) = v35;
      *(_DWORD *)(v4 + 60) = *(_DWORD *)v3;
      *(_DWORD *)(v4 + 64) = *(_DWORD *)(v3 + 4);
LABEL_5:
      *(_DWORD *)(v4 + 260) = v15 & 0xFFFFF000;
      break;
    case 7:
      v37 = *(_DWORD *)a2;
      if ( *(_DWORD *)a2 )
        v38 = (v37 + 127) & 0xFFFFFF80;
      else
        v38 = 0;
      v39 = *(_DWORD *)(a2 + 4);
      if ( v39 )
        v40 = (v39 + 31) & 0xFFFFFFE0;
      else
        v40 = 0;
      if ( v37 )
      {
        if ( v39 )
          v37 = sub_6894(v37, v39);
        else
          v37 = 0;
      }
      *(_DWORD *)v4 = 2;
      v41 = v40 * v38;
      *(_DWORD *)(v4 + 260) = v37;
      *(_DWORD *)(v4 + 20) = v38;
      *(_DWORD *)(v4 + 8) = 0;
      *(_DWORD *)(v4 + 12) = 0;
      *(_DWORD *)(v4 + 16) = 0;
      *(_DWORD *)(v4 + 4) = v40 * v38;
      *(_DWORD *)(v4 + 24) = v40;
      *(_DWORD *)(v4 + 28) = *(_DWORD *)v3;
      *(_DWORD *)(v4 + 32) = *(_DWORD *)(v3 + 4);
      if ( *(_DWORD *)v3 )
        v42 = (*(_DWORD *)v3 + 127) & 0xFFFFFF80;
      else
        v42 = 0;
      v43 = *(_DWORD *)(v3 + 4);
      if ( v43 )
        v43 = (((signed int)(v43 + 1) >> 1) + 15) & 0xFFFFFFF0;
      *(_DWORD *)(v4 + 52) = v42;
      *(_DWORD *)(v4 + 36) = v37 - v41;
      result = 0;
      *(_DWORD *)(v4 + 56) = v43;
      *(_DWORD *)(v4 + 40) = 0;
      *(_DWORD *)(v4 + 44) = 0;
      *(_DWORD *)(v4 + 48) = 0;
      *(_DWORD *)(v4 + 60) = *(_DWORD *)v3;
      *(_DWORD *)(v4 + 64) = *(_DWORD *)(v3 + 4);
      break;
    default:
      _android_log_print(
        6,
        "mm-camera-intf",
        "%s: Invalid cam_format for preview %d",
        "mm_stream_calc_offset_preview",
        a1,
        a2,
        a3);
      result = -1;
      break;
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00007858) --------------------------------------------------------
signed int __fastcall mm_stream_calc_offset_snapshot(int a1, int a2, int a3, int a4)
{
  int v4; // r7@1
  int v5; // r8@1
  int v6; // r6@1
  int v7; // r4@1
  int v8; // r0@1
  int v9; // r5@1
  int v10; // r2@1
  unsigned int v11; // r3@2
  int v12; // r1@2
  int v13; // r3@2
  int v14; // lr@5
  int v15; // r0@5
  int v16; // r6@5
  signed int result; // r0@5
  int v18; // r6@5
  int v19; // r2@5
  int v20; // r1@5
  int v21; // r12@6
  int v22; // r2@6
  int v23; // lr@6
  unsigned int v24; // r5@6
  int v25; // r3@6
  int v26; // r6@6
  int v27; // r3@6
  int v28; // r2@6
  int v29; // lr@8
  int v30; // r6@8
  int v31; // r6@8
  int v32; // r2@8
  int v33; // [sp+4h] [bp-24h]@1

  v33 = a2;
  v4 = a2;
  v5 = a3;
  v6 = a1;
  v7 = a4;
  v8 = j_mm_camera_util_chip_is_a_family();
  v9 = *(_DWORD *)v4;
  v10 = *(_DWORD *)(v4 + 4);
  if ( v8 )
  {
    v11 = (v10 + 15) & 0xFFFFFFF0;
    v12 = v11 - v10;
    v13 = v11 + v11 - v10;
  }
  else
  {
    v12 = 0;
    v9 = (v9 + *(_DWORD *)v5 - 1) & -*(_DWORD *)v5;
    v13 = -*(_DWORD *)(v5 + 4) & (v10 + *(_DWORD *)(v5 + 4) - 1);
  }
  switch ( v6 )
  {
    case 1:
    case 2:
      *(_DWORD *)v7 = 2;
      v14 = (*(_DWORD *)(v5 + 8) - 1 + v13 * v9) & -*(_DWORD *)(v5 + 8);
      *(_DWORD *)(v7 + 4) = v14;
      v15 = *(_DWORD *)(v5 + 8);
      *(_DWORD *)(v7 + 20) = v9;
      *(_DWORD *)(v7 + 24) = v13;
      *(_DWORD *)(v7 + 16) = v12;
      v16 = -v15 & (v15 - 1 + v12 * v9);
      result = 0;
      *(_DWORD *)(v7 + 8) = v16;
      *(_DWORD *)(v7 + 12) = 0;
      *(_DWORD *)(v7 + 28) = *(_DWORD *)v4;
      *(_DWORD *)(v7 + 32) = *(_DWORD *)(v4 + 4);
      v18 = (*(_DWORD *)(v5 + 8) - 1 + v13 / 2 * v9) & -*(_DWORD *)(v5 + 8);
      *(_DWORD *)(v7 + 36) = v18;
      v19 = *(_DWORD *)(v5 + 8);
      *(_DWORD *)(v7 + 52) = v9;
      *(_DWORD *)(v7 + 56) = v13 / 2;
      *(_DWORD *)(v7 + 44) = 0;
      *(_DWORD *)(v7 + 48) = v12;
      *(_DWORD *)(v7 + 40) = (v12 * v9 + v19 - 1) & -v19;
      *(_DWORD *)(v7 + 60) = *(_DWORD *)v4;
      v20 = v14 + 4095 + v18;
      *(_DWORD *)(v7 + 64) = *(_DWORD *)(v4 + 4) / 2;
      goto LABEL_7;
    case 4:
      *(_DWORD *)v7 = 3;
      v21 = v13 / 2;
      *(_DWORD *)(v7 + 8) = -*(_DWORD *)(v5 + 8) & (*(_DWORD *)(v5 + 8) - 1 + v12 * v9);
      v22 = *(_DWORD *)(v5 + 8);
      *(_DWORD *)(v7 + 20) = v9;
      *(_DWORD *)(v7 + 16) = v12;
      *(_DWORD *)(v7 + 24) = v13;
      result = 0;
      *(_DWORD *)(v7 + 12) = 0;
      v23 = (v22 - 1 + v13 * v9) & -v22;
      *(_DWORD *)(v7 + 4) = v23;
      *(_DWORD *)(v7 + 28) = *(_DWORD *)v4;
      v24 = (v9 / 2 + 15) & 0xFFFFFFF0;
      *(_DWORD *)(v7 + 32) = *(_DWORD *)(v4 + 4);
      *(_DWORD *)(v7 + 40) = -*(_DWORD *)(v5 + 8) & (*(_DWORD *)(v5 + 8) - 1 + v12 * v24);
      v25 = *(_DWORD *)(v5 + 8);
      *(_DWORD *)(v7 + 52) = v24;
      *(_DWORD *)(v7 + 44) = 0;
      *(_DWORD *)(v7 + 48) = v12;
      v26 = (v25 - 1 + v21 * v24) & -v25;
      *(_DWORD *)(v7 + 56) = v21;
      *(_DWORD *)(v7 + 36) = v26;
      *(_DWORD *)(v7 + 60) = *(_DWORD *)v4 / 2;
      *(_DWORD *)(v7 + 64) = *(_DWORD *)(v4 + 4) / 2;
      *(_DWORD *)(v7 + 72) = (v12 * v24 + *(_DWORD *)(v5 + 8) - 1) & -*(_DWORD *)(v5 + 8);
      v27 = *(_DWORD *)(v5 + 8);
      *(_DWORD *)(v7 + 84) = v24;
      *(_DWORD *)(v7 + 76) = 0;
      v28 = (v27 - 1 + v21 * v24) & -v27;
      *(_DWORD *)(v7 + 80) = v12;
      *(_DWORD *)(v7 + 68) = v28;
      *(_DWORD *)(v7 + 88) = v21;
      *(_DWORD *)(v7 + 92) = *(_DWORD *)v4 / 2;
      *(_DWORD *)(v7 + 96) = *(_DWORD *)(v4 + 4) / 2;
      v20 = v23 + 4095 + v26 + v28;
      goto LABEL_7;
    case 5:
    case 6:
      *(_DWORD *)v7 = 2;
      v29 = (*(_DWORD *)(v5 + 8) - 1 + v13 * v9) & -*(_DWORD *)(v5 + 8);
      *(_DWORD *)(v7 + 4) = v29;
      v30 = *(_DWORD *)(v5 + 8);
      *(_DWORD *)(v7 + 16) = v12;
      *(_DWORD *)(v7 + 24) = v13;
      *(_DWORD *)(v7 + 20) = v9;
      *(_DWORD *)(v7 + 8) = -v30 & (v30 - 1 + v12 * v9);
      result = 0;
      *(_DWORD *)(v7 + 12) = 0;
      *(_DWORD *)(v7 + 28) = *(_DWORD *)v4;
      *(_DWORD *)(v7 + 32) = *(_DWORD *)(v4 + 4);
      v31 = (*(_DWORD *)(v5 + 8) - 1 + v13 * v9) & -*(_DWORD *)(v5 + 8);
      *(_DWORD *)(v7 + 36) = v31;
      v32 = *(_DWORD *)(v5 + 8);
      *(_DWORD *)(v7 + 48) = v12;
      *(_DWORD *)(v7 + 56) = v13;
      *(_DWORD *)(v7 + 44) = 0;
      *(_DWORD *)(v7 + 52) = v9;
      *(_DWORD *)(v7 + 40) = (v12 * v9 + v32 - 1) & -v32;
      v20 = v29 + v31 + 4095;
      *(_DWORD *)(v7 + 60) = *(_DWORD *)v4;
      *(_DWORD *)(v7 + 64) = *(_DWORD *)(v4 + 4);
LABEL_7:
      *(_DWORD *)(v7 + 260) = v20 & 0xFFFFF000;
      break;
    default:
      _android_log_print(
        6,
        "mm-camera-intf",
        "%s: Invalid cam_format for snapshot %d",
        "mm_stream_calc_offset_snapshot",
        v6,
        v33);
      result = -1;
      break;
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00007AC0) --------------------------------------------------------
signed int __fastcall mm_stream_calc_offset_raw(int a1, int a2, int a3, int a4)
{
  int v4; // r4@1
  int v5; // r6@1
  int v6; // r0@2
  unsigned int v7; // r5@2
  signed int result; // r0@2
  int v9; // r7@2
  int v10; // r3@2
  int v11; // r0@3
  unsigned int v12; // r1@3
  int v13; // r3@5
  int v14; // r2@5
  unsigned int v15; // r1@5
  int v16; // r7@5
  int v17; // r0@6
  int v18; // r5@6
  int v19; // r2@6
  int v20; // r3@6
  int v21; // r0@7
  int v22; // r7@7
  int v23; // r1@7
  signed int v24; // kr00_4@8
  unsigned int v25; // r3@8
  int v26; // r7@8
  int v27; // r2@8
  int v28; // r0@9
  unsigned int v29; // r1@9
  int v30; // r2@9
  int v31; // r3@11
  int v32; // r7@12

  v4 = a4;
  v5 = *(_DWORD *)(a2 + 4);
  switch ( a1 )
  {
    case 8:
    case 9:
    case 10:
    case 11:
    case 76:
      v6 = *(_DWORD *)a2;
      *(_DWORD *)a4 = 1;
      v7 = (v6 + 15) & 0xFFFFFFF0;
      result = 0;
      *(_DWORD *)(a4 + 8) = 0;
      v9 = *(_DWORD *)(a3 + 8);
      *(_DWORD *)(a4 + 12) = 0;
      *(_DWORD *)(a4 + 16) = 0;
      *(_DWORD *)(a4 + 20) = v7;
      v10 = (v9 - 1 + v5 * v7) & -v9;
      *(_DWORD *)(v4 + 4) = v10;
      *(_DWORD *)(v4 + 260) = (v10 + 4095) & 0xFFFFF000;
      goto LABEL_4;
    case 77:
      v11 = *(_DWORD *)a2;
      *(_DWORD *)a4 = 1;
      v12 = (v11 + 15) & 0xFFFFFFF0;
      result = 0;
      *(_DWORD *)(a4 + 20) = v12;
      *(_DWORD *)(a4 + 8) = 0;
      *(_DWORD *)(a4 + 12) = 0;
      *(_DWORD *)(a4 + 16) = 0;
      *(_DWORD *)(a4 + 4) = v5 * v12;
      *(_DWORD *)(a4 + 260) = v5 * v12;
LABEL_4:
      *(_DWORD *)(v4 + 24) = v5;
      return result;
    case 12:
    case 13:
    case 14:
    case 15:
    case 24:
    case 25:
    case 26:
    case 27:
    case 36:
    case 37:
    case 38:
    case 39:
    case 48:
    case 49:
    case 50:
    case 51:
    case 60:
    case 61:
    case 62:
    case 63:
      v13 = *(_DWORD *)a2;
      result = 0;
      *(_DWORD *)v4 = 1;
      *(_DWORD *)(v4 + 8) = 0;
      v14 = *(_DWORD *)(a3 + 8);
      v15 = (v13 + 15) & 0xFFFFFFF0;
      v16 = v14 - 1 + v5 * v15;
      goto LABEL_12;
    case 16:
    case 17:
    case 18:
    case 19:
    case 40:
    case 41:
    case 42:
    case 43:
      v17 = (*(_DWORD *)a2 + 11) / 12;
      *(_DWORD *)a4 = 1;
      v18 = 12 * v17;
      result = 0;
      *(_DWORD *)(a4 + 8) = 0;
      v19 = *(_DWORD *)(a3 + 8);
      *(_DWORD *)(a4 + 12) = 0;
      *(_DWORD *)(a4 + 16) = 0;
      *(_DWORD *)(a4 + 20) = v18;
      v20 = (v19 - 1 + 8 * v5 * v18 / 6) & -v19;
      *(_DWORD *)(v4 + 4) = v20;
      *(_DWORD *)(v4 + 260) = (v20 + 4095) & 0xFFFFF000;
      goto LABEL_10;
    case 20:
    case 21:
    case 22:
    case 23:
    case 44:
    case 45:
    case 46:
    case 47:
      v21 = (*(_DWORD *)a2 + 9) / 10;
      *(_DWORD *)a4 = 1;
      *(_DWORD *)(a4 + 8) = 0;
      v22 = *(_DWORD *)(a3 + 8);
      *(_DWORD *)(a4 + 12) = 0;
      *(_DWORD *)(a4 + 16) = 0;
      *(_DWORD *)(a4 + 20) = 10 * v21;
      *(_DWORD *)(a4 + 24) = v5;
      *(_DWORD *)(a4 + 32) = 1;
      v23 = (8 * v5 * 10 * v21 / 5 + v22 - 1) & -v22;
      *(_DWORD *)(a4 + 4) = v23;
      *(_DWORD *)(a4 + 28) = v23;
      *(_DWORD *)(a4 + 260) = (v23 + 4095) & 0xFFFFF000;
      return 0;
    case 28:
    case 29:
    case 30:
    case 31:
    case 52:
    case 53:
    case 54:
    case 55:
      result = 0;
      v24 = 5 * *(_DWORD *)a2;
      *(_DWORD *)(a4 + 8) = 0;
      v25 = (v24 / 4 + 7) & 0xFFFFFFF8;
      *(_DWORD *)v4 = 1;
      v26 = *(_DWORD *)(a3 + 8);
      *(_DWORD *)(v4 + 12) = 0;
      *(_DWORD *)(v4 + 16) = 0;
      *(_DWORD *)(v4 + 20) = v25;
      *(_DWORD *)(v4 + 24) = v5;
      v27 = (v26 - 1 + v5 * v25) & -v26;
      *(_DWORD *)(v4 + 4) = v27;
      *(_DWORD *)(v4 + 28) = v27;
      *(_DWORD *)(v4 + 260) = (v27 + 4095) & 0xFFFFF000;
      goto LABEL_13;
    case 32:
    case 33:
    case 34:
    case 35:
    case 56:
    case 57:
    case 58:
    case 59:
      v28 = *(_DWORD *)a2;
      *(_DWORD *)a4 = 1;
      v29 = (v28 + 31) & 0xFFFFFFE0;
      result = 0;
      *(_DWORD *)(a4 + 8) = 0;
      v30 = *(_DWORD *)(a3 + 8);
      *(_DWORD *)(a4 + 12) = 0;
      *(_DWORD *)(a4 + 16) = 0;
      *(_DWORD *)(a4 + 20) = v29;
      v20 = (v30 - 1 + ((signed int)(3 * v5 * v29) >> 1)) & -v30;
      *(_DWORD *)(v4 + 4) = v20;
      *(_DWORD *)(v4 + 260) = (v20 + 4095) & 0xFFFFF000;
LABEL_10:
      *(_DWORD *)(v4 + 24) = v5;
      *(_DWORD *)(v4 + 28) = v20;
      *(_DWORD *)(v4 + 32) = 1;
      break;
    case 64:
    case 65:
    case 66:
    case 67:
    case 68:
    case 69:
    case 70:
    case 71:
    case 72:
    case 73:
    case 74:
    case 75:
      v31 = *(_DWORD *)a2;
      result = 0;
      *(_DWORD *)v4 = 1;
      *(_DWORD *)(v4 + 8) = 0;
      v15 = (v31 + 7) & 0xFFFFFFF8;
      v14 = *(_DWORD *)(a3 + 8);
      v16 = v14 - 1 + 2 * v5 * v15;
LABEL_12:
      *(_DWORD *)(v4 + 12) = 0;
      v32 = v16 & -v14;
      *(_DWORD *)(v4 + 16) = 0;
      *(_DWORD *)(v4 + 4) = v32;
      *(_DWORD *)(v4 + 20) = v15;
      *(_DWORD *)(v4 + 24) = v5;
      *(_DWORD *)(v4 + 260) = (v32 + 4095) & 0xFFFFF000;
      *(_DWORD *)(v4 + 28) = v32;
LABEL_13:
      *(_DWORD *)(v4 + 32) = 1;
      break;
    default:
      _android_log_print(
        6,
        "mm-camera-intf",
        "%s: Invalid cam_format %d for raw stream",
        "mm_stream_calc_offset_raw",
        a1,
        a2);
      result = -1;
      break;
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00007D8C) --------------------------------------------------------
int __fastcall mm_stream_calc_offset_video(unsigned int *a1, int a2)
{
  unsigned int *v2; // r5@1
  unsigned int v3; // r0@1
  int v4; // r4@1
  unsigned int v5; // r7@2
  int v6; // r1@4
  unsigned int v7; // r6@5
  int v8; // r1@11
  unsigned int v9; // r2@12
  unsigned int v10; // r6@14
  int result; // r0@16

  v2 = a1;
  v3 = *a1;
  v4 = a2;
  if ( v3 )
    v5 = (v3 + 127) & 0xFFFFFF80;
  else
    v5 = 0;
  v6 = v2[1];
  if ( v6 )
    v7 = (v6 + 31) & 0xFFFFFFE0;
  else
    v7 = 0;
  if ( v3 )
  {
    if ( v6 )
      v3 = sub_6894(v3, v6);
    else
      v3 = 0;
  }
  v8 = v7 * v5;
  *(_DWORD *)(v4 + 260) = v3;
  *(_DWORD *)(v4 + 20) = v5;
  *(_DWORD *)(v4 + 8) = 0;
  *(_DWORD *)(v4 + 12) = 0;
  *(_DWORD *)v4 = 2;
  *(_DWORD *)(v4 + 4) = v7 * v5;
  *(_DWORD *)(v4 + 16) = 0;
  *(_DWORD *)(v4 + 24) = v7;
  *(_DWORD *)(v4 + 28) = *v2;
  *(_DWORD *)(v4 + 32) = v2[1];
  if ( *v2 )
    v9 = (*v2 + 127) & 0xFFFFFF80;
  else
    v9 = 0;
  v10 = v2[1];
  if ( v10 )
    v10 = (((signed int)(v10 + 1) >> 1) + 15) & 0xFFFFFFF0;
  *(_DWORD *)(v4 + 52) = v9;
  *(_DWORD *)(v4 + 36) = v3 - v8;
  result = 0;
  *(_DWORD *)(v4 + 56) = v10;
  *(_DWORD *)(v4 + 40) = 0;
  *(_DWORD *)(v4 + 44) = 0;
  *(_DWORD *)(v4 + 48) = 0;
  *(_DWORD *)(v4 + 60) = *v2;
  *(_DWORD *)(v4 + 64) = v2[1];
  return result;
}

//----- (00007E16) --------------------------------------------------------
int __fastcall mm_stream_calc_offset_metadata(int a1, int a2, int a3)
{
  int v3; // r1@1
  int v4; // r5@1
  int v5; // r6@1
  int v6; // r5@1

  *(_DWORD *)a3 = 1;
  *(_DWORD *)(a3 + 8) = 0;
  v3 = *(_DWORD *)(a2 + 8);
  v4 = *(_DWORD *)a1;
  v5 = *(_DWORD *)(a1 + 4);
  *(_DWORD *)(a3 + 12) = 0;
  *(_DWORD *)(a3 + 16) = 0;
  v6 = (v3 - 1 + v5 * v4) & -v3;
  *(_DWORD *)(a3 + 4) = v6;
  *(_DWORD *)(a3 + 260) = v6;
  *(_DWORD *)(a3 + 20) = *(_DWORD *)a1;
  *(_DWORD *)(a3 + 24) = *(_DWORD *)(a1 + 4);
  *(_DWORD *)(a3 + 28) = *(_DWORD *)a1;
  *(_DWORD *)(a3 + 32) = *(_DWORD *)(a1 + 4);
  return 0;
}

//----- (00007E50) --------------------------------------------------------
signed int __fastcall mm_stream_calc_offset_postproc(int a1, int a2, int a3, int a4)
{
  int v4; // r3@1
  int v5; // r6@1
  signed int result; // r0@3
  int v7; // r1@4
  int v8; // r2@5
  int v9; // r1@7
  int v10; // [sp+4h] [bp-1Ch]@1
  int v11; // [sp+8h] [bp-18h]@1
  int v12; // [sp+Ch] [bp-14h]@1

  v10 = a2;
  v11 = a3;
  v12 = a4;
  v4 = a3;
  v5 = a2;
  if ( *(_DWORD *)(a1 + 368) == 1 )
  {
    if ( *(_DWORD *)(a3 + 260) )
    {
      result = 0;
    }
    else
    {
      memcpy((void *)a3, (const void *)(a1 + 384), 0x108u);
      result = 0;
    }
  }
  else
  {
    v7 = *(_DWORD *)(a1 + 16);
    v11 = *(_DWORD *)(a1 + 12);
    v12 = v7;
    if ( *(_DWORD *)(a1 + 652) & 8 )
    {
      v8 = *(_DWORD *)(a1 + 680);
      if ( v8 == 2 || v8 == 8 )
      {
        v9 = *(_DWORD *)(a1 + 12);
        v11 = *(_DWORD *)(a1 + 16);
        v12 = v9;
      }
    }
    switch ( *(_DWORD *)(a1 + 376) )
    {
      case 1:
      case 2:
        result = j_mm_stream_calc_offset_preview(*(_DWORD *)(a1 + 8), (int)&v11, v4);
        break;
      case 3:
        result = j_mm_stream_calc_offset_snapshot(*(_DWORD *)(a1 + 8), (int)&v11, v5, v4);
        break;
      case 4:
        result = j_mm_stream_calc_offset_video((unsigned int *)&v11, v4);
        break;
      case 8:
        result = j_mm_stream_calc_offset_raw(*(_DWORD *)(a1 + 8), (int)&v11, v5, v4);
        break;
      case 7:
        result = j_mm_stream_calc_offset_metadata((int)&v11, v5, v4);
        break;
      default:
        _android_log_print(
          6,
          "mm-camera-intf",
          "%s: not supported for stream type %d",
          "mm_stream_calc_offset_postproc",
          *(_DWORD *)(a1 + 376),
          v10,
          v11,
          v12);
        result = -1;
        break;
    }
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00007F20) --------------------------------------------------------
signed int __fastcall mm_stream_calc_offset(int a1)
{
  int v1; // r5@1
  int v2; // r3@1
  int v3; // r1@1
  int v4; // r4@2
  int v5; // r0@4
  signed int v6; // r0@6
  signed int v7; // r4@8
  int v9; // [sp+8h] [bp-18h]@1
  int v10; // [sp+Ch] [bp-14h]@1

  v1 = a1;
  v2 = *(_DWORD *)(a1 + 16);
  v3 = *(_DWORD *)(v2 + 16);
  v9 = *(_DWORD *)(v2 + 12);
  v10 = v3;
  if ( *(_DWORD *)(v2 + 296) & 8 )
  {
    v4 = *(_DWORD *)(v2 + 324);
    if ( v4 == 2 || v4 == 8 )
    {
      v5 = *(_DWORD *)(v2 + 12);
      v9 = *(_DWORD *)(v2 + 16);
      v10 = v5;
    }
  }
  switch ( *(_DWORD *)(v2 + 4) )
  {
    case 1:
    case 2:
      v6 = j_mm_stream_calc_offset_preview(*(_DWORD *)(v2 + 8), (int)&v9, v2 + 20);
      goto LABEL_8;
    case 3:
      v6 = j_mm_stream_calc_offset_snapshot(*(_DWORD *)(v2 + 8), (int)&v9, v1 + 20, v2 + 20);
      goto LABEL_8;
    case 9:
      v6 = j_mm_stream_calc_offset_postproc(v2, v1 + 20, v2 + 20, v2);
      goto LABEL_8;
    case 4:
      v6 = j_mm_stream_calc_offset_video((unsigned int *)&v9, v2 + 20);
      goto LABEL_8;
    case 8:
      v6 = j_mm_stream_calc_offset_raw(*(_DWORD *)(v2 + 8), (int)&v9, v1 + 20, v2 + 20);
      goto LABEL_8;
    case 7:
      v6 = j_mm_stream_calc_offset_metadata((int)&v9, v1 + 20, v2 + 20);
LABEL_8:
      v7 = v6;
      break;
    default:
      v7 = -1;
      _android_log_print(
        6,
        "mm-camera-intf",
        "%s: not supported for stream type %d",
        "mm_stream_calc_offset",
        *(_DWORD *)(v2 + 4));
      break;
  }
  memcpy((void *)(v1 + 32), (const void *)(*(_DWORD *)(v1 + 16) + 20), 0x108u);
  return v7;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00008000) --------------------------------------------------------
signed int __fastcall mm_stream_sync_info(int a1, int a2)
{
  _DWORD *v2; // r1@1
  int v3; // r4@1
  int v4; // r2@1
  signed int result; // r0@1
  int v6; // [sp+4h] [bp-Ch]@1

  v6 = a2;
  v2 = *(_DWORD **)(a1 + 16);
  v3 = a1;
  v4 = *(_DWORD *)(a1 + 4);
  v6 = 0;
  *v2 = v4;
  result = j_mm_stream_calc_offset(a1);
  if ( !result )
    result = j_mm_camera_util_s_ctrl(*(_DWORD *)(v3 + 8), 134217746, &v6);
  return result;
}

//----- (00008028) --------------------------------------------------------
int __fastcall mm_stream_set_fmt(int a1)
{
  int v1; // r7@1
  int v2; // r5@1
  int v3; // r0@1
  int result; // r0@3
  int v5; // r0@4
  int v6; // r3@4
  unsigned int v7; // r0@4
  int v8; // r2@4
  signed int v9; // r0@4
  int v10; // r5@4
  char *v11; // r1@4
  signed int v12; // r2@4
  int v13; // lr@6
  char v14; // [sp+14h] [bp-11Ch]@4
  int v15; // [sp+18h] [bp-118h]@4
  int v16; // [sp+1Ch] [bp-114h]@4
  signed int v17; // [sp+20h] [bp-110h]@4
  char v18; // [sp+24h] [bp-10Ch]@4
  int v19; // [sp+28h] [bp-108h]@7
  int v20; // [sp+2Ch] [bp-104h]@7
  int v21; // [sp+30h] [bp-100h]@7
  int v22; // [sp+34h] [bp-FCh]@7
  int v23; // [sp+38h] [bp-F8h]@7
  int v24; // [sp+3Ch] [bp-F4h]@7
  int v25; // [sp+40h] [bp-F0h]@7
  int v26; // [sp+44h] [bp-ECh]@7
  int s; // [sp+48h] [bp-E8h]@4
  int v28; // [sp+4Ch] [bp-E4h]@7
  int v29; // [sp+50h] [bp-E0h]@7
  int v30; // [sp+54h] [bp-DCh]@7
  signed int v31; // [sp+58h] [bp-D8h]@7
  int v32; // [sp+5Ch] [bp-D4h]@7
  int v33; // [sp+60h] [bp-D0h]@7
  int v34; // [sp+64h] [bp-CCh]@7
  int v35; // [sp+68h] [bp-C8h]@7
  int v36; // [sp+6Ch] [bp-C4h]@7
  int v37; // [sp+70h] [bp-C0h]@7
  int v38; // [sp+74h] [bp-BCh]@7
  int v39; // [sp+78h] [bp-B8h]@7
  int v40; // [sp+7Ch] [bp-B4h]@7
  int v41; // [sp+114h] [bp-1Ch]@1

  v1 = a1;
  v2 = *(_DWORD *)(a1 + 16);
  v3 = *(_DWORD *)(v2 + 12);
  v41 = _stack_chk_guard;
  if ( v3 && *(_DWORD *)(v2 + 16) )
  {
    memset(&s, 0, 0xCCu);
    memset(&v14, 0, 0x34u);
    v5 = *(_DWORD *)(v2 + 16);
    v6 = *(_DWORD *)(v2 + 12);
    s = 9;
    v16 = v5;
    v7 = *(_DWORD *)(v2 + 8);
    *(_DWORD *)&v14 = 9;
    v15 = v6;
    v9 = j_mm_stream_get_v4l2_fmt(v7, 9, v8);
    v10 = *(_DWORD *)(v1 + 32);
    v11 = &v18;
    v12 = 0;
    v18 = *(_DWORD *)(v1 + 32);
    v17 = v9;
    while ( v12 < (unsigned __int8)v10 )
    {
      v13 = v1 + 32 * v12++;
      *((_DWORD *)v11 + 1) = *(_DWORD *)(v13 + 36);
      v11 += 4;
    }
    v28 = *(_DWORD *)&v14;
    v29 = v15;
    v30 = v16;
    v31 = v17;
    v32 = *(_DWORD *)&v18;
    v33 = v19;
    v34 = v20;
    v35 = v21;
    v36 = v22;
    v37 = v23;
    v38 = v24;
    v39 = v25;
    v40 = v26;
    result = ioctl(*(_DWORD *)(v1 + 8), 0xC0CC5605, &s);
  }
  else
  {
    _android_log_print(
      6,
      "mm-camera-intf",
      "%s:invalid input[w=%d,h=%d,fmt=%d]\n",
      "mm_stream_set_fmt",
      v3,
      *(_DWORD *)(v2 + 16),
      *(_DWORD *)(v2 + 8));
    result = -1;
  }
  if ( v41 != _stack_chk_guard )
    _stack_chk_fail(result);
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 2FFC: using guessed type int __fastcall _stack_chk_fail(_DWORD);

//----- (00008100) --------------------------------------------------------
signed int __fastcall mm_stream_config(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r7@1
  int v4; // r6@1
  int v5; // r12@1
  int v6; // r5@1
  int v7; // r0@1
  int v8; // r1@1
  int v9; // r2@1
  int v10; // r3@1
  int v11; // r1@1
  int v12; // r2@1
  int v13; // r7@1
  signed int result; // r0@1

  v2 = a1;
  v3 = a2;
  v4 = a1 + 424;
  v5 = a1 + 20;
  *(_DWORD *)(a1 + 16) = *(_DWORD *)a2;
  v6 = a2 + 16;
  *(_BYTE *)(a1 + 404) = *(_BYTE *)(*(_DWORD *)a2 + 284);
  v7 = *(_DWORD *)(a2 + 16);
  v8 = *(_DWORD *)(a2 + 20);
  v9 = *(_DWORD *)(v6 + 8);
  v10 = *(_DWORD *)(v6 + 12);
  *(_DWORD *)v4 = v7;
  *(_DWORD *)(v4 + 4) = v8;
  *(_DWORD *)(v4 + 8) = v9;
  *(_DWORD *)(v4 + 12) = v10;
  *(_DWORD *)(v4 + 16) = *(_DWORD *)(v6 + 16);
  v11 = *(_DWORD *)(v3 + 8);
  v12 = *(_DWORD *)(v3 + 12);
  *(_DWORD *)v5 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v5 + 4) = v11;
  *(_DWORD *)(v5 + 8) = v12;
  *(_DWORD *)(v2 + 352) = *(_DWORD *)(v3 + 36);
  v13 = *(_DWORD *)(v3 + 40);
  *(_BYTE *)(v2 + 360) = -1;
  *(_DWORD *)(v2 + 356) = v13;
  result = j_mm_stream_sync_info(v2, v11);
  if ( !result )
    result = j_j_j_mm_stream_set_fmt(v2);
  return result;
}

//----- (00008158) --------------------------------------------------------
signed int __fastcall mm_stream_fsm_acquired(int a1, int a2, int a3, int a4)
{
  int v4; // r4@1
  signed int result; // r0@2
  signed int v6; // r3@2

  v4 = a1;
  switch ( a2 )
  {
    case 2:
      result = j_mm_stream_config(a1, a3);
      v6 = 3;
      goto LABEL_4;
    case 1:
      result = j_mm_stream_release(a1);
      v6 = 0;
LABEL_4:
      *(_DWORD *)(v4 + 12) = v6;
      break;
    case 10:
      result = j_j_j_mm_stream_set_parm(a1, *(_DWORD *)(a3 + 4), a3);
      break;
    case 11:
      result = j_j_j_mm_stream_get_parm(a1, *(_DWORD *)(a3 + 4), a3);
      break;
    default:
      _android_log_print(
        6,
        "mm-camera-intf",
        "%s: invalid state (%d) for evt (%d), in(%p), out(%p)",
        "mm_stream_fsm_acquired",
        *(_DWORD *)(a1 + 12),
        a2,
        a3,
        a4);
      result = 0;
      break;
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (000081D0) --------------------------------------------------------
signed int __fastcall mm_stream_fsm_cfg(int a1, int a2, int a3, int a4)
{
  int v4; // r4@1
  signed int result; // r0@2
  signed int v6; // r3@2

  v4 = a1;
  switch ( a2 )
  {
    case 2:
      result = j_mm_stream_config(a1, a3);
      v6 = 3;
      goto LABEL_8;
    case 1:
      result = j_mm_stream_release(a1);
      v6 = 0;
      goto LABEL_8;
    case 10:
      result = j_j_j_mm_stream_set_parm(a1, *(_DWORD *)(a3 + 4), a3);
      break;
    case 11:
      result = j_j_j_mm_stream_get_parm(a1, *(_DWORD *)(a3 + 4), a3);
      break;
    case 3:
      result = j_mm_stream_init_bufs(a1, a2, (int (*)())a3);
      if ( !result )
      {
        v6 = 4;
LABEL_8:
        *(_DWORD *)(v4 + 12) = v6;
      }
      break;
    default:
      _android_log_print(
        6,
        "mm-camera-intf",
        "%s: invalid state (%d) for evt (%d), in(%p), out(%p)",
        "mm_stream_fsm_cfg",
        *(_DWORD *)(a1 + 12),
        a2,
        a3,
        a4);
      result = 0;
      break;
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00008254) --------------------------------------------------------
signed int __fastcall mm_stream_buf_done(int a1, int a2, int a3)
{
  pthread_mutex_t *v3; // r6@1
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r3@1
  int v7; // r1@1
  int v8; // r0@3
  signed int v9; // r7@3
  int v11; // [sp+8h] [bp-18h]@1

  v11 = a3;
  v3 = (pthread_mutex_t *)(a1 + 400);
  v4 = a2;
  v5 = a1;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 400));
  v6 = *(_BYTE *)(v4 + 8);
  v7 = *(_DWORD *)(v5 + 412);
  if ( *(_BYTE *)(v7 + 3 * v6) )
  {
    --*(_BYTE *)(v7 + 3 * v6);
    if ( *(_BYTE *)(*(_DWORD *)(v5 + 412) + 3 * *(_BYTE *)(v4 + 8)) )
    {
      v9 = 0;
    }
    else
    {
      v8 = j_mm_stream_qbuf(v5, v4);
      v9 = v8;
      if ( v8 >= 0 )
        *(_BYTE *)(3 * *(_BYTE *)(v4 + 8) + *(_DWORD *)(v5 + 412) + 2) = 1;
      else
        _android_log_print(
          6,
          "mm-camera-intf",
          "%s: mm_camera_stream_qbuf(idx=%d) err=%d\n",
          "mm_stream_buf_done",
          *(_BYTE *)(v4 + 8),
          v8,
          v11);
    }
  }
  else
  {
    v9 = -1;
  }
  pthread_mutex_unlock(v3);
  return v9;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (000082E4) --------------------------------------------------------
_DWORD *__fastcall sub_82E4(_DWORD *result, int a2)
{
  _DWORD *v2; // r5@1
  int v3; // r9@1
  int v4; // r10@4
  int v5; // r1@4
  int v6; // r0@4
  int v7; // r2@4
  int v8; // r4@4
  int v9; // r3@7
  char v10; // lr@8
  int v11; // r2@9
  int v12; // r2@12
  int s; // [sp+Ch] [bp-3Ch]@4
  int v14; // [sp+10h] [bp-38h]@4
  char v15; // [sp+14h] [bp-34h]@4
  int v16; // [sp+18h] [bp-30h]@4

  v2 = result;
  v3 = a2;
  if ( a2 )
  {
    if ( *result )
    {
      result = (_DWORD *)_android_log_print(
                           6,
                           "mm-camera-intf",
                           "%s: Wrong cmd_type (%d) for dataCB",
                           "mm_stream_dispatch_app_data",
                           *result);
    }
    else
    {
      v4 = a2 + 48;
      memset(&s, 0, 0x1Cu);
      v5 = *(_DWORD *)(v3 + 416);
      v6 = v2[3];
      v15 = 1;
      v7 = *(_DWORD *)(v5 + 2132);
      v16 = v6;
      s = *(_DWORD *)(v7 + 4);
      v8 = v3;
      v14 = *(_DWORD *)v5;
      pthread_mutex_lock((pthread_mutex_t *)(v3 + 348));
      do
      {
        if ( *(_DWORD *)(v8 + 352) )
        {
          if ( *(_BYTE *)(v8 + 360) )
          {
            pthread_mutex_lock((pthread_mutex_t *)(v3 + 400));
            v9 = 3 * *(_BYTE *)(v2[3] + 8);
            ++*(_BYTE *)(*(_DWORD *)(v3 + 412) + v9);
            pthread_mutex_unlock((pthread_mutex_t *)(v3 + 400));
            (*(void (__fastcall **)(int *, _DWORD))(v8 + 352))(&s, *(_DWORD *)(v8 + 356));
          }
          v10 = *(_BYTE *)(v8 + 360);
          if ( (signed int)*(_BYTE *)(v8 + 360) > 0 )
          {
            v11 = (unsigned __int8)(v10 - 1);
            *(_BYTE *)(v8 + 360) = v11;
            if ( v10 == 1 )
            {
              *(_DWORD *)(v8 + 352) = v11;
              *(_DWORD *)(v8 + 356) = v11;
            }
          }
        }
        v8 += 12;
      }
      while ( v8 != v4 );
      pthread_mutex_unlock((pthread_mutex_t *)(v3 + 348));
      result = (_DWORD *)j_mm_stream_buf_done(v3, v2[3], v12);
    }
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (000083C4) --------------------------------------------------------
int __fastcall mm_stream_get_queued_buf_count(int a1)
{
  pthread_mutex_t *v1; // r4@1
  int v2; // r5@1
  int v3; // r5@1

  v1 = (pthread_mutex_t *)(a1 + 400);
  v2 = a1;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 400));
  v3 = *(_BYTE *)(v2 + 444);
  pthread_mutex_unlock(v1);
  return v3;
}

//----- (000083E0) --------------------------------------------------------
signed int __fastcall mm_stream_fsm_active(int a1, int a2, int a3, int a4)
{
  int v4; // r4@1
  int v6; // r6@4
  int v7; // r3@4
  signed int v8; // r5@5
  int v9; // r1@9
  int v10; // r2@9
  int v11; // r3@9

  v4 = a1;
  switch ( a2 )
  {
    case 13:
      return j_j_j_mm_stream_get_queued_buf_count(a1);
    case 9:
      return j_j_j_mm_stream_buf_done(a1, a3, a3);
    case 8:
      v6 = j_mm_stream_streamoff((int *)a1);
      pthread_mutex_lock((pthread_mutex_t *)(v4 + 348));
      v7 = v4;
      break;
    case 10:
      return j_j_j_mm_stream_set_parm(a1, *(_DWORD *)(a3 + 4), a3);
    case 11:
      return j_j_j_mm_stream_get_parm(a1, *(_DWORD *)(a3 + 4), a3);
    case 12:
      return j_j_j_mm_stream_set_parm_0(a1, a3, a3);
    default:
      v6 = 0;
      _android_log_print(
        6,
        "mm-camera-intf",
        "%s: invalid state (%d) for evt (%d), in(%p), out(%p)",
        "mm_stream_fsm_active",
        *(_DWORD *)(a1 + 12),
        a2,
        a3,
        a4);
      return v6;
  }
  while ( 1 )
  {
    v8 = *(_DWORD *)(v7 + 352);
    if ( v8 )
      break;
    v7 += 12;
    if ( v7 == v4 + 48 )
      goto LABEL_9;
  }
  v8 = 1;
LABEL_9:
  pthread_mutex_unlock((pthread_mutex_t *)(v4 + 348));
  if ( v8 )
    j_mm_camera_cmd_thread_release(v4 + 296, v9, v10, v11);
  *(_DWORD *)(v4 + 12) = 5;
  return v6;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (000084A8) --------------------------------------------------------
int __fastcall mm_stream_fsm_fn(int a1, int (*a2)(int), int a3, int a4)
{
  int result; // r0@2

  switch ( *(_DWORD *)(a1 + 12) )
  {
    case 1:
      result = j_j_j_mm_stream_fsm_inited(a1, (int)a2, a3, a4);
      break;
    case 2:
      result = j_j_j_mm_stream_fsm_acquired(a1, (int)a2, a3, a4);
      break;
    case 3:
      result = j_j_j_mm_stream_fsm_cfg(a1, (int)a2, a3, a4);
      break;
    case 4:
      result = j_j_j_mm_stream_fsm_buffed(a1, a2, a3, a4);
      break;
    case 5:
      result = j_j_j_mm_stream_fsm_reg(a1, (int)a2, a3, a4);
      break;
    case 6:
      result = j_j_j_mm_stream_fsm_active(a1, (int)a2, a3, a4);
      break;
    default:
      result = -1;
      break;
  }
  return result;
}

//----- (000084F6) --------------------------------------------------------
signed int __fastcall mm_stream_reg_buf_cb(int a1, int a2)
{
  pthread_mutex_t *v2; // r6@1
  int v3; // r7@1
  int v4; // r5@1
  int v5; // r2@1
  int v6; // r3@2
  signed int v7; // r4@2
  int v8; // r1@3
  int v9; // r2@3
  int v10; // r12@3

  v2 = (pthread_mutex_t *)(a1 + 348);
  v3 = a1;
  v4 = a2;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 348));
  v5 = 0;
  do
  {
    v6 = v3 + 12 * v5;
    v7 = *(_DWORD *)(v6 + 352);
    if ( !v7 )
    {
      v8 = *(_DWORD *)(v4 + 4);
      v9 = *(_DWORD *)(v4 + 8);
      v10 = v6 + 352;
      *(_DWORD *)v10 = *(_DWORD *)v4;
      *(_DWORD *)(v10 + 4) = v8;
      *(_DWORD *)(v10 + 8) = v9;
      goto LABEL_6;
    }
    ++v5;
  }
  while ( v5 != 4 );
  v7 = -1;
LABEL_6:
  pthread_mutex_unlock(v2);
  return v7;
}

//----- (00008538) --------------------------------------------------------
int __fastcall sub_8538(int a1, char a2)
{
  int v2; // r4@1
  char v3; // r5@1
  ssize_t v4; // r0@1
  ssize_t v5; // r6@1
  _DWORD *v6; // r0@2
  char s; // [sp+Ch] [bp-1Ch]@1

  v2 = a1;
  v3 = a2;
  memset(&s, 0, 0xCu);
  s = v3;
  pthread_mutex_lock((pthread_mutex_t *)(v2 + 136));
  *(_DWORD *)(v2 + 144) = 0;
  v4 = write(*(_DWORD *)(v2 + 72), &s, 0xCu);
  v5 = v4;
  if ( v4 > 0 )
  {
    if ( !*(_DWORD *)(v2 + 144) )
      pthread_cond_wait((pthread_cond_t *)(v2 + 140), (pthread_mutex_t *)(v2 + 136));
  }
  else
  {
    v6 = (_DWORD *)_errno(v4);
    _android_log_print(6, "mm-camera-intf", "%s: len = %d, errno = %d", "mm_camera_poll_sig", v5, *v6);
  }
  pthread_mutex_unlock((pthread_mutex_t *)(v2 + 136));
  return 0;
}
// 2FC0: using guessed type int __fastcall _errno(_DWORD);
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (000085B4) --------------------------------------------------------
int __fastcall sub_85B4(int a1)
{
  pthread_mutex_t *v1; // r6@1
  int v2; // r5@1
  int v3; // r2@1
  _DWORD *v4; // r3@1
  int v5; // r4@1
  int v6; // r5@7

  v1 = (pthread_mutex_t *)(a1 + 16);
  v2 = a1;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 16));
  v5 = *(_DWORD *)v2;
  if ( *(_DWORD *)v2 == v2 )
  {
    v5 = 0;
  }
  else
  {
    v3 = *(_DWORD *)v5;
    v4 = *(_DWORD **)(v5 + 4);
  }
  if ( *(_DWORD *)v2 != v2 )
  {
    *(_DWORD *)(v3 + 4) = v4;
    *v4 = *(_DWORD *)v5;
    *(_DWORD *)v5 = v5;
    *(_DWORD *)(v5 + 4) = v5;
    --*(_DWORD *)(v2 + 12);
  }
  pthread_mutex_unlock(v1);
  if ( v5 )
  {
    v6 = *(_DWORD *)(v5 + 8);
    free((void *)v5);
  }
  else
  {
    v6 = 0;
  }
  return v6;
}

//----- (000085FC) --------------------------------------------------------
int __fastcall sub_85FC(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r11@2
  int v5; // r5@3
  int v6; // r0@5
  int *v7; // r0@6
  char *v8; // r0@7
  const char *v9; // r1@7
  const char *v10; // r2@7
  const char *v11; // r3@7
  signed int v12; // r9@8
  void *i; // r5@8
  void (__fastcall *v14)(void *, _DWORD); // r3@12
  char *v16; // [sp+0h] [bp-30h]@7
  int v17; // [sp+4h] [bp-2Ch]@1
  int v18; // [sp+8h] [bp-28h]@1

  v17 = a2;
  v18 = a3;
  v3 = a1;
  do
  {
    while ( 1 )
    {
      v4 = 0;
      pthread_mutex_lock((pthread_mutex_t *)(v3 + 36));
      while ( 1 )
      {
        v5 = *(_DWORD *)(v3 + 32);
        if ( v5 )
          break;
        v4 = pthread_cond_wait((pthread_cond_t *)(v3 + 40), (pthread_mutex_t *)(v3 + 36));
      }
      *(_DWORD *)(v3 + 32) = v5 - 1;
      v6 = pthread_mutex_unlock((pthread_mutex_t *)(v3 + 36));
      if ( !v4 )
        break;
      v7 = (int *)_errno(v6);
      if ( *v7 != 22 )
      {
        v8 = strerror(*v7);
        v9 = "mm-camera-intf";
        v10 = "%s: cam_sem_wait error (%s)";
        v11 = "mm_camera_cmd_thread";
        v16 = v8;
        goto LABEL_18;
      }
    }
    v12 = 1;
    for ( i = (void *)sub_85B4(v3); i; i = (void *)sub_85B4(v3) )
    {
      if ( *(_DWORD *)i <= 8u && (1 << *(_DWORD *)i) & 0x1FB )
      {
        v14 = *(void (__fastcall **)(void *, _DWORD))(v3 + 44);
        if ( v14 )
          v14(i, *(_DWORD *)(v3 + 48));
      }
      else
      {
        v12 = 0;
        _android_log_print(
          6,
          "mm-camera-intf",
          "%s: MM_CAMERA_CMD_TYPE_EXIT - cmd_pid = 0x%x",
          "mm_camera_cmd_thread",
          *(_DWORD *)(v3 + 20),
          v17,
          v18);
      }
      free(i);
    }
  }
  while ( v12 );
  pthread_mutex_lock((pthread_mutex_t *)(v3 + 28));
  pthread_cond_signal((pthread_cond_t *)(v3 + 24));
  pthread_mutex_unlock((pthread_mutex_t *)(v3 + 28));
  v16 = *(char **)(v3 + 20);
  v9 = "mm-camera-intf";
  v10 = "%s: X - cmd_pid = 0x%x";
  v11 = "mm_camera_cmd_thread";
LABEL_18:
  _android_log_print(6, v9, v10, v11, v16, v17, v18);
  return 0;
}
// 2FC0: using guessed type int __fastcall _errno(_DWORD);
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00008714) --------------------------------------------------------
int __fastcall sub_8714(int a1, int a2, int a3, int a4)
{
  int v4; // r4@1
  int v5; // r3@1
  pthread_mutex_t *v6; // r5@1
  pthread_cond_t *v7; // r7@1
  int v8; // r8@2
  int v9; // r3@2
  int v10; // r0@2
  int v11; // r2@5
  __int16 v12; // r1@7
  int v13; // r0@8
  int v14; // r3@8
  int v15; // r3@9
  signed int i; // r2@12
  int v17; // r10@13
  int v18; // r3@13
  int v19; // r9@21
  signed int v20; // r10@21
  void (__fastcall *v21)(_DWORD); // r3@25
  void (__fastcall *v22)(_DWORD); // r3@29
  int buf; // [sp+4h] [bp-2Ch]@1
  int v25; // [sp+8h] [bp-28h]@1
  int v26; // [sp+Ch] [bp-24h]@1

  buf = a2;
  v25 = a3;
  v26 = a4;
  v4 = a1;
  v5 = *(_BYTE *)(a1 + 132);
  v6 = (pthread_mutex_t *)(a1 + 136);
  v7 = (pthread_cond_t *)(a1 + 140);
  *(_BYTE *)(a1 + 132) = v5 + 1;
  *(_DWORD *)(a1 + 8 * v5 + 92) = *(_DWORD *)(a1 + 68);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 136));
  *(_DWORD *)(v4 + 144) = 1;
  pthread_cond_signal(v7);
  pthread_mutex_unlock(v6);
  *(_DWORD *)(v4 + 80) = 1;
  do
  {
    v8 = v4;
    v9 = v4;
    v10 = v4 + 8 * *(_BYTE *)(v4 + 132);
    while ( v9 != v10 )
    {
      *(_WORD *)(v9 + 96) = 67;
      v9 += 8;
    }
    v11 = *(_DWORD *)(v4 + 84);
    if ( _poll_chk(v4 + 92) <= 0 )
    {
      usleep(0xAu);
    }
    else if ( (*(_WORD *)(v4 + 98) & 0x41) == 65 )
    {
      read(*(_DWORD *)(v4 + 68), &buf, 0xCu);
      v12 = (unsigned __int8)buf;
      if ( (_BYTE)buf )
      {
        *(_DWORD *)(v4 + 80) = 0;
      }
      else
      {
        v13 = *(_DWORD *)(v4 + 68);
        v14 = *(_DWORD *)v4;
        *(_WORD *)(v4 + 96) = 67;
        *(_DWORD *)(v4 + 92) = v13;
        *(_BYTE *)(v4 + 132) = 1;
        if ( v14 )
        {
          if ( v14 == 1 )
          {
            for ( i = 2; ; ++i )
            {
              v17 = *(_DWORD *)(v8 + 4);
              v8 += 16;
              v18 = v4 + 8 * (i - 1);
              if ( v17 <= 0 )
              {
                *(_DWORD *)(v18 + 92) = -1;
                *(_WORD *)(v18 + 96) = v12;
              }
              else
              {
                *(_DWORD *)(v18 + 92) = v17;
                *(_WORD *)(v18 + 96) = 67;
              }
              if ( v8 == v4 + 64 )
                break;
            }
            *(_BYTE *)(v4 + 132) = i;
          }
        }
        else
        {
          v15 = *(_DWORD *)(v4 + 4);
          if ( v15 > 0 )
          {
            *(_DWORD *)(v4 + 100) = v15;
            *(_WORD *)(v4 + 104) = 67;
            *(_BYTE *)(v4 + 132) = 2;
          }
        }
      }
      pthread_mutex_lock(v6);
      *(_DWORD *)(v4 + 144) = 1;
      pthread_cond_signal(v7);
      pthread_mutex_unlock(v6);
    }
    else
    {
      v19 = v4;
      v20 = 1;
      while ( v20 < *(_BYTE *)(v4 + 132) )
      {
        if ( !*(_DWORD *)v4 )
        {
          if ( *(_WORD *)(v19 + 106) & 2 )
          {
            v21 = *(void (__fastcall **)(_DWORD))(v8 + 8);
            if ( v21 )
              v21(*(_DWORD *)(v8 + 16));
          }
        }
        if ( *(_DWORD *)v4 == 1 && (*(_WORD *)(v19 + 106) & 0x41) == 65 )
        {
          v22 = *(void (__fastcall **)(_DWORD))(v8 + 8);
          if ( v22 )
            v22(*(_DWORD *)(v8 + 16));
        }
        ++v20;
        v19 += 8;
        v8 += 16;
      }
    }
  }
  while ( *(_DWORD *)(v4 + 80) == 1 );
  return 0;
}
// 3554: using guessed type int __fastcall _poll_chk(_DWORD);

//----- (00008892) --------------------------------------------------------
int __fastcall mm_camera_poll_thread_notify_entries_updated(int a1)
{
  return sub_8538(a1, 0);
}

//----- (00008898) --------------------------------------------------------
int __fastcall mm_camera_poll_thread_add_poll_fd(_DWORD *a1, int a2, int a3, int a4, int a5)
{
  int v5; // r9@1
  int v6; // r5@1
  int v7; // r7@1
  int v8; // r10@1
  unsigned int v9; // r0@2
  unsigned int v10; // r4@2
  int v11; // r1@5
  int v12; // r0@5

  v5 = a4;
  v6 = (int)a1;
  v7 = a2;
  v8 = a3;
  if ( *a1 == 1 )
  {
    v9 = j_mm_camera_util_get_index_by_handler(a2);
    v10 = v9;
    if ( v9 > 3 )
    {
      _android_log_print(
        6,
        "mm-camera-intf",
        "%s: invalid handler %d (%d)",
        "mm_camera_poll_thread_add_poll_fd",
        v7,
        v9);
      return -1;
    }
  }
  else
  {
    v10 = 0;
  }
  v11 = v6 + 16 * v10 + 8;
  v12 = v6 + 16 * (signed __int16)v10;
  *(_DWORD *)(v12 + 4) = v8;
  *(_DWORD *)(v11 + 4) = v7;
  *(_DWORD *)(v12 + 8) = v5;
  *(_DWORD *)(v11 + 8) = a5;
  return sub_8538(v6, 0);
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00008914) --------------------------------------------------------
int __fastcall mm_camera_poll_thread_del_poll_fd(_DWORD *a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  unsigned int v5; // r0@2
  int v6; // r12@6
  int v8; // [sp+8h] [bp-10h]@1

  v8 = a3;
  v3 = (int)a1;
  v4 = a2;
  if ( *a1 == 1 )
  {
    v5 = j_mm_camera_util_get_index_by_handler(a2);
    if ( v5 > 3 )
      goto LABEL_7;
  }
  else
  {
    v5 = 0;
  }
  if ( v4 == *(_DWORD *)(v3 + 16 * v5 + 12) )
  {
    v6 = v3 + 16 * (signed __int16)v5;
    *(_DWORD *)(v6 + 4) = -1;
    *(_DWORD *)(v3 + 16 * v5 + 12) = 0;
    *(_DWORD *)(v6 + 8) = 0;
    return sub_8538(v3, 0);
  }
LABEL_7:
  _android_log_print(
    6,
    "mm-camera-intf",
    "%s: invalid handler %d (%d)",
    "mm_camera_poll_thread_del_poll_fd",
    v4,
    v5,
    v8);
  return -1;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00008988) --------------------------------------------------------
signed int __fastcall mm_camera_poll_thread_launch(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r0@1
  int v4; // r6@1
  signed int result; // r0@2
  int v6; // [sp+4h] [bp-1Ch]@1

  v6 = a2;
  *(_DWORD *)a1 = a2;
  v2 = a1;
  *(_DWORD *)(a1 + 68) = 0;
  v3 = a1 + 68;
  *(_DWORD *)(v3 + 4) = 0;
  v4 = pipe((int *)v3);
  if ( v4 >= 0 )
  {
    *(_DWORD *)(v2 + 84) = -1;
    pthread_mutex_init((pthread_mutex_t *)(v2 + 136), 0);
    pthread_cond_init((pthread_cond_t *)(v2 + 140), 0);
    pthread_mutex_lock((pthread_mutex_t *)(v2 + 136));
    *(_DWORD *)(v2 + 144) = 0;
    pthread_create((pthread_t *)(v2 + 76), 0, (void *(*)(void *))sub_8714, (void *)v2);
    if ( !*(_DWORD *)(v2 + 144) )
      pthread_cond_wait((pthread_cond_t *)(v2 + 140), (pthread_mutex_t *)(v2 + 136));
    pthread_mutex_unlock((pthread_mutex_t *)(v2 + 136));
    result = v4;
  }
  else
  {
    _android_log_print(6, "mm-camera-intf", "%s: pipe open rc=%d\n", "mm_camera_poll_thread_launch", v4, v6);
    result = -1;
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00008A20) --------------------------------------------------------
int __fastcall mm_camera_poll_thread_release(int a1)
{
  int v1; // r4@1
  int v2; // r0@5
  int v3; // r0@7

  v1 = a1;
  if ( *(_DWORD *)(a1 + 80) )
  {
    sub_8538(a1, 1);
    if ( pthread_join(*(_DWORD *)(v1 + 76), 0) )
      _android_log_print(6, "mm-camera-intf", "%s: pthread dead already\n", "mm_camera_poll_thread_release");
    v2 = *(_DWORD *)(v1 + 68);
    if ( v2 )
      close(v2);
    v3 = *(_DWORD *)(v1 + 72);
    if ( v3 )
      close(v3);
    pthread_mutex_destroy((pthread_mutex_t *)(v1 + 136));
    pthread_cond_destroy((pthread_cond_t *)(v1 + 140));
    memset((void *)v1, 0, 0x94u);
  }
  else
  {
    _android_log_print(6, "mm-camera-intf", "%s: err, poll thread is not running.\n", "mm_camera_poll_thread_release");
  }
  return 0;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00008AA4) --------------------------------------------------------
int __fastcall mm_camera_cmd_thread_launch(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r7@1
  int v5; // r8@1
  int v7; // [sp+0h] [bp-30h]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  pthread_attr_init((pthread_attr_t *)&v7);
  pthread_attr_setdetachstate((pthread_attr_t *)&v7, 1);
  pthread_mutex_init((pthread_mutex_t *)(v3 + 28), 0);
  pthread_cond_init((pthread_cond_t *)(v3 + 24), 0);
  pthread_mutex_init((pthread_mutex_t *)(v3 + 36), 0);
  pthread_cond_init((pthread_cond_t *)(v3 + 40), 0);
  *(_DWORD *)(v3 + 32) = 0;
  pthread_mutex_init((pthread_mutex_t *)(v3 + 16), 0);
  *(_DWORD *)v3 = v3;
  *(_DWORD *)(v3 + 4) = v3;
  *(_DWORD *)(v3 + 12) = 0;
  *(_DWORD *)(v3 + 44) = v5;
  *(_DWORD *)(v3 + 48) = v4;
  pthread_create((pthread_t *)(v3 + 20), (const pthread_attr_t *)&v7, (void *(*)(void *))sub_85FC, (void *)v3);
  return 0;
}

//----- (00008B1C) --------------------------------------------------------
signed int __fastcall mm_camera_cmd_thread_stop(int a1, int a2, int a3)
{
  int v3; // r4@1
  _DWORD *v4; // r0@1
  _DWORD *v5; // r7@1
  signed int result; // r0@2
  _DWORD *v7; // r0@3
  _DWORD *v8; // r5@3
  _DWORD *v9; // r0@4
  int v10; // [sp+0h] [bp-20h]@1
  int v11; // [sp+4h] [bp-1Ch]@1
  int v12; // [sp+8h] [bp-18h]@1

  v10 = a1;
  v11 = a2;
  v12 = a3;
  v3 = a1;
  v4 = malloc(0x88u);
  v5 = v4;
  if ( v4 )
  {
    memset(v4, 0, 0x88u);
    *v5 = 2;
    pthread_mutex_lock((pthread_mutex_t *)(v3 + 28));
    v7 = malloc(0xCu);
    v8 = v7;
    if ( v7 )
    {
      memset(v7, 0, 0xCu);
      v8[2] = v5;
      pthread_mutex_lock((pthread_mutex_t *)(v3 + 16));
      v9 = *(_DWORD **)(v3 + 4);
      *v8 = v3;
      *(_DWORD *)(v3 + 4) = v8;
      v8[1] = v9;
      *v9 = v8;
      ++*(_DWORD *)(v3 + 12);
      pthread_mutex_unlock((pthread_mutex_t *)(v3 + 16));
    }
    pthread_mutex_lock((pthread_mutex_t *)(v3 + 36));
    ++*(_DWORD *)(v3 + 32);
    pthread_cond_signal((pthread_cond_t *)(v3 + 40));
    pthread_mutex_unlock((pthread_mutex_t *)(v3 + 36));
    _android_log_print(
      6,
      "mm-camera-intf",
      "%s: before join 0x%x, qsize = %d",
      "mm_camera_cmd_thread_stop",
      *(_DWORD *)(v3 + 20),
      *(_DWORD *)(v3 + 12),
      v12);
    pthread_cond_wait((pthread_cond_t *)(v3 + 24), (pthread_mutex_t *)(v3 + 28));
    pthread_mutex_unlock((pthread_mutex_t *)(v3 + 28));
    result = 0;
  }
  else
  {
    _android_log_print(
      6,
      "mm-camera-intf",
      "%s: No memory for mm_camera_cmdcb_t",
      "mm_camera_cmd_thread_stop",
      v10,
      v11,
      v12);
    result = -1;
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00008BF4) --------------------------------------------------------
int __fastcall mm_camera_cmd_thread_destroy(int a1)
{
  pthread_mutex_t *v1; // r6@1
  int v2; // r5@1
  void *v3; // r4@1
  void *v4; // r7@3
  _DWORD *v5; // r3@3
  void *v6; // r0@3
  void *v7; // r0@5

  v1 = (pthread_mutex_t *)(a1 + 16);
  v2 = a1;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 16));
  v3 = *(void **)v2;
  while ( v3 != (void *)v2 )
  {
    v4 = *(void **)v3;
    v5 = (_DWORD *)*((_DWORD *)v3 + 1);
    *(_DWORD *)(*(_DWORD *)v3 + 4) = v5;
    *v5 = *(_DWORD *)v3;
    *(_DWORD *)v3 = v3;
    *((_DWORD *)v3 + 1) = v3;
    --*(_DWORD *)(v2 + 12);
    v6 = (void *)*((_DWORD *)v3 + 2);
    if ( v6 )
      free(v6);
    v7 = v3;
    v3 = v4;
    free(v7);
  }
  *((_DWORD *)v3 + 3) = 0;
  pthread_mutex_unlock(v1);
  pthread_mutex_destroy(v1);
  pthread_mutex_destroy((pthread_mutex_t *)((char *)v3 + 36));
  pthread_cond_destroy((pthread_cond_t *)((char *)v3 + 40));
  memset(v3, 0, 0x34u);
  return 0;
}

//----- (00008C5C) --------------------------------------------------------
signed int __fastcall mm_camera_cmd_thread_release(int a1, int a2, int a3, int a4)
{
  int v4; // r5@1
  signed int result; // r0@3

  v4 = a1;
  if ( *(_DWORD *)a1 || *(_DWORD *)(a1 + 4) )
  {
    result = j_mm_camera_cmd_thread_stop(a1, a2, a3);
    if ( !result )
      result = j_j_j_mm_camera_cmd_thread_destroy(v4);
  }
  else
  {
    _android_log_print(6, "mm-camera-intf", "%s: cmd thread does not launched ever", "mm_camera_cmd_thread_release", a4);
    result = 0;
  }
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00008CA0) --------------------------------------------------------
signed int __fastcall mm_camera_socket_create(int a1, int a2)
{
  int v2; // r8@1
  signed int result; // r0@3
  signed int v4; // r4@5
  int v5; // r0@7
  int v6; // r0@8
  int *v7; // r0@8
  char *v8; // r0@8
  __int16 s; // [sp+Ch] [bp-94h]@7
  char v10; // [sp+Eh] [bp-92h]@7
  int v11; // [sp+7Ch] [bp-24h]@1

  v2 = a1;
  v11 = _stack_chk_guard;
  if ( a2 )
  {
    if ( a2 != 1 )
    {
      _android_log_print(6, "mm-camera-intf", "%s: unknown socket type =%d", "mm_camera_socket_create", a2);
      result = -1;
      goto LABEL_10;
    }
  }
  else
  {
    a2 = 2;
  }
  v4 = socket(1, a2, 0);
  _android_log_print(6, "mm-camera-intf", "%s: socket_fd =%d", "mm_camera_socket_create", v4);
  if ( v4 >= 0 )
  {
    memset(&s, 0, 0x6Eu);
    s = 1;
    snprintf(&v10, 0x6Cu, "/data/cam_socket%d", v2);
    v5 = connect(v4, (const struct sockaddr *)&s, 0x6Eu);
    if ( v5 )
    {
      _android_log_print(6, "mm-camera-intf", "%s: value of rc=%d", "mm_camera_socket_create", v5);
      v6 = close(v4);
      v4 = -1;
      v7 = (int *)_errno(v6);
      v8 = strerror(*v7);
      _android_log_print(6, "mm-camera-intf", "%s: socket_fd=%d %s ", "mm_camera_socket_create", -1, v8);
    }
  }
  else
  {
    _android_log_print(6, "mm-camera-intf", "%s: error create socket fd =%d", "mm_camera_socket_create", v4);
  }
  result = v4;
LABEL_10:
  if ( v11 != _stack_chk_guard )
    _stack_chk_fail(result);
  return result;
}
// 2FC0: using guessed type int __fastcall _errno(_DWORD);
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 2FFC: using guessed type int __fastcall _stack_chk_fail(_DWORD);

//----- (00008DB4) --------------------------------------------------------
int __fastcall mm_camera_socket_close(int result)
{
  if ( result > 0 )
    result = j_j_close(result);
  return result;
}

//----- (00008DC0) --------------------------------------------------------
ssize_t __fastcall mm_camera_socket_sendmsg(int a1, int a2, int a3, int a4)
{
  int v4; // r6@1
  int v5; // r8@1
  int v6; // r9@1
  int v7; // r7@1
  ssize_t result; // r0@4
  int v9; // [sp+0h] [bp-58h]@2
  int v10; // [sp+4h] [bp-54h]@2
  char s; // [sp+8h] [bp-50h]@2
  int *v12; // [sp+10h] [bp-48h]@2
  int v13; // [sp+14h] [bp-44h]@2
  int *v14; // [sp+18h] [bp-40h]@3
  int v15; // [sp+1Ch] [bp-3Ch]@3
  int v16; // [sp+24h] [bp-34h]@3
  int v17; // [sp+28h] [bp-30h]@3
  int v18; // [sp+2Ch] [bp-2Ch]@3
  int v19; // [sp+30h] [bp-28h]@3
  int v20; // [sp+34h] [bp-24h]@1

  v4 = a4;
  v5 = a1;
  v6 = a3;
  v7 = a2;
  v20 = _stack_chk_guard;
  if ( a2 )
  {
    memset(&s, 0, 0x1Cu);
    v9 = v7;
    v10 = v6;
    v12 = &v9;
    v13 = 1;
    if ( v4 > 0 )
    {
      v15 = 16;
      v14 = &v16;
      v17 = 1;
      v18 = 1;
      v16 = 16;
      v19 = v4;
    }
    result = sendmsg(v5, (const struct msghdr *)&s, 0);
  }
  else
  {
    result = -1;
  }
  if ( v20 != _stack_chk_guard )
    _stack_chk_fail(result);
  return result;
}
// 2FFC: using guessed type int __fastcall _stack_chk_fail(_DWORD);

//----- (00008E30) --------------------------------------------------------
signed int __fastcall mm_camera_socket_recvmsg(int a1, int a2, int a3, signed int *a4)
{
  signed int *v4; // r6@1
  int v5; // r9@1
  int v6; // r7@1
  int v7; // r8@1
  signed int result; // r0@3
  ssize_t v9; // r9@4
  signed int v10; // r3@11
  int v11; // [sp+8h] [bp-58h]@4
  int v12; // [sp+Ch] [bp-54h]@4
  char s; // [sp+10h] [bp-50h]@4
  int *v14; // [sp+18h] [bp-48h]@4
  int v15; // [sp+1Ch] [bp-44h]@4
  char *v16; // [sp+20h] [bp-40h]@4
  unsigned int v17; // [sp+24h] [bp-3Ch]@4
  char v18; // [sp+2Ch] [bp-34h]@4
  int v19; // [sp+3Ch] [bp-24h]@1

  v4 = a4;
  v5 = a1;
  v6 = a3;
  v7 = a2;
  v19 = _stack_chk_guard;
  if ( !a2 || !a3 )
  {
    _android_log_print(6, "mm-camera-intf", " %s: msg buf is NULL", "mm_camera_socket_recvmsg");
    result = -1;
    goto LABEL_17;
  }
  memset(&s, 0, 0x1Cu);
  v16 = &v18;
  v17 = 16;
  v14 = &v11;
  v12 = v6;
  v11 = v7;
  v15 = 1;
  v9 = recvmsg(v5, (struct msghdr *)&s, 0);
  if ( v9 > 0 )
  {
    if ( v17 > 0xB && v16 && *(_DWORD *)v16 == 16 )
    {
      if ( *((_DWORD *)v16 + 1) == 1 && *((_DWORD *)v16 + 2) == 1 )
      {
        v10 = *((_DWORD *)v16 + 3);
        goto LABEL_14;
      }
      _android_log_print(6, "mm-camera-intf", "%s:  Unexpected Control Msg. Line=%d", "mm_camera_socket_recvmsg", 222);
    }
    v10 = -1;
LABEL_14:
    if ( v4 )
      *v4 = v10;
    goto LABEL_16;
  }
  _android_log_print(6, "mm-camera-intf", " %s: recvmsg failed", "mm_camera_socket_recvmsg");
LABEL_16:
  result = v9;
LABEL_17:
  if ( v19 != _stack_chk_guard )
    _stack_chk_fail(result);
  return result;
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 2FFC: using guessed type int __fastcall _stack_chk_fail(_DWORD);

//----- (00008F28) --------------------------------------------------------
signed int __fastcall sub_8F28(int a1, int a2, unsigned int a3, unsigned int a4)
{
  unsigned int v4; // r5@1
  unsigned int v5; // r7@1
  int v6; // r10@1
  int v7; // r4@1
  int v8; // r11@2
  unsigned int v9; // r8@7
  int v10; // r9@7
  int v11; // r0@8
  int v12; // r2@9
  int v13; // r1@10
  signed int result; // r0@10
  int v15; // r3@19
  int v16; // r2@19
  int v17; // r0@19
  int v18; // r1@19
  int v19; // r2@37
  int v20; // r0@39
  int v21; // r1@39
  int v22; // r3@39
  unsigned int v23; // r1@40
  unsigned int v24; // r0@40
  int v25; // r1@42
  int v26; // r6@45
  char v27; // r1@45
  int v29; // r0@50
  unsigned int v35; // r0@51
  int v36; // [sp+4h] [bp-34h]@58
  int v37; // [sp+8h] [bp-30h]@6
  int v38; // [sp+Ch] [bp-2Ch]@22
  int v39; // [sp+10h] [bp-28h]@8

  v4 = a4;
  v5 = a3;
  v6 = a2;
  v7 = a1;
  if ( a3 >= a4 )
    goto LABEL_58;
  v8 = 0;
  do
  {
    v9 = v5 + 1;
    v10 = *(_BYTE *)(v6 + (v5 ^ 3));
    if ( !(v10 & 0x80) )
    {
      sub_97A4(v7, 13, &v39);
      v11 = 4 * v10;
      if ( v10 & 0x40 )
        v12 = -4 - (v11 & 0xFC) + v39;
      else
        v12 = v11 + v39 + 4;
      v39 = v12;
LABEL_23:
      sub_97D4(v7, 13, v12);
      ++v5;
      continue;
    }
    v13 = v10 & 0xF0;
    result = 9;
    if ( v13 > 159 )
    {
      if ( v13 > 191 )
      {
        if ( v13 == 192 )
        {
          switch ( v10 )
          {
            case 199:
              if ( !*(_BYTE *)(v6 + (v9 ^ 3)) || (unsigned int)*(_BYTE *)(v6 + (v9 ^ 3)) >= 0x10 )
                return 9;
              goto LABEL_55;
            case 192:
            case 193:
            case 194:
            case 195:
            case 196:
            case 197:
              v18 = 3;
              v16 = ((v10 & 7) + 1) | 0xA0000;
              v17 = v7;
              goto LABEL_33;
            case 200:
            case 201:
              v23 = *(_BYTE *)(v6 + (v9 ^ 3));
              v24 = v23 >> 4;
              if ( v10 == 200 )
                v24 = (v23 >> 4) | 0x10;
              v25 = v23 & 0xF;
              if ( (signed int)(v24 + v25) > 31 )
                return 9;
              v19 = (v25 + 1) | (v24 << 16);
              v20 = v7;
              v21 = 1;
              goto LABEL_53;
            case 198:
              v35 = *(_BYTE *)(v6 + (v9 ^ 3));
              if ( (signed int)((v35 & 0xF) + (v35 >> 4)) > 15 )
                return 9;
              v19 = ((v35 & 0xF) + 1) | (v35 >> 4 << 16);
              v20 = v7;
              v21 = 3;
LABEL_53:
              v22 = 5;
LABEL_54:
              sub_930C(v20, v21, v19, v22);
              goto LABEL_55;
            default:
              return 9;
          }
          return 9;
        }
        if ( v13 != 208 )
          return result;
        if ( v10 & 8 )
          return 9;
        v18 = 1;
        v16 = ((v10 & 7) + 1) | 0x80000;
        v17 = v7;
LABEL_33:
        v15 = 5;
      }
      else
      {
        if ( v13 != 160 )
        {
          if ( v13 != 176 )
            return result;
          result = 9;
          switch ( v10 )
          {
            case 177:
              if ( v9 >= v4 )
                return 9;
              v19 = *(_BYTE *)(v6 + (v9 ^ 3));
              result = 9;
              if ( !*(_BYTE *)(v6 + (v9 ^ 3)) || v19 & 0xF0 )
                return result;
              v20 = v7;
              v21 = 0;
              v22 = 0;
              goto LABEL_54;
            case 178:
              if ( v9 >= v4 )
                return 9;
              v5 += 2;
              v26 = 0;
              v27 = 0;
              break;
            case 179:
              v22 = 1;
              v29 = *(_BYTE *)(v6 + (v9 ^ 3));
              _R1 = v29 << 12;
              __asm { UXTB16.W        R1, R1 }
              v19 = ((v29 & 0xF) + 1) | _R1;
              v20 = v7;
              v21 = 1;
              goto LABEL_54;
            case 176:
              goto LABEL_57;
            case 180:
            case 181:
            case 182:
            case 183:
              return result;
            default:
              v18 = 1;
              v15 = 1;
              v16 = ((v10 & 7) + 1) | 0x80000;
              v17 = v7;
              goto LABEL_34;
          }
          while ( 1 )
          {
            v26 |= (*(_BYTE *)(v6 + ((v5 - 1) ^ 3)) & 0x7F) << v27;
            if ( !(*(_BYTE *)(v6 + ((v5 - 1) ^ 3)) & 0x80) )
              break;
            v27 += 7;
            _CF = v5 >= v4;
            result = 9;
            ++v5;
            if ( _CF )
              return result;
          }
          sub_97A4(v7, 13, &v37);
          v37 += 4 * v26 + 516;
          sub_97D4(v7, 13, v37);
          continue;
        }
        v15 = 0;
        v16 = ((16 << ((*(_BYTE *)(v6 + (v5 ^ 3)) & 7) + 1)) - 16) | (*(_BYTE *)(v6 + (v5 ^ 3)) << 11) & 0x4000;
        v17 = v7;
        v18 = 0;
      }
LABEL_34:
      sub_930C(v17, v18, v16, v15);
      ++v5;
      continue;
    }
    if ( v13 != 128 )
    {
      if ( v13 != 144 )
        return result;
      if ( (v10 & 0xF | 2) == 15 )
        return 9;
      sub_97A4(v7, v10 & 0xF, &v38);
      v12 = v38;
      goto LABEL_23;
    }
    if ( v9 >= v4 || !((unsigned __int16)((_WORD)v10 << 12) | 16 * *(_BYTE *)(v6 + ((v5 + 1) ^ 3))) )
      return 9;
    sub_930C(v7, 0, (unsigned __int16)((_WORD)v10 << 12) | 16 * *(_BYTE *)(v6 + (v9 ^ 3)), 0);
    v8 |= (((_WORD)v10 << 12) & 0x8000u) >> 15;
LABEL_55:
    v5 += 2;
  }
  while ( v5 < v4 );
LABEL_57:
  if ( v8 & 1 )
    return 8;
LABEL_58:
  sub_97A4(v7, 14, &v36);
  sub_97D4(v7, 15, v36);
  return 8;
}

//----- (00009268) --------------------------------------------------------
signed int __fastcall sub_9268(int a1, int a2, unsigned int a3, int a4, int *a5)
{
  int v5; // r5@1
  int v6; // r4@1
  signed int result; // r0@2
  int v8; // r2@4
  int v9; // r0@4
  int v10; // r1@4
  __int64 v11; // r2@10
  int v12; // r1@10

  v5 = a3;
  v6 = a1;
  switch ( a2 )
  {
    case 0:
      result = 2;
      if ( a3 > 0xF || a4 )
        return result;
      v8 = *a5;
      v9 = v6;
      v10 = v5;
      goto LABEL_14;
    case 1:
      if ( a4 == 5 )
      {
        if ( a3 <= 0x1F )
          goto LABEL_21;
        return 2;
      }
      if ( a4 != 1 || a3 > 0xF )
        return 2;
      sub_98C0(a1);
LABEL_21:
      v11 = *(_QWORD *)a5;
      v12 = v5 + 256;
LABEL_22:
      result = sub_9848(v6, v12, v11, SHIDWORD(v11));
LABEL_23:
      if ( result )
        result = 2;
      return result;
    case 3:
      result = 2;
      if ( a3 > 0x1F || a4 != 5 )
        return result;
      v11 = *(_QWORD *)a5;
      v12 = v5 + 112;
      goto LABEL_22;
    case 4:
      result = 2;
      if ( a3 > 3 || a4 )
        return result;
      v8 = *a5;
      v10 = v5 + 192;
      v9 = v6;
LABEL_14:
      result = sub_97D4(v9, v10, v8);
      goto LABEL_23;
    default:
      sub_9648(
        (int)"_Unwind_VRS_Result _Unwind_VRS_Set(_Unwind_Context *, _Unwind_VRS_RegClass, uint32_t, _Unwind_VRS_DataRepre"
             "sentation, void *)",
        831,
        (int)"unsupported register class");
      return result;
  }
}

//----- (0000930C) --------------------------------------------------------
signed int __fastcall sub_930C(int a1, int a2, unsigned int a3, int a4)
{
  int v4; // r5@1
  int v5; // r7@1
  unsigned int v6; // r6@1
  int v7; // r8@1
  int v8; // r4@4
  unsigned int v9; // r7@4
  int *v10; // r0@6
  signed int v11; // r0@6
  signed int v12; // r1@6
  signed int v13; // r2@6
  signed int result; // r0@14
  unsigned int v15; // r4@18
  unsigned int v16; // r6@18
  int v17; // r0@19
  int v18; // r2@19
  int v19; // r2@22
  int v20; // [sp+8h] [bp-38h]@19
  int v21; // [sp+Ch] [bp-34h]@19
  int v22; // [sp+14h] [bp-2Ch]@16
  int v23; // [sp+18h] [bp-28h]@6
  int *v24; // [sp+1Ch] [bp-24h]@3

  v4 = a2;
  v5 = a4;
  v6 = a3;
  v7 = a1;
  switch ( a2 )
  {
    case 0:
    case 4:
      if ( a4 || sub_97A4(a1, 13, &v24) )
        return 2;
      v8 = 0;
      v9 = 0;
      do
      {
        if ( (1 << v9) & v6 )
        {
          v10 = v24;
          ++v24;
          v23 = *v10;
          v11 = sub_9268(v7, v4, v9, 0, &v23);
          v12 = 0;
          v13 = 0;
          if ( v9 == 13 )
            v12 = 1;
          if ( !v4 )
            v13 = 1;
          if ( v11 )
            return 2;
          v8 |= v13 & v12;
        }
        ++v9;
      }
      while ( v9 < 0x10 );
      if ( v8 & 1 )
        return 0;
      v19 = (int)v24;
      goto LABEL_28;
    case 1:
    case 3:
      if ( (a4 | 4) != 5 || sub_97A4(a1, 13, &v22) )
        return 2;
      if ( !(_WORD)v6 )
        goto LABEL_21;
      v15 = v6 >> 16;
      v16 = (v6 >> 16) + v6;
      break;
    default:
      sub_9648(
        (int)"_Unwind_VRS_Result _Unwind_VRS_Pop(_Unwind_Context *, _Unwind_VRS_RegClass, uint32_t, _Unwind_VRS_DataRepresentation)",
        965,
        (int)"unsupported register class");
      return result;
  }
  do
  {
    v17 = v22;
    v22 += 4;
    v18 = *(_DWORD *)v17;
    v22 = v17 + 8;
    v21 = *(_DWORD *)(v17 + 4);
    v20 = v18;
    if ( sub_9268(v7, v4, v15, v5, &v20) )
      return 2;
    ++v15;
  }
  while ( v15 < v16 );
LABEL_21:
  if ( v5 == 1 )
  {
    v19 = v22 + 4;
    v22 += 4;
  }
  else
  {
    v19 = v22;
  }
LABEL_28:
  result = sub_97D4(v7, 13, v19);
  if ( result )
    result = 2;
  return result;
}

//----- (00009434) --------------------------------------------------------
signed int __fastcall sub_9434(int a1, int a2, int a3)
{
  int v3; // r0@1
  int v4; // r1@1
  unsigned int *v5; // r12@1
  int v6; // r3@1
  bool v7; // zf@2
  unsigned int v8; // r3@6
  unsigned int v9; // r2@6

  v3 = a2;
  v4 = a3;
  v5 = *(unsigned int **)(v3 + 76);
  v6 = (*v5 >> 24) & 0xF;
  if ( v6 )
  {
    v7 = v6 == 1;
    if ( v6 != 1 )
      v7 = v6 == 3;
    if ( !v7 )
      return 9;
    v8 = 4 * ((*v5 >> 16) & 0xFF) + 4;
    v9 = 2;
  }
  else
  {
    v9 = 1;
    v8 = 4;
  }
  if ( !v5 || !(*(_BYTE *)(v3 + 80) & 1) && *(unsigned int *)((char *)v5 + v8) )
    return 9;
  return sub_8F28(v4, (int)v5, v9, v8);
}

//----- (00009488) --------------------------------------------------------
void sub_9488()
{
  JUMPOUT(&loc_943C);
}

//----- (00009490) --------------------------------------------------------
void sub_9490()
{
  JUMPOUT(&loc_943C);
}

//----- (0000952C) --------------------------------------------------------
signed int __fastcall sub_952C(int a1, int a2, char a3)
{
  int v3; // r4@1
  char v4; // r10@1
  signed int i; // r6@1
  signed int v6; // r7@3
  int v7; // r0@8
  int (__fastcall *v8)(signed int, int, char *); // r3@11
  int v9; // r0@12
  int v11; // [sp+0h] [bp-4B0h]@17
  int v12; // [sp+4h] [bp-4ACh]@10
  int (__fastcall *v13)(signed int, int, char *); // [sp+10h] [bp-4A0h]@11
  int v14; // [sp+18h] [bp-498h]@12
  int v15; // [sp+24h] [bp-48Ch]@12
  int v16; // [sp+2Ch] [bp-484h]@10
  char v17; // [sp+30h] [bp-480h]@1

  v3 = a2;
  v4 = a3;
  sub_9754((int)&v17);
  for ( i = 1; ; --i )
  {
    v6 = 1;
    if ( v4 & 1 )
    {
      v6 = 2;
      if ( !i )
      {
        sub_97D4((int)&v17, -1, *(_DWORD *)(v3 + 16));
        v4 = 0;
      }
    }
    v7 = sub_9880((int)&v17);
    if ( !v7 )
      break;
    if ( v7 < 0 )
      return 2;
    sub_97A4((int)&v17, -2, &v16);
    if ( sub_9888((int)&v17, (int)&v12) )
      return 2;
    v8 = v13;
    if ( v13 )
    {
      *(_DWORD *)(v3 + 72) = v12;
      *(_DWORD *)(v3 + 76) = v15;
      *(_DWORD *)(v3 + 80) = v14;
      v9 = v8(v6, v3, &v17);
      if ( v9 == 7 )
      {
        sub_97A4((int)&v17, -1, &v11);
        *(_DWORD *)(v3 + 16) = v11;
        sub_98A8((int)&v17);
        return 2;
      }
      if ( v9 == 9 )
        abort();
      if ( v9 != 8 )
        return 2;
      if ( v16 == *(_DWORD *)(v3 + 32) )
        sub_9648(
          (int)"_Unwind_Reason_Code unwind_phase2(unw_context_t *, _Unwind_Exception *, bool)",
          642,
          (int)"during phase1 personality function said it would stop here, but now in phase2 it did not stop here");
    }
  }
  return 5;
}

//----- (00009648) --------------------------------------------------------
void __fastcall sub_9648(int a1, int a2, int a3)
{
  fprintf((FILE *)stderr, "libunwind: %s %s:%d - %s\n", a1, "external/libcxxabi/src/Unwind/Unwind-EHABI.cpp", a2, a3);
  abort();
}

//----- (000096CC) --------------------------------------------------------
int __fastcall sub_96CC(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@0
  int v6; // r5@0
  int v7; // r6@0
  int v8; // r7@0
  int v9; // r8@0
  int v10; // r9@0
  int v11; // r10@0
  int v12; // r11@0
  int v13; // r12@0
  int v14; // lr@0

  *(_DWORD *)a1 = a1;
  *(_DWORD *)(a1 + 4) = a2;
  *(_DWORD *)(a1 + 8) = a3;
  *(_DWORD *)(a1 + 12) = a4;
  *(_DWORD *)(a1 + 16) = v5;
  *(_DWORD *)(a1 + 20) = v6;
  *(_DWORD *)(a1 + 24) = v7;
  *(_DWORD *)(a1 + 28) = v8;
  *(_DWORD *)(a1 + 32) = v9;
  *(_DWORD *)(a1 + 36) = v10;
  *(_DWORD *)(a1 + 40) = v11;
  *(_DWORD *)(a1 + 44) = v12;
  *(_DWORD *)(a1 + 48) = v13;
  *(_DWORD *)(a1 + 52) = &a5;
  *(_DWORD *)(a1 + 56) = v14;
  *(_DWORD *)(a1 + 60) = v14;
  return 0;
}

//----- (000096E4) --------------------------------------------------------
int __fastcall sub_96E4(int _R0)
{
  int result; // r0@1

  __asm { VSTMIA          R0, {D0-D15} }
  return result;
}

//----- (000096EC) --------------------------------------------------------
int __fastcall sub_96EC(int _R0)
{
  int result; // r0@1

  __asm { VSTMIA          R0, {D0-D15} }
  return result;
}

//----- (000096F4) --------------------------------------------------------
int __fastcall sub_96F4(int _R0)
{
  int result; // r0@1

  __asm { VSTMIA          R0, {D16-D31} }
  return result;
}

//----- (000096FC) --------------------------------------------------------
void sub_96FC()
{
  __asm
  {
    STCL            p1, c0, [R0],#8
    STCL            p1, c1, [R0],#8
    STCL            p1, c2, [R0],#8
    STCL            p1, c3, [R0],#8
    STCL            p1, c4, [R0],#8
    STCL            p1, c5, [R0],#8
    STCL            p1, c6, [R0],#8
    STCL            p1, c7, [R0],#8
    STCL            p1, c8, [R0],#8
    STCL            p1, c9, [R0],#8
    STCL            p1, c10, [R0],#8
    STCL            p1, c11, [R0],#8
    STCL            p1, c12, [R0],#8
    STCL            p1, c13, [R0],#8
    STCL            p1, c14, [R0],#8
    STCL            p1, c15, [R0],#8
  }
}

//----- (00009740) --------------------------------------------------------
void sub_9740()
{
  __asm
  {
    STC2            p1, c8, [R0],#4
    STC2            p1, c9, [R0],#4
    STC2            p1, c10, [R0],#4
    STC2            p1, c11, [R0],#4
  }
}

//----- (00009754) --------------------------------------------------------
int __fastcall sub_9754(int a1)
{
  int v1; // r4@1

  v1 = a1;
  *(_DWORD *)a1 = &off_EBA4;
  *(_DWORD *)(a1 + 4) = &unk_F1CC;
  *(_BYTE *)(a1 + 76) = 0;
  *(_DWORD *)(a1 + 72) = 0;
  _aeabi_memcpy(a1 + 8);
  _aeabi_memset(v1 + 80, 450, 0);
  sub_9CC8(v1, 0);
  return 0;
}
// 3608: using guessed type int __fastcall _aeabi_memcpy(_DWORD);
// 3614: using guessed type int __fastcall _aeabi_memset(_DWORD, _DWORD, _DWORD);
// EBA4: using guessed type void *;

//----- (000097A4) --------------------------------------------------------
signed int __fastcall sub_97A4(int a1, int a2, _DWORD *a3)
{
  int v3; // r6@1
  _DWORD *v4; // r4@1
  int v5; // r5@1
  signed int result; // r0@2

  v3 = a1;
  v4 = a3;
  v5 = a2;
  if ( (*(int (**)(void))(*(_DWORD *)a1 + 8))() == 1 )
  {
    *v4 = (*(int (__fastcall **)(int, int))(*(_DWORD *)v3 + 12))(v3, v5);
    result = 0;
  }
  else
  {
    result = -6542;
  }
  return result;
}

//----- (000097D4) --------------------------------------------------------
signed int __fastcall sub_97D4(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r6@1
  int v5; // r5@1
  signed int v6; // r5@3

  v3 = a1;
  v4 = a3;
  v5 = a2;
  if ( (*(int (**)(void))(*(_DWORD *)a1 + 8))() == 1 )
  {
    (*(void (__fastcall **)(int, int, int))(*(_DWORD *)v3 + 16))(v3, v5, v4);
    if ( v5 == -1 )
    {
      v6 = 0;
      (*(void (__fastcall **)(int, _DWORD))(*(_DWORD *)v3 + 52))(v3, 0);
    }
    else
    {
      v6 = 0;
    }
  }
  else
  {
    v6 = -6542;
  }
  return v6;
}

//----- (00009818) --------------------------------------------------------
signed int __fastcall sub_9818(int a1, int a2, _QWORD *a3)
{
  int v3; // r6@1
  _QWORD *v4; // r4@1
  int v5; // r5@1
  __int64 v6; // r0@2
  signed int result; // r0@2

  v3 = a1;
  v4 = a3;
  v5 = a2;
  if ( (*(int (**)(void))(*(_DWORD *)a1 + 20))() == 1 )
  {
    LODWORD(v6) = (*(int (__fastcall **)(int, int))(*(_DWORD *)v3 + 24))(v3, v5);
    *v4 = v6;
    result = 0;
  }
  else
  {
    result = -6542;
  }
  return result;
}

//----- (00009848) --------------------------------------------------------
signed int __fastcall sub_9848(int a1, int a2, int a3, int a4)
{
  int v4; // r7@1
  int v5; // r5@1
  int v6; // r6@1
  int v7; // r8@1
  signed int result; // r0@2

  v4 = a1;
  v5 = a3;
  v6 = a2;
  v7 = a4;
  if ( (*(int (**)(void))(*(_DWORD *)a1 + 20))() == 1 )
  {
    (*(void (__fastcall **)(int, int, int, int))(*(_DWORD *)v4 + 28))(v4, v6, v5, v7);
    result = 0;
  }
  else
  {
    result = -6542;
  }
  return result;
}

//----- (00009880) --------------------------------------------------------
int __fastcall sub_9880(int a1)
{
  return (*(int (**)(void))(*(_DWORD *)a1 + 32))();
}

//----- (00009888) --------------------------------------------------------
signed int __fastcall sub_9888(int a1, int a2)
{
  int v2; // r4@1
  signed int result; // r0@1

  v2 = a2;
  (*(void (**)(void))(*(_DWORD *)a1 + 36))();
  result = 0;
  if ( !*(_DWORD *)(v2 + 4) )
    result = -6549;
  return result;
}

//----- (000098A8) --------------------------------------------------------
signed int __fastcall sub_98A8(int a1)
{
  (*(void (**)(void))(*(_DWORD *)a1 + 40))();
  return -6540;
}

//----- (000098C0) --------------------------------------------------------
int __fastcall sub_98C0(int a1)
{
  return (*(int (**)(void))(*(_DWORD *)a1 + 60))();
}

//----- (000098D0) --------------------------------------------------------
int __fastcall sub_98D0(int a1, int a2)
{
  signed int v2; // r2@1
  bool v3; // zf@1
  signed int v4; // r0@1
  unsigned int v5; // r1@1

  v2 = 0;
  v3 = (a2 & 0xFFFFFFFC) == 192;
  v4 = 0;
  v5 = a2 - 16;
  if ( v3 )
    v4 = 1;
  if ( v5 > 0xFFFFFFED )
    v2 = 1;
  return v4 | v2;
}

//----- (000098F0) --------------------------------------------------------
int __fastcall sub_98F0(int a1, signed int a2)
{
  signed int v2; // r5@1
  int v3; // r4@1
  int v4; // r0@7

  v2 = a2;
  v3 = a1;
  if ( a2 >= -1 )
  {
    if ( a2 > 13 )
    {
      if ( a2 == 14 )
      {
        v4 = a1 + 64;
        return *(_DWORD *)v4;
      }
      if ( a2 != 15 )
        goto LABEL_12;
    }
    else if ( a2 != -1 )
    {
      if ( a2 != 13 )
        goto LABEL_12;
LABEL_7:
      v4 = a1 + 60;
      return *(_DWORD *)v4;
    }
    v4 = a1 + 68;
    return *(_DWORD *)v4;
  }
  if ( a2 == -2 )
    goto LABEL_7;
LABEL_12:
  if ( (unsigned int)a2 > 0xC )
  {
    if ( (a2 & 0xFFFFFFFC) != 192 )
      sub_9D28(
        (int)"uint32_t libunwind::Registers_arm::getRegister(int)",
        (int)"external/libcxxabi/src/Unwind/Registers.hpp",
        1452,
        (int)"unsupported arm register");
    if ( !*(_BYTE *)(a1 + 76) )
    {
      *(_BYTE *)(a1 + 76) = 1;
      sub_9740();
    }
    v4 = v3 + 4 * v2 - 296;
  }
  else
  {
    v4 = a1 + 4 * a2 + 8;
  }
  return *(_DWORD *)v4;
}

//----- (0000998C) --------------------------------------------------------
int __fastcall sub_998C(int result, signed int a2, int a3)
{
  signed int v3; // r6@1
  int v4; // r4@1
  int v5; // r5@1

  v3 = a2;
  v4 = a3;
  v5 = result;
  if ( a2 >= -1 )
  {
    if ( a2 > 13 )
    {
      if ( a2 == 14 )
      {
        *(_DWORD *)(result + 64) = a3;
        return result;
      }
      if ( a2 != 15 )
        goto LABEL_12;
    }
    else if ( a2 != -1 )
    {
      if ( a2 != 13 )
        goto LABEL_12;
LABEL_7:
      *(_DWORD *)(result + 60) = a3;
      return result;
    }
    *(_DWORD *)(result + 68) = a3;
    return result;
  }
  if ( a2 == -2 )
    goto LABEL_7;
LABEL_12:
  if ( (unsigned int)a2 > 0xC )
  {
    if ( (a2 & 0xFFFFFFFC) != 192 )
      sub_9D28(
        (int)"void libunwind::Registers_arm::setRegister(int, uint32_t)",
        (int)"external/libcxxabi/src/Unwind/Registers.hpp",
        1471,
        (int)"unsupported arm register");
    if ( !*(_BYTE *)(result + 76) )
    {
      *(_BYTE *)(result + 76) = 1;
      sub_9740();
    }
    result = v5 + 4 * v3;
    *(_DWORD *)(result - 296) = v4;
  }
  else
  {
    result += 4 * a2;
    *(_DWORD *)(result + 8) = a3;
  }
  return result;
}

//----- (00009A24) --------------------------------------------------------
int __fastcall sub_9A24(int a1, int a2)
{
  signed int v2; // r2@1
  bool v3; // zf@1
  signed int v4; // r0@1
  unsigned int v5; // r1@1

  v2 = 0;
  v3 = (a2 & 0xFFFFFFF0) == 112;
  v4 = 0;
  v5 = a2 & 0xFFFFFFE0;
  if ( v3 )
    v4 = 1;
  if ( v5 == 256 )
    v2 = 1;
  return v4 | v2;
}

//----- (00009A44) --------------------------------------------------------
__int64 __fastcall sub_9A44(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r5@1
  unsigned int v4; // r0@1
  int v5; // r0@5
  int v6; // r0@11

  v2 = a2;
  v3 = a1;
  v4 = a2 & 0xFFFFFFF0;
  if ( (a2 & 0xFFFFFFF0) == 112 )
  {
    if ( !*(_BYTE *)(v3 + 75) )
    {
      *(_BYTE *)(v3 + 75) = 1;
      sub_96FC();
    }
    v5 = v3 + 8 * v2 - 552;
  }
  else if ( v4 == 272 )
  {
    if ( !*(_BYTE *)(v3 + 74) )
    {
      *(_BYTE *)(v3 + 74) = 1;
      sub_96F4(v3 + 216);
    }
    v5 = v3 + 8 * v2 - 1960;
  }
  else
  {
    if ( v4 != 256 )
      sub_9D28(
        (int)"unw_fpreg_t libunwind::Registers_arm::getFloatRegister(int)",
        (int)"external/libcxxabi/src/Unwind/Registers.hpp",
        1673,
        (int)"Unknown ARM float register");
    if ( !*(_BYTE *)(v3 + 73) )
    {
      *(_BYTE *)(v3 + 73) = 1;
      v6 = v3 + 80;
      if ( *(_BYTE *)(v3 + 72) )
        sub_96EC(v6);
      else
        sub_96E4(v6);
    }
    v5 = v3 + 8 * v2 - 1968;
  }
  return *(_QWORD *)v5;
}

//----- (00009AF4) --------------------------------------------------------
int __fastcall sub_9AF4(int a1, int a2, int a3, int a4)
{
  int v4; // r6@1
  int v5; // r7@1
  unsigned int v6; // r0@1
  int v7; // r5@1
  int v8; // r4@1
  int result; // r0@5
  int v10; // r1@5
  int v11; // r0@11

  v4 = a2;
  v5 = a1;
  v6 = a2 & 0xFFFFFFF0;
  v7 = a4;
  v8 = a3;
  if ( (a2 & 0xFFFFFFF0) == 112 )
  {
    if ( !*(_BYTE *)(v5 + 75) )
    {
      *(_BYTE *)(v5 + 75) = 1;
      sub_96FC();
    }
    result = v5 + 8 * v4;
    *(_DWORD *)(result - 548) = v7;
    LOWORD(v10) = -552;
  }
  else if ( v6 == 272 )
  {
    if ( !*(_BYTE *)(v5 + 74) )
    {
      *(_BYTE *)(v5 + 74) = 1;
      sub_96F4(v5 + 216);
    }
    result = v5 + 8 * v4;
    *(_DWORD *)(result - 1828) = v7;
    LOWORD(v10) = -1832;
  }
  else
  {
    if ( v6 != 256 )
      sub_9D28(
        (int)"void libunwind::Registers_arm::setFloatRegister(int, unw_fpreg_t)",
        (int)"external/libcxxabi/src/Unwind/Registers.hpp",
        1700,
        (int)"Unknown ARM float register");
    if ( !*(_BYTE *)(v5 + 73) )
    {
      *(_BYTE *)(v5 + 73) = 1;
      v11 = v5 + 80;
      if ( *(_BYTE *)(v5 + 72) )
        sub_96EC(v11);
      else
        sub_96E4(v11);
    }
    result = v5 + 8 * v4;
    *(_DWORD *)(result - 1964) = v7;
    LOWORD(v10) = -1968;
  }
  HIWORD(v10) = -1;
  *(_DWORD *)(result + v10) = v8;
  return result;
}

//----- (00009BC8) --------------------------------------------------------
signed int __fastcall sub_9BC8(int a1)
{
  int v1; // r4@1
  signed int result; // r0@3
  void (__fastcall *v3)(int, signed int, int); // r5@5
  int v4; // r0@5

  v1 = a1;
  if ( *(_BYTE *)(a1 + 528)
    || ((*(void (__fastcall **)(int, signed int))(*(_DWORD *)a1 + 52))(a1, 1), *(_BYTE *)(v1 + 528)) )
  {
    result = 0;
  }
  else
  {
    if ( *(_DWORD *)(v1 + 504) )
    {
      v3 = *(void (__fastcall **)(int, signed int, int))(*(_DWORD *)v1 + 16);
      v4 = (*(int (__fastcall **)(int, signed int))(*(_DWORD *)v1 + 12))(v1, -2);
      v3(v1, -2, *(_DWORD *)(v1 + 504) + v4);
    }
    result = 1;
  }
  return result;
}

//----- (00009C14) --------------------------------------------------------
int __fastcall sub_9C14(int a1, int a2)
{
  int v2; // r12@1
  int v3; // lr@1
  int v4; // r11@1
  int v5; // r3@1
  int v6; // r4@1
  int v7; // r5@1
  int v8; // r4@1
  int v9; // r2@1
  int v10; // r3@1
  int v11; // r5@1
  int result; // r0@1

  v2 = *(_DWORD *)(a1 + 488);
  v3 = *(_DWORD *)(a1 + 492);
  v4 = a2 + 8;
  v5 = *(_DWORD *)(a1 + 500);
  v6 = *(_DWORD *)(a1 + 504);
  v7 = *(_DWORD *)(a1 + 508);
  *(_DWORD *)v4 = *(_DWORD *)(a1 + 496);
  *(_DWORD *)(v4 + 4) = v5;
  *(_DWORD *)(v4 + 8) = v6;
  *(_DWORD *)(v4 + 12) = v7;
  v8 = a2 + 24;
  *(_DWORD *)a2 = v2;
  *(_DWORD *)(a2 + 4) = v3;
  v9 = *(_DWORD *)(a1 + 512);
  v10 = *(_DWORD *)(a1 + 516);
  v11 = *(_DWORD *)(a1 + 520);
  result = *(_DWORD *)(a1 + 524);
  *(_DWORD *)(a2 + 36) = result;
  *(_DWORD *)v8 = v9;
  *(_DWORD *)(v8 + 4) = v10;
  *(_DWORD *)(v8 + 8) = v11;
  return result;
}

//----- (00009C4C) --------------------------------------------------------
void __fastcall sub_9C4C(int a1)
{
  sub_9D5C(a1 + 8);
  sub_AB9C();
}

//----- (00009C64) --------------------------------------------------------
int __fastcall sub_9C64(int a1)
{
  return *(_BYTE *)(a1 + 529);
}

//----- (00009C6C) --------------------------------------------------------
signed int __fastcall sub_9C6C(int a1, int a2, int a3, _DWORD *a4)
{
  int v4; // r6@1
  int v5; // r5@1
  _DWORD *v6; // r4@1
  int v7; // r7@1
  int v8; // r0@1
  bool v9; // zf@1
  signed int result; // r0@4
  int v11; // [sp+10h] [bp-20h]@2
  int v12; // [sp+14h] [bp-1Ch]@4

  v4 = a2;
  v5 = a3;
  v6 = a4;
  v7 = (*(int (**)(void))(*(_DWORD *)a1 + 12))();
  v8 = dladdr();
  v9 = v8 == 0;
  if ( v8 )
    v9 = v11 == 0;
  if ( v9 )
  {
    result = 0;
  }
  else
  {
    _snprintf_chk(v4, v5, 0, -1);
    *v6 = v7 - v12;
    result = 1;
  }
  return result;
}
// 3620: using guessed type int dladdr(void);
// 362C: using guessed type int __fastcall _snprintf_chk(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (00009CC8) --------------------------------------------------------
int __fastcall sub_9CC8(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r6@1
  unsigned int v4; // r5@1
  int v5; // r0@3
  bool v6; // zf@3
  int result; // r0@6
  int v8; // [sp+4h] [bp-1Ch]@3
  int v9; // [sp+8h] [bp-18h]@3
  int v10; // [sp+Ch] [bp-14h]@1

  v2 = a1;
  v3 = a2;
  v4 = (*(int (**)(void))(*(_DWORD *)a1 + 12))() & 0xFFFFFFFE;
  v10 = 0;
  if ( v3 )
    --v4;
  v5 = _gnu_Unwind_Find_exidx(v4, &v10);
  v6 = v5 == 0;
  v8 = v5;
  v9 = v10;
  if ( v5 )
    v6 = v10 == 0;
  if ( v6 || (result = ((int (__fastcall *)(int, unsigned int, int *))sub_9DB0)(v2, v4, &v8)) == 0 )
  {
    result = 1;
    *(_BYTE *)(v2 + 528) = 1;
  }
  return result;
}
// 3638: using guessed type int __fastcall _gnu_Unwind_Find_exidx(_DWORD, _DWORD);
// 9DB0: using guessed type int sub_9DB0();

//----- (00009D18) --------------------------------------------------------
const char *__fastcall sub_9D18(int a1, signed int a2)
{
  const char *result; // r0@2
  signed int v3; // r1@3
  int *v4; // r0@3

  if ( a2 > 255 )
  {
    switch ( a2 )
    {
      case 256:
        v3 = -10340;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 257:
        v3 = -10337;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 258:
        v3 = -10334;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 259:
        v3 = -10331;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 260:
        v3 = -10328;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 261:
        v3 = -10325;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 262:
        v3 = -10322;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 263:
        v3 = -10319;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 264:
        v3 = -10316;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 265:
        v3 = -10313;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 266:
        v3 = -10310;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 267:
        v3 = -10306;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 268:
        v3 = -10302;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 269:
        v3 = -10298;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 270:
        v3 = -10294;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 271:
        v3 = -10290;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 272:
        v3 = -10286;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 273:
        v3 = -10282;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 274:
        v3 = -10278;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 275:
        v3 = -10274;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 276:
        v3 = -10270;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 277:
        v3 = -10266;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 278:
        v3 = -10262;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 279:
        v3 = -10258;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 280:
        v3 = -10254;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 281:
        v3 = -10250;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 282:
        v3 = -10246;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 283:
        v3 = -10242;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 284:
        v3 = -10238;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 285:
        v3 = -10234;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 286:
        v3 = -10230;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 287:
        v3 = -10226;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      default:
def_A084:
        v3 = -10222;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
    }
  }
  else
  {
    result = "pc";
    switch ( a2 + 2 )
    {
      case 0:
      case 15:
        v3 = -10503;
        v4 = &GLOBAL_OFFSET_TABLE_;
        return (char *)v4 + v3;
      default:
        goto def_A084;
      case 1:
      case 17:
        return result;
      case 2:
        v3 = -10500;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 3:
        v3 = -10497;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 4:
        v3 = -10494;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 5:
        v3 = -10491;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 6:
        v3 = -10488;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 7:
        v3 = -10485;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 8:
        v3 = -10482;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 9:
        v3 = -10479;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 10:
        v3 = -10476;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 11:
        v3 = -10473;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 12:
        v3 = -10470;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 13:
        v3 = -10466;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 14:
        v3 = -10462;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 16:
        v3 = -10506;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 66:
        v3 = -10458;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 67:
        v3 = -10455;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 68:
        v3 = -10452;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 69:
        v3 = -10449;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 70:
        v3 = -10446;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 71:
        v3 = -10443;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 72:
        v3 = -10440;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 73:
        v3 = -10437;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 74:
        v3 = -10434;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 75:
        v3 = -10431;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 76:
        v3 = -10428;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 77:
        v3 = -10424;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 78:
        v3 = -10420;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 79:
        v3 = -10416;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 80:
        v3 = -10412;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 81:
        v3 = -10408;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 82:
        v3 = -10404;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 83:
        v3 = -10400;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 84:
        v3 = -10396;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 85:
        v3 = -10392;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 86:
        v3 = -10388;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 87:
        v3 = -10384;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 88:
        v3 = -10380;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 89:
        v3 = -10376;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 90:
        v3 = -10372;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 91:
        v3 = -10368;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 92:
        v3 = -10364;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 93:
        v3 = -10360;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 94:
        v3 = -10356;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 95:
        v3 = -10352;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 96:
        v3 = -10348;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
      case 97:
        v3 = -10344;
        v4 = &GLOBAL_OFFSET_TABLE_;
        break;
    }
  }
  return (char *)v4 + v3;
}
// ED14: using guessed type int GLOBAL_OFFSET_TABLE_;

//----- (00009D20) --------------------------------------------------------
int __fastcall sub_9D20(int result)
{
  *(_BYTE *)(result + 72) = 1;
  return result;
}

//----- (00009D28) --------------------------------------------------------
void __fastcall sub_9D28(int a1, int a2, int a3, int a4)
{
  fprintf((FILE *)stderr, "libunwind: %s %s:%d - %s\n", a1, a2, a3, a4);
  abort();
}

//----- (00009D5C) --------------------------------------------------------
int __fastcall sub_9D5C(int a1)
{
  int v1; // r4@1
  int v2; // r0@2
  int result; // r0@9

  v1 = a1;
  if ( *(_BYTE *)(a1 + 65) )
  {
    v2 = a1 + 72;
    if ( *(_BYTE *)(v1 + 64) )
      sub_A628(v2);
    else
      sub_A620(v2);
  }
  if ( *(_BYTE *)(v1 + 66) )
    sub_A630(v1 + 208);
  if ( *(_BYTE *)(v1 + 67) )
    sub_A638((_DWORD *)(v1 + 336));
  result = *(_BYTE *)(v1 + 68);
  if ( *(_BYTE *)(v1 + 68) )
    result = sub_ABAC((_DWORD *)(v1 + 464));
  return result;
}

//----- (00009F38) --------------------------------------------------------
int __fastcall sub_9F38(int result, int a2, int a3, _DWORD *a4, int a5, int a6, int a7, _DWORD *a8)
{
  unsigned int v8; // r4@1
  unsigned int v9; // r5@2
  int v10; // r6@3

  v8 = a5 - a2;
  while ( 1 )
  {
    v9 = v8;
    if ( !v8 )
      break;
    v10 = a2 + (v8 >> 1);
    v8 >>= 1;
    if ( *a8 >= *a4 + 8 * v10 + (2 * *(_DWORD *)(*a4 + 8 * v10) & 0x80000000 | *(_DWORD *)(*a4 + 8 * v10)) )
    {
      v8 = v9 - 1 - v8;
      a2 = v10 + 1;
    }
  }
  *(_DWORD *)result = a2;
  *(_DWORD *)(result + 4) = a3;
  *(_DWORD *)(result + 8) = a4;
  return result;
}

//----- (0000A620) --------------------------------------------------------
int __fastcall sub_A620(int _R0)
{
  int result; // r0@1

  __asm { VLDMIA          R0, {D0-D15} }
  return result;
}

//----- (0000A628) --------------------------------------------------------
int __fastcall sub_A628(int _R0)
{
  int result; // r0@1

  __asm { VLDMIA          R0, {D0-D15} }
  return result;
}

//----- (0000A630) --------------------------------------------------------
int __fastcall sub_A630(int _R0)
{
  int result; // r0@1

  __asm { VLDMIA          R0, {D16-D31} }
  return result;
}

//----- (0000A638) --------------------------------------------------------
int __fastcall sub_A638(_DWORD *a1)
{
  int *v5; // r0@1
  int result; // r0@1

  _T1 = *a1;
  v5 = a1 + 2;
  __asm { LDCL            p1, c0, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c1, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c2, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c3, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c4, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c5, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c6, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c7, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c8, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c9, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c10, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c11, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c12, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c13, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c14, [R0],#8 }
  _T1 = *v5;
  result = (int)(v5 + 2);
  __asm { LDCL            p1, c15, [R0],#8 }
  return result;
}

//----- (0000A67C) --------------------------------------------------------
int __fastcall sub_A67C(_DWORD *a1)
{
  int *v5; // r0@1
  int result; // r0@1

  _T1 = *a1;
  v5 = a1 + 1;
  __asm { LDC2            p1, c8, [R0],#4 }
  _T1 = *v5;
  ++v5;
  __asm { LDC2            p1, c9, [R0],#4 }
  _T1 = *v5;
  ++v5;
  __asm { LDC2            p1, c10, [R0],#4 }
  _T1 = *v5;
  result = (int)(v5 + 1);
  __asm { LDC2            p1, c11, [R0],#4 }
  return result;
}

//----- (0000A698) --------------------------------------------------------
int __fastcall sub_A698(int result, unsigned int a2)
{
  char v2; // nf@0
  int v3; // r12@1
  unsigned int v4; // r3@4
  char v5; // r0@8
  unsigned int v6; // r1@8
  unsigned int v7; // r2@8
  bool v8; // zf@17

  v3 = result ^ a2;
  if ( v2 )
    a2 = -a2;
  if ( a2 == 1 )
  {
    if ( (v3 ^ result) < 0 )
      result = -result;
  }
  else
  {
    v4 = result;
    if ( result < 0 )
      v4 = -result;
    if ( v4 <= a2 )
    {
      if ( v4 < a2 )
        result = 0;
      if ( v4 == a2 )
        result = (v3 >> 31) | 1;
    }
    else if ( a2 & (a2 - 1) )
    {
      v5 = __clz(a2) - __clz(v4);
      v6 = a2 << v5;
      v7 = 1 << v5;
      result = 0;
      while ( 1 )
      {
        if ( v4 >= v6 )
        {
          v4 -= v6;
          result |= v7;
        }
        if ( v4 >= v6 >> 1 )
        {
          v4 -= v6 >> 1;
          result |= v7 >> 1;
        }
        if ( v4 >= v6 >> 2 )
        {
          v4 -= v6 >> 2;
          result |= v7 >> 2;
        }
        if ( v4 >= v6 >> 3 )
        {
          v4 -= v6 >> 3;
          result |= v7 >> 3;
        }
        v8 = v4 == 0;
        if ( v4 )
        {
          v7 >>= 4;
          v8 = v7 == 0;
        }
        if ( v8 )
          break;
        v6 >>= 4;
      }
      if ( v3 < 0 )
        result = -result;
    }
    else
    {
      result = v4 >> (31 - __clz(a2));
      if ( v3 < 0 )
        result = -result;
    }
  }
  return result;
}

//----- (0000A78C) --------------------------------------------------------
int _aeabi_ldiv0()
{
  return raise(8);
}

//----- (0000A79C) --------------------------------------------------------
signed int __fastcall j_j_j_mm_camera_channel_ae_bracketting(int a1, int a2, int a3)
{
  return j_j_mm_camera_channel_ae_bracketting(a1, a2, a3);
}

//----- (0000A7A0) --------------------------------------------------------
signed int __fastcall j_j_mm_camera_channel_ae_bracketting(int a1, int a2, int a3)
{
  return j_mm_camera_channel_ae_bracketting(a1, a2, a3);
}

//----- (0000A7AC) --------------------------------------------------------
signed int __fastcall j_j_j_mm_camera_config_channel_notify(int a1, int a2, int a3)
{
  return j_j_mm_camera_config_channel_notify(a1, a2, a3);
}

//----- (0000A7B0) --------------------------------------------------------
signed int __fastcall j_j_mm_camera_config_channel_notify(int a1, int a2, int a3)
{
  return j_mm_camera_config_channel_notify(a1, a2, a3);
}

//----- (0000A7BC) --------------------------------------------------------
signed int __fastcall j_j_j_mm_camera_flush_super_buf_queue(int a1, int a2, int a3)
{
  return j_j_mm_camera_flush_super_buf_queue(a1, a2, a3);
}

//----- (0000A7C0) --------------------------------------------------------
signed int __fastcall j_j_mm_camera_flush_super_buf_queue(int a1, int a2, int a3)
{
  return j_mm_camera_flush_super_buf_queue(a1, a2, a3);
}

//----- (0000A7CC) --------------------------------------------------------
signed int __fastcall j_j_j_mm_camera_cancel_super_buf_request(int a1, int a2)
{
  return j_j_mm_camera_cancel_super_buf_request(a1, a2);
}

//----- (0000A7D0) --------------------------------------------------------
signed int __fastcall j_j_mm_camera_cancel_super_buf_request(int a1, int a2)
{
  return j_mm_camera_cancel_super_buf_request(a1, a2);
}

//----- (0000A7DC) --------------------------------------------------------
signed int __fastcall j_j_j_mm_camera_request_super_buf(int a1, int a2, int a3)
{
  return j_j_mm_camera_request_super_buf(a1, a2, a3);
}

//----- (0000A7E0) --------------------------------------------------------
signed int __fastcall j_j_mm_camera_request_super_buf(int a1, int a2, int a3)
{
  return j_mm_camera_request_super_buf(a1, a2, a3);
}

//----- (0000A7EC) --------------------------------------------------------
int __fastcall j_j_j_mm_camera_qbuf(int a1, int a2, int *a3)
{
  return j_j_mm_camera_qbuf(a1, a2, a3);
}

//----- (0000A7F0) --------------------------------------------------------
int __fastcall j_j_mm_camera_qbuf(int a1, int a2, int *a3)
{
  return j_mm_camera_qbuf(a1, a2, a3);
}

//----- (0000A7FC) --------------------------------------------------------
signed int __fastcall j_j_j_mm_camera_stop_channel(int a1, int a2)
{
  return j_j_mm_camera_stop_channel(a1, a2);
}

//----- (0000A800) --------------------------------------------------------
signed int __fastcall j_j_mm_camera_stop_channel(int a1, int a2)
{
  return j_mm_camera_stop_channel(a1, a2);
}

//----- (0000A80C) --------------------------------------------------------
signed int __fastcall j_j_j_mm_camera_start_channel(int a1, int a2)
{
  return j_j_mm_camera_start_channel(a1, a2);
}

//----- (0000A810) --------------------------------------------------------
signed int __fastcall j_j_mm_camera_start_channel(int a1, int a2)
{
  return j_mm_camera_start_channel(a1, a2);
}

//----- (0000A81C) --------------------------------------------------------
signed int __fastcall j_j_j_mm_camera_get_stream_parms(int a1, int a2, int a3, int a4)
{
  return j_j_mm_camera_get_stream_parms(a1, a2, a3, a4);
}

//----- (0000A820) --------------------------------------------------------
signed int __fastcall j_j_mm_camera_get_stream_parms(int a1, int a2, int a3, int a4)
{
  return j_mm_camera_get_stream_parms(a1, a2, a3, a4);
}

//----- (0000A82C) --------------------------------------------------------
signed int __fastcall j_j_j_mm_camera_get_queued_buf_count(int a1, int a2, int a3)
{
  return j_j_mm_camera_get_queued_buf_count(a1, a2, a3);
}

//----- (0000A830) --------------------------------------------------------
signed int __fastcall j_j_mm_camera_get_queued_buf_count(int a1, int a2, int a3)
{
  return j_mm_camera_get_queued_buf_count(a1, a2, a3);
}

//----- (0000A83C) --------------------------------------------------------
signed int __fastcall j_j_j_mm_camera_set_stream_parms(int a1, int a2, int a3, int a4)
{
  return j_j_mm_camera_set_stream_parms(a1, a2, a3, a4);
}

//----- (0000A840) --------------------------------------------------------
signed int __fastcall j_j_mm_camera_set_stream_parms(int a1, int a2, int a3, int a4)
{
  return j_mm_camera_set_stream_parms(a1, a2, a3, a4);
}

//----- (0000A84C) --------------------------------------------------------
signed int __fastcall j_j_j_mm_camera_unmap_stream_buf(int a1, int a2, int a3, char a4, int a5, int a6)
{
  return j_j_mm_camera_unmap_stream_buf(a1, a2, a3, a4, a5, a6);
}

//----- (0000A850) --------------------------------------------------------
signed int __fastcall j_j_mm_camera_unmap_stream_buf(int a1, int a2, int a3, char a4, int a5, int a6)
{
  return j_mm_camera_unmap_stream_buf(a1, a2, a3, a4, a5, a6);
}

//----- (0000A85C) --------------------------------------------------------
signed int __fastcall j_j_j_mm_camera_map_stream_buf(int a1, int a2, int a3, char a4, int a5, int a6, int a7, int a8)
{
  return j_j_mm_camera_map_stream_buf(a1, a2, a3, a4, a5, a6, a7, a8);
}

//----- (0000A860) --------------------------------------------------------
signed int __fastcall j_j_mm_camera_map_stream_buf(int a1, int a2, int a3, char a4, int a5, int a6, int a7, int a8)
{
  return j_mm_camera_map_stream_buf(a1, a2, a3, a4, a5, a6, a7, a8);
}

//----- (0000A86C) --------------------------------------------------------
signed int __fastcall j_j_j_mm_camera_config_stream(int a1, int a2, int a3, int a4)
{
  return j_j_mm_camera_config_stream(a1, a2, a3, a4);
}

//----- (0000A870) --------------------------------------------------------
signed int __fastcall j_j_mm_camera_config_stream(int a1, int a2, int a3, int a4)
{
  return j_mm_camera_config_stream(a1, a2, a3, a4);
}

//----- (0000A87C) --------------------------------------------------------
signed int __fastcall j_j_j_mm_camera_del_stream(int a1, int a2, int a3)
{
  return j_j_mm_camera_del_stream(a1, a2, a3);
}

//----- (0000A880) --------------------------------------------------------
signed int __fastcall j_j_mm_camera_del_stream(int a1, int a2, int a3)
{
  return j_mm_camera_del_stream(a1, a2, a3);
}

//----- (0000A88C) --------------------------------------------------------
int __fastcall j_j_j_mm_camera_add_stream(int a1, int a2)
{
  return j_j_mm_camera_add_stream(a1, a2);
}

//----- (0000A890) --------------------------------------------------------
int __fastcall j_j_mm_camera_add_stream(int a1, int a2)
{
  return j_mm_camera_add_stream(a1, a2);
}

//----- (0000A89C) --------------------------------------------------------
signed int __fastcall j_j_j_mm_camera_get_bundle_info(int a1, int a2, int a3)
{
  return j_j_mm_camera_get_bundle_info(a1, a2, a3);
}

//----- (0000A8A0) --------------------------------------------------------
signed int __fastcall j_j_mm_camera_get_bundle_info(int a1, int a2, int a3)
{
  return j_mm_camera_get_bundle_info(a1, a2, a3);
}

//----- (0000A8AC) --------------------------------------------------------
signed int __fastcall j_j_j_mm_camera_del_channel(int a1, int a2)
{
  return j_j_mm_camera_del_channel(a1, a2);
}

//----- (0000A8B0) --------------------------------------------------------
signed int __fastcall j_j_mm_camera_del_channel(int a1, int a2)
{
  return j_mm_camera_del_channel(a1, a2);
}

//----- (0000A8BC) --------------------------------------------------------
int __fastcall j_j_j_mm_camera_add_channel(int a1, int a2, int a3, int a4)
{
  return j_j_mm_camera_add_channel(a1, a2, a3, a4);
}

//----- (0000A8C0) --------------------------------------------------------
int __fastcall j_j_mm_camera_add_channel(int a1, int a2, int a3, int a4)
{
  return j_mm_camera_add_channel(a1, a2, a3, a4);
}

//----- (0000A8CC) --------------------------------------------------------
signed int __fastcall j_j_j_mm_camera_unprepare_snapshot(int a1, int a2)
{
  return j_j_mm_camera_unprepare_snapshot(a1, a2);
}

//----- (0000A8D0) --------------------------------------------------------
signed int __fastcall j_j_mm_camera_unprepare_snapshot(int a1, int a2)
{
  return j_mm_camera_unprepare_snapshot(a1, a2);
}

//----- (0000A8DC) --------------------------------------------------------
int __fastcall j_j_j_mm_camera_prepare_snapshot(int a1, int a2, int a3)
{
  return j_j_mm_camera_prepare_snapshot(a1, a2, a3);
}

//----- (0000A8E0) --------------------------------------------------------
int __fastcall j_j_mm_camera_prepare_snapshot(int a1, int a2, int a3)
{
  return j_mm_camera_prepare_snapshot(a1, a2, a3);
}

//----- (0000A8EC) --------------------------------------------------------
int __fastcall j_j_j_mm_camera_cancel_auto_focus(int a1)
{
  return j_j_mm_camera_cancel_auto_focus(a1);
}

//----- (0000A8F0) --------------------------------------------------------
int __fastcall j_j_mm_camera_cancel_auto_focus(int a1)
{
  return j_mm_camera_cancel_auto_focus(a1);
}

//----- (0000A8FC) --------------------------------------------------------
int __fastcall j_j_j_mm_camera_do_auto_focus(int a1, int a2, int a3)
{
  return j_j_mm_camera_do_auto_focus(a1, a2, a3);
}

//----- (0000A900) --------------------------------------------------------
int __fastcall j_j_mm_camera_do_auto_focus(int a1, int a2, int a3)
{
  return j_mm_camera_do_auto_focus(a1, a2, a3);
}

//----- (0000A90C) --------------------------------------------------------
int __fastcall j_j_j_mm_camera_get_parms(int a1, int a2, int a3)
{
  return j_j_mm_camera_get_parms(a1, a2, a3);
}

//----- (0000A910) --------------------------------------------------------
int __fastcall j_j_mm_camera_get_parms(int a1, int a2, int a3)
{
  return j_mm_camera_get_parms(a1, a2, a3);
}

//----- (0000A91C) --------------------------------------------------------
int __fastcall j_j_j_mm_camera_set_parms(int a1, int a2, int a3)
{
  return j_j_mm_camera_set_parms(a1, a2, a3);
}

//----- (0000A920) --------------------------------------------------------
int __fastcall j_j_mm_camera_set_parms(int a1, int a2, int a3)
{
  return j_mm_camera_set_parms(a1, a2, a3);
}

//----- (0000A92C) --------------------------------------------------------
int __fastcall j_j_j_mm_camera_unmap_buf(int a1, int a2)
{
  return j_j_mm_camera_unmap_buf(a1, a2);
}

//----- (0000A930) --------------------------------------------------------
int __fastcall j_j_mm_camera_unmap_buf(int a1, int a2)
{
  return j_mm_camera_unmap_buf(a1, a2);
}

//----- (0000A93C) --------------------------------------------------------
int __fastcall j_j_j_mm_camera_map_buf(int a1, int a2, int a3, int a4)
{
  return j_j_mm_camera_map_buf(a1, a2, a3, a4);
}

//----- (0000A940) --------------------------------------------------------
int __fastcall j_j_mm_camera_map_buf(int a1, int a2, int a3, int a4)
{
  return j_mm_camera_map_buf(a1, a2, a3, a4);
}

//----- (0000A94C) --------------------------------------------------------
signed int __fastcall j_j_j_mm_camera_register_event_notify(int a1, int a2, int a3)
{
  return j_j_mm_camera_register_event_notify(a1, a2, a3);
}

//----- (0000A950) --------------------------------------------------------
signed int __fastcall j_j_mm_camera_register_event_notify(int a1, int a2, int a3)
{
  return j_mm_camera_register_event_notify(a1, a2, a3);
}

//----- (0000A95C) --------------------------------------------------------
int __fastcall j_j_j_mm_camera_query_capability(int a1)
{
  return j_j_mm_camera_query_capability(a1);
}

//----- (0000A960) --------------------------------------------------------
int __fastcall j_j_mm_camera_query_capability(int a1)
{
  return j_mm_camera_query_capability(a1);
}

//----- (0000A96C) --------------------------------------------------------
int j_j_pthread_mutex_unlock(pthread_mutex_t *mutex)
{
  return j_pthread_mutex_unlock(mutex);
}

//----- (0000A970) --------------------------------------------------------
int j_pthread_mutex_unlock(pthread_mutex_t *mutex)
{
  return pthread_mutex_unlock(mutex);
}

//----- (0000A97C) --------------------------------------------------------
int __fastcall j_j_j_mm_channel_qbuf(int a1, int *a2)
{
  return j_j_mm_channel_qbuf(a1, a2);
}

//----- (0000A980) --------------------------------------------------------
int __fastcall j_j_mm_channel_qbuf(int a1, int *a2)
{
  return j_mm_channel_qbuf(a1, a2);
}

//----- (0000A98C) --------------------------------------------------------
signed int __fastcall j_j_j_mm_channel_fsm_fn(int a1, int a2, int a3, int *a4)
{
  return j_j_mm_channel_fsm_fn(a1, a2, a3, a4);
}

//----- (0000A990) --------------------------------------------------------
signed int __fastcall j_j_mm_channel_fsm_fn(int a1, int a2, int a3, int *a4)
{
  return j_mm_channel_fsm_fn(a1, a2, a3, a4);
}

//----- (0000A99C) --------------------------------------------------------
int __fastcall j_j_j_mm_stream_fsm_fn(int a1, int (*a2)(int), int a3, int a4)
{
  return j_j_mm_stream_fsm_fn(a1, a2, a3, a4);
}

//----- (0000A9A0) --------------------------------------------------------
int __fastcall j_j_mm_stream_fsm_fn(int a1, int (*a2)(int), int a3, int a4)
{
  return j_mm_stream_fsm_fn(a1, a2, a3, a4);
}

//----- (0000A9AC) --------------------------------------------------------
signed int __fastcall j_j_j_mm_channel_request_super_buf(int a1, int a2)
{
  return j_j_mm_channel_request_super_buf(a1, a2);
}

//----- (0000A9B0) --------------------------------------------------------
signed int __fastcall j_j_mm_channel_request_super_buf(int a1, int a2)
{
  return j_mm_channel_request_super_buf(a1, a2);
}

//----- (0000A9BC) --------------------------------------------------------
int __fastcall j_j_j_mm_stream_unmap_buf(int a1, int a2, int a3, int a4)
{
  return j_j_mm_stream_unmap_buf(a1, a2, a3, a4);
}

//----- (0000A9C0) --------------------------------------------------------
int __fastcall j_j_mm_stream_unmap_buf(int a1, int a2, int a3, int a4)
{
  return j_mm_stream_unmap_buf(a1, a2, a3, a4);
}

//----- (0000A9CC) --------------------------------------------------------
int __fastcall j_j_j_mm_channel_get_queued_buf_count(int a1, int a2)
{
  return j_j_mm_channel_get_queued_buf_count(a1, a2);
}

//----- (0000A9D0) --------------------------------------------------------
int __fastcall j_j_mm_channel_get_queued_buf_count(int a1, int a2)
{
  return j_mm_channel_get_queued_buf_count(a1, a2);
}

//----- (0000A9DC) --------------------------------------------------------
int __fastcall j_j_j_mm_channel_del_stream(int a1, int a2)
{
  return j_j_mm_channel_del_stream(a1, a2);
}

//----- (0000A9E0) --------------------------------------------------------
int __fastcall j_j_mm_channel_del_stream(int a1, int a2)
{
  return j_mm_channel_del_stream(a1, a2);
}

//----- (0000A9EC) --------------------------------------------------------
int __fastcall j_j_j_mm_channel_config_stream(int a1, int a2, int a3)
{
  return j_j_mm_channel_config_stream(a1, a2, a3);
}

//----- (0000A9F0) --------------------------------------------------------
int __fastcall j_j_mm_channel_config_stream(int a1, int a2, int a3)
{
  return j_mm_channel_config_stream(a1, a2, a3);
}

//----- (0000A9FC) --------------------------------------------------------
signed int __fastcall j_j_j_mm_channel_get_bundle_info(int *a1, _BYTE *a2, int a3)
{
  return j_j_mm_channel_get_bundle_info(a1, a2, a3);
}

//----- (0000AA00) --------------------------------------------------------
signed int __fastcall j_j_mm_channel_get_bundle_info(int *a1, _BYTE *a2, int a3)
{
  return j_mm_channel_get_bundle_info(a1, a2, a3);
}

//----- (0000AA0C) --------------------------------------------------------
int __fastcall j_j_j_mm_channel_set_stream_parm(int a1, int *a2)
{
  return j_j_mm_channel_set_stream_parm(a1, a2);
}

//----- (0000AA10) --------------------------------------------------------
int __fastcall j_j_mm_channel_set_stream_parm(int a1, int *a2)
{
  return j_mm_channel_set_stream_parm(a1, a2);
}

//----- (0000AA1C) --------------------------------------------------------
int __fastcall j_j_j_mm_channel_get_stream_parm(int a1, int *a2)
{
  return j_j_mm_channel_get_stream_parm(a1, a2);
}

//----- (0000AA20) --------------------------------------------------------
int __fastcall j_j_mm_channel_get_stream_parm(int a1, int *a2)
{
  return j_mm_channel_get_stream_parm(a1, a2);
}

//----- (0000AA2C) --------------------------------------------------------
int __fastcall j_j_j_mm_channel_do_stream_action(int a1, int *a2)
{
  return j_j_mm_channel_do_stream_action(a1, a2);
}

//----- (0000AA30) --------------------------------------------------------
int __fastcall j_j_mm_channel_do_stream_action(int a1, int *a2)
{
  return j_mm_channel_do_stream_action(a1, a2);
}

//----- (0000AA3C) --------------------------------------------------------
int __fastcall j_j_j_mm_channel_map_stream_buf(int a1, int *a2)
{
  return j_j_mm_channel_map_stream_buf(a1, a2);
}

//----- (0000AA40) --------------------------------------------------------
int __fastcall j_j_mm_channel_map_stream_buf(int a1, int *a2)
{
  return j_mm_channel_map_stream_buf(a1, a2);
}

//----- (0000AA4C) --------------------------------------------------------
int __fastcall j_j_j_mm_channel_unmap_stream_buf(int a1, int *a2)
{
  return j_j_mm_channel_unmap_stream_buf(a1, a2);
}

//----- (0000AA50) --------------------------------------------------------
int __fastcall j_j_mm_channel_unmap_stream_buf(int a1, int *a2)
{
  return j_mm_channel_unmap_stream_buf(a1, a2);
}

//----- (0000AA5C) --------------------------------------------------------
signed int __fastcall j_j_j_mm_channel_cancel_super_buf_request(int a1)
{
  return j_j_mm_channel_cancel_super_buf_request(a1);
}

//----- (0000AA60) --------------------------------------------------------
signed int __fastcall j_j_mm_channel_cancel_super_buf_request(int a1)
{
  return j_mm_channel_cancel_super_buf_request(a1);
}

//----- (0000AA6C) --------------------------------------------------------
signed int __fastcall j_j_j_mm_channel_flush_super_buf_queue(int a1, int a2)
{
  return j_j_mm_channel_flush_super_buf_queue(a1, a2);
}

//----- (0000AA70) --------------------------------------------------------
signed int __fastcall j_j_mm_channel_flush_super_buf_queue(int a1, int a2)
{
  return j_mm_channel_flush_super_buf_queue(a1, a2);
}

//----- (0000AA7C) --------------------------------------------------------
signed int __fastcall j_j_j_mm_channel_config_notify_mode(int a1, int a2)
{
  return j_j_mm_channel_config_notify_mode(a1, a2);
}

//----- (0000AA80) --------------------------------------------------------
signed int __fastcall j_j_mm_channel_config_notify_mode(int a1, int a2)
{
  return j_mm_channel_config_notify_mode(a1, a2);
}

//----- (0000AA8C) --------------------------------------------------------
signed int __fastcall j_j_j_mm_channel_unprepare_snapshot(int a1, int a2, int a3, int a4)
{
  return j_j_mm_channel_unprepare_snapshot(a1, a2, a3, a4);
}

//----- (0000AA90) --------------------------------------------------------
signed int __fastcall j_j_mm_channel_unprepare_snapshot(int a1, int a2, int a3, int a4)
{
  return j_mm_channel_unprepare_snapshot(a1, a2, a3, a4);
}

//----- (0000AA9C) --------------------------------------------------------
int __fastcall j_j_j_mm_channel_superbuf_flush(int a1, int a2)
{
  return j_j_mm_channel_superbuf_flush(a1, a2);
}

//----- (0000AAA0) --------------------------------------------------------
int __fastcall j_j_mm_channel_superbuf_flush(int a1, int a2)
{
  return j_mm_channel_superbuf_flush(a1, a2);
}

//----- (0000AAAC) --------------------------------------------------------
int __fastcall j_j___android_log_print(int a1, int a2, const char *a3)
{
  return j___android_log_print(a1, a2, a3);
}

//----- (0000AAB0) --------------------------------------------------------
int __fastcall j___android_log_print(int a1, int a2, const char *a3)
{
  return _android_log_print(a1, a2, a3);
}
// 2FD8: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0000AABC) --------------------------------------------------------
int __fastcall j_j_j_mm_stream_set_parm(int a1, int a2, int a3)
{
  return j_j_mm_stream_set_parm(a1, a2, a3);
}

//----- (0000AAC0) --------------------------------------------------------
int __fastcall j_j_mm_stream_set_parm(int a1, int a2, int a3)
{
  return j_mm_stream_set_parm(a1, a2, a3);
}

//----- (0000AACC) --------------------------------------------------------
int __fastcall j_j_j_mm_stream_get_parm(int a1, int a2, int a3)
{
  return j_j_mm_stream_get_parm(a1, a2, a3);
}

//----- (0000AAD0) --------------------------------------------------------
int __fastcall j_j_mm_stream_get_parm(int a1, int a2, int a3)
{
  return j_mm_stream_get_parm(a1, a2, a3);
}

//----- (0000AADC) --------------------------------------------------------
int __fastcall j_j_j_mm_stream_set_fmt(int a1)
{
  return j_j_mm_stream_set_fmt(a1);
}

//----- (0000AAE0) --------------------------------------------------------
int __fastcall j_j_mm_stream_set_fmt(int a1)
{
  return j_mm_stream_set_fmt(a1);
}

//----- (0000AAEC) --------------------------------------------------------
int __fastcall j_j_j_mm_stream_get_queued_buf_count(int a1)
{
  return j_j_mm_stream_get_queued_buf_count(a1);
}

//----- (0000AAF0) --------------------------------------------------------
int __fastcall j_j_mm_stream_get_queued_buf_count(int a1)
{
  return j_mm_stream_get_queued_buf_count(a1);
}

//----- (0000AAFC) --------------------------------------------------------
signed int __fastcall j_j_j_mm_stream_buf_done(int a1, int a2, int a3)
{
  return j_j_mm_stream_buf_done(a1, a2, a3);
}

//----- (0000AB00) --------------------------------------------------------
signed int __fastcall j_j_mm_stream_buf_done(int a1, int a2, int a3)
{
  return j_mm_stream_buf_done(a1, a2, a3);
}

//----- (0000AB0C) --------------------------------------------------------
int __fastcall j_j_j_mm_stream_set_parm_0(int a1, int a2, int a3)
{
  return j_j_mm_stream_set_parm_0(a1, a2, a3);
}

//----- (0000AB10) --------------------------------------------------------
int __fastcall j_j_mm_stream_set_parm_0(int a1, int a2, int a3)
{
  return j_mm_stream_set_parm_0(a1, a2, a3);
}

//----- (0000AB1C) --------------------------------------------------------
int __fastcall j_j_j_mm_stream_fsm_inited(int a1, int a2, int a3, int a4)
{
  return j_j_mm_stream_fsm_inited(a1, a2, a3, a4);
}

//----- (0000AB20) --------------------------------------------------------
int __fastcall j_j_mm_stream_fsm_inited(int a1, int a2, int a3, int a4)
{
  return j_mm_stream_fsm_inited(a1, a2, a3, a4);
}

//----- (0000AB2C) --------------------------------------------------------
signed int __fastcall j_j_j_mm_stream_fsm_acquired(int a1, int a2, int a3, int a4)
{
  return j_j_mm_stream_fsm_acquired(a1, a2, a3, a4);
}

//----- (0000AB30) --------------------------------------------------------
signed int __fastcall j_j_mm_stream_fsm_acquired(int a1, int a2, int a3, int a4)
{
  return j_mm_stream_fsm_acquired(a1, a2, a3, a4);
}

//----- (0000AB3C) --------------------------------------------------------
signed int __fastcall j_j_j_mm_stream_fsm_cfg(int a1, int a2, int a3, int a4)
{
  return j_j_mm_stream_fsm_cfg(a1, a2, a3, a4);
}

//----- (0000AB40) --------------------------------------------------------
signed int __fastcall j_j_mm_stream_fsm_cfg(int a1, int a2, int a3, int a4)
{
  return j_mm_stream_fsm_cfg(a1, a2, a3, a4);
}

//----- (0000AB4C) --------------------------------------------------------
int __fastcall j_j_j_mm_stream_fsm_buffed(int a1, int (*a2)(int), int a3, int a4)
{
  return j_j_mm_stream_fsm_buffed(a1, a2, a3, a4);
}

//----- (0000AB50) --------------------------------------------------------
int __fastcall j_j_mm_stream_fsm_buffed(int a1, int (*a2)(int), int a3, int a4)
{
  return j_mm_stream_fsm_buffed(a1, a2, a3, a4);
}

//----- (0000AB5C) --------------------------------------------------------
int __fastcall j_j_j_mm_stream_fsm_reg(int a1, int a2, int a3, int a4)
{
  return j_j_mm_stream_fsm_reg(a1, a2, a3, a4);
}

//----- (0000AB60) --------------------------------------------------------
int __fastcall j_j_mm_stream_fsm_reg(int a1, int a2, int a3, int a4)
{
  return j_mm_stream_fsm_reg(a1, a2, a3, a4);
}

//----- (0000AB6C) --------------------------------------------------------
signed int __fastcall j_j_j_mm_stream_fsm_active(int a1, int a2, int a3, int a4)
{
  return j_j_mm_stream_fsm_active(a1, a2, a3, a4);
}

//----- (0000AB70) --------------------------------------------------------
signed int __fastcall j_j_mm_stream_fsm_active(int a1, int a2, int a3, int a4)
{
  return j_mm_stream_fsm_active(a1, a2, a3, a4);
}

//----- (0000AB7C) --------------------------------------------------------
int __fastcall j_j_j_mm_camera_cmd_thread_destroy(int a1)
{
  return j_j_mm_camera_cmd_thread_destroy(a1);
}

//----- (0000AB80) --------------------------------------------------------
int __fastcall j_j_mm_camera_cmd_thread_destroy(int a1)
{
  return j_mm_camera_cmd_thread_destroy(a1);
}

//----- (0000AB8C) --------------------------------------------------------
int j_j_close(int fd)
{
  return j_close(fd);
}

//----- (0000AB90) --------------------------------------------------------
int j_close(int fd)
{
  return close(fd);
}

//----- (0000AB9C) --------------------------------------------------------
void sub_AB9C()
{
  sub_ABA0();
}

//----- (0000ABA0) --------------------------------------------------------
void sub_ABA0()
{
  JUMPOUT(sub_A60C);
}
// A60C: using guessed type int sub_A60C();

//----- (0000ABAC) --------------------------------------------------------
int __fastcall sub_ABAC(_DWORD *a1)
{
  return sub_ABB0(a1);
}

//----- (0000ABB0) --------------------------------------------------------
int __fastcall sub_ABB0(_DWORD *a1)
{
  return sub_A67C(a1);
}

// ALL OK, 497 function(s) have been successfully decompiled
